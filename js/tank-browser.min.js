var jscolor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){if(!jscolor.dir){var e=jscolor.detectDir();jscolor.dir=e!==!1?e:"jscolor/"}return jscolor.dir},detectDir:function(){for(var e=location.href,t=document.getElementsByTagName("base"),i=0;i<t.length;i+=1)t[i].href&&(e=t[i].href);for(t=document.getElementsByTagName("script"),i=0;i<t.length;i+=1)if(t[i].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(t[i].src)){var n=new jscolor.URI(t[i].src),r=n.toAbsolute(e);return r.path=r.path.replace(/[^\/]+$/,""),r.query=null,r.fragment=null,r.toString()}return!1},bind:function(){for(var e=new RegExp("(^|\\s)("+jscolor.bindClass+")(\\s*(\\{[^}]*\\})|\\s|$)","i"),t=document.getElementsByTagName("input"),i=0;i<t.length;i+=1)if(!jscolor.isColorAttrSupported||"color"!=t[i].type.toLowerCase()){var n;if(!t[i].color&&t[i].className&&(n=t[i].className.match(e))){var r={};if(n[4])try{r=new Function("return ("+n[4]+")")()}catch(s){}t[i].color=new jscolor.color(t[i],r)}}},preload:function(){for(var e in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(e)&&jscolor.loadImage(e)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(e){jscolor.imgRequire[e]=!0},loadImage:function(e){jscolor.imgLoaded[e]||(jscolor.imgLoaded[e]=new Image,jscolor.imgLoaded[e].src=jscolor.getDir()+e)},fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},fireEvent:function(e,t){if(e){var i;document.createEvent?(i=document.createEvent("HTMLEvents"),i.initEvent(t,!0,!0),e.dispatchEvent(i)):document.createEventObject?(i=document.createEventObject(),e.fireEvent("on"+t,i)):e["on"+t]&&e["on"+t]()}},getElementPos:function(e){var t=e,i=e,n=0,r=0;if(t.offsetParent)do n+=t.offsetLeft,r+=t.offsetTop;while(t==t.offsetParent);for(;(i=i.parentNode)&&"BODY"!==i.nodeName.toUpperCase();)n-=i.scrollLeft,r-=i.scrollTop;return[n,r]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var t=0,i=0;return e||(e=window.event),"number"==typeof e.offsetX?(t=e.offsetX,i=e.offsetY):"number"==typeof e.layerX&&(t=e.layerX,i=e.layerY),{x:t,y:i}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(e){function t(e){for(var t="";e;)if("../"===e.substr(0,3)||"./"===e.substr(0,2))e=e.replace(/^\.+/,"").substr(1);else if("/./"===e.substr(0,3)||"/."===e)e="/"+e.substr(3);else if("/../"===e.substr(0,4)||"/.."===e)e="/"+e.substr(4),t=t.replace(/\/?[^\/]*$/,"");else if("."===e||".."===e)e="";else{var i=e.match(/^\/?[^\/]*/)[0];e=e.substr(i.length),t+=i}return t}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(e){var t=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=t[3]?t[2]:null,this.authority=t[5]?t[6]:null,this.path=t[7],this.query=t[9]?t[10]:null,this.fragment=t[12]?t[13]:null,this},this.toString=function(){var e="";return null!==this.scheme&&(e=e+this.scheme+":"),null!==this.authority&&(e=e+"//"+this.authority),null!==this.path&&(e+=this.path),null!==this.query&&(e=e+"?"+this.query),null!==this.fragment&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(e){e=new jscolor.URI(e);var i=this,n=new jscolor.URI;return null===e.scheme?!1:(null!==i.scheme&&i.scheme.toLowerCase()===e.scheme.toLowerCase()&&(i.scheme=null),null!==i.scheme?(n.scheme=i.scheme,n.authority=i.authority,n.path=t(i.path),n.query=i.query):(null!==i.authority?(n.authority=i.authority,n.path=t(i.path),n.query=i.query):(""===i.path?(n.path=e.path,null!==i.query?n.query=i.query:n.query=e.query):("/"===i.path.substr(0,1)?n.path=t(i.path):(null!==e.authority&&""===e.path?n.path="/"+i.path:n.path=e.path.replace(/[^\/]+$/,"")+i.path,n.path=t(n.path)),n.query=i.query),n.authority=e.authority),n.scheme=e.scheme),n.fragment=i.fragment,n)},e&&this.parse(e)},color:function(e,t){function i(e,t,i){var n=Math.min(Math.min(e,t),i),r=Math.max(Math.max(e,t),i),s=r-n;if(0===s)return[null,0,r];var o=e===n?3+(i-t)/s:t===n?5+(e-i)/s:1+(t-e)/s;return[6===o?0:o,s/r,r]}function n(e,t,i){if(null===e)return[i,i,i];var n=Math.floor(e),r=n%2?e-n:1-(e-n),s=i*(1-t),o=i*(1-t*r);switch(n){case 6:case 0:return[i,o,s];case 1:return[o,i,s];case 2:return[s,i,o];case 3:return[s,o,i];case 4:return[o,s,i];case 5:return[i,s,o]}}function r(){delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function o(t,i){function n(){var e=y.pickerInsetColor.split(/\s+/),t=e.length<2?e[0]:e[1]+" "+e[0]+" "+e[0]+" "+e[1];c.btn.style.borderColor=t}if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(y.pickerCloseText)};for(var r=0,s=4;r<jscolor.images.sld[1];r+=s){var o=document.createElement("div");o.style.height=s+"px",o.style.fontSize="1px",o.style.lineHeight="0",jscolor.picker.sld.appendChild(o)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var c=jscolor.picker;if(c.box.onmouseup=c.box.onmouseout=function(){e.focus()},c.box.onmousedown=function(){x=!0},c.box.onmousemove=function(e){(C||S)&&(C&&p(e),S&&g(e),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),m())},"ontouchstart"in window){var h=function(e){var t={offsetX:e.touches[0].pageX-E.X,offsetY:e.touches[0].pageY-E.Y};(C||S)&&(C&&p(t),S&&g(t),m()),e.stopPropagation(),e.preventDefault()};c.box.removeEventListener("touchmove",h,!1),c.box.addEventListener("touchmove",h,!1)}c.padM.onmouseup=c.padM.onmouseout=function(){C&&(C=!1,jscolor.fireEvent(w,"change"))},c.padM.onmousedown=function(e){switch(b){case 0:0===y.hsv[2]&&y.fromHSV(null,null,1);break;case 1:0===y.hsv[1]&&y.fromHSV(null,1,null)}S=!1,C=!0,p(e),m()},"ontouchstart"in window&&c.padM.addEventListener("touchstart",function(e){E={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-E.X,offsetY:e.touches[0].pageY-E.Y})}),c.sldM.onmouseup=c.sldM.onmouseout=function(){S&&(S=!1,jscolor.fireEvent(w,"change"))},c.sldM.onmousedown=function(e){C=!1,S=!0,g(e),m()},"ontouchstart"in window&&c.sldM.addEventListener("touchstart",function(e){E={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-E.X,offsetY:e.touches[0].pageY-E.Y})});var d=a(y);c.box.style.width=d[0]+"px",c.box.style.height=d[1]+"px",c.boxB.style.position="absolute",c.boxB.style.clear="both",c.boxB.style.left=t+"px",c.boxB.style.top=i+"px",c.boxB.style.zIndex=y.pickerZIndex,c.boxB.style.border=y.pickerBorder+"px solid",c.boxB.style.borderColor=y.pickerBorderColor,c.boxB.style.background=y.pickerFaceColor,c.pad.style.width=jscolor.images.pad[0]+"px",c.pad.style.height=jscolor.images.pad[1]+"px",c.padB.style.position="absolute",c.padB.style.left=y.pickerFace+"px",c.padB.style.top=y.pickerFace+"px",c.padB.style.border=y.pickerInset+"px solid",c.padB.style.borderColor=y.pickerInsetColor,c.padM.style.position="absolute",c.padM.style.left="0",c.padM.style.top="0",c.padM.style.width=y.pickerFace+2*y.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",c.padM.style.height=c.box.style.height,c.padM.style.cursor="crosshair",c.sld.style.overflow="hidden",c.sld.style.width=jscolor.images.sld[0]+"px",c.sld.style.height=jscolor.images.sld[1]+"px",c.sldB.style.display=y.slider?"block":"none",c.sldB.style.position="absolute",c.sldB.style.right=y.pickerFace+"px",c.sldB.style.top=y.pickerFace+"px",c.sldB.style.border=y.pickerInset+"px solid",c.sldB.style.borderColor=y.pickerInsetColor,c.sldM.style.display=y.slider?"block":"none",c.sldM.style.position="absolute",c.sldM.style.right="0",c.sldM.style.top="0",c.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+y.pickerFace+2*y.pickerInset+"px",c.sldM.style.height=c.box.style.height;try{c.sldM.style.cursor="pointer"}catch(f){c.sldM.style.cursor="hand"}c.btn.style.display=y.pickerClosable?"block":"none",c.btn.style.position="absolute",c.btn.style.left=y.pickerFace+"px",c.btn.style.bottom=y.pickerFace+"px",c.btn.style.padding="0 15px",c.btn.style.height="18px",c.btn.style.border=y.pickerInset+"px solid",n(),c.btn.style.color=y.pickerButtonColor,c.btn.style.font="12px sans-serif",c.btn.style.textAlign="center";try{c.btn.style.cursor="pointer"}catch(f){c.btn.style.cursor="hand"}c.btn.onmousedown=function(){y.hidePicker()},c.btnS.style.lineHeight=c.btn.style.height;var v;switch(b){case 0:v="hs.png";break;case 1:v="hv.png"}c.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",c.padM.style.backgroundRepeat="no-repeat",c.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",c.sldM.style.backgroundRepeat="no-repeat",c.pad.style.backgroundImage="url('"+jscolor.getDir()+v+"')",c.pad.style.backgroundRepeat="no-repeat",c.pad.style.backgroundPosition="0 0",l(),u(),jscolor.picker.owner=y,document.getElementsByTagName("body")[0].appendChild(c.boxB)}function a(e){var t=[2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[0]+(e.slider?2*e.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),e.pickerClosable?4*e.pickerInset+3*e.pickerFace+jscolor.images.pad[1]+e.pickerButtonHeight:2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[1]];return t}function l(){var e;switch(b){case 0:e=1;break;case 1:e=2}var t=Math.round(y.hsv[0]/6*(jscolor.images.pad[0]-1)),i=Math.round((1-y.hsv[e])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=y.pickerFace+y.pickerInset+t-Math.floor(jscolor.images.cross[0]/2)+"px "+(y.pickerFace+y.pickerInset+i-Math.floor(jscolor.images.cross[1]/2))+"px";var r,o,a=jscolor.picker.sld.childNodes;switch(b){case 0:for(r=n(y.hsv[0],y.hsv[1],1),o=0;o<a.length;o+=1)a[o].style.backgroundColor="rgb("+r[0]*(1-o/a.length)*100+"%,"+r[1]*(1-o/a.length)*100+"%,"+r[2]*(1-o/a.length)*100+"%)";break;case 1:s,c=[y.hsv[2],0,0],o=Math.floor(y.hsv[0]);var l=o%2?y.hsv[0]-o:1-(y.hsv[0]-o);switch(o){case 6:case 0:r=[0,1,2];break;case 1:r=[1,0,2];break;case 2:r=[2,0,1];break;case 3:r=[2,1,0];break;case 4:r=[1,2,0];break;case 5:r=[0,2,1]}for(o=0;o<a.length;o+=1)s=1-1/(a.length-1)*o,c[1]=c[0]*(1-s*l),c[2]=c[0]*(1-s),a[o].style.backgroundColor="rgb("+100*c[r[0]]+"%,"+100*c[r[1]]+"%,"+100*c[r[2]]+"%)"}}function u(){var e;switch(b){case 0:e=2;break;case 1:e=1}var t=Math.round((1-y.hsv[e])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(y.pickerFace+y.pickerInset+t-Math.floor(jscolor.images.arrow[1]/2))+"px"}function h(){return jscolor.picker&&jscolor.picker.owner===y}function d(){w===e&&y.importColor(),y.pickerOnfocus&&y.hidePicker()}function f(){w!==e&&y.importColor()}function p(e){var t=jscolor.getRelMousePos(e),i=t.x-y.pickerFace-y.pickerInset,n=t.y-y.pickerFace-y.pickerInset;switch(b){case 0:y.fromHSV(i*(6/(jscolor.images.pad[0]-1)),1-n/(jscolor.images.pad[1]-1),null,A);break;case 1:y.fromHSV(i*(6/(jscolor.images.pad[0]-1)),null,1-n/(jscolor.images.pad[1]-1),A)}}function g(e){var t=jscolor.getRelMousePos(e),i=t.y-y.pickerFace-y.pickerInset;switch(b){case 0:y.fromHSV(null,null,1-i/(jscolor.images.sld[1]-1),T);break;case 1:y.fromHSV(null,1-i/(jscolor.images.sld[1]-1),null,T)}}function m(){if(y.onImmediateChange){var e;e="string"==typeof y.onImmediateChange?new Function(y.onImmediateChange):y.onImmediateChange,e.call(y)}}this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=e,this.styleElement=e,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.minH=0,this.maxH=6,this.minS=0,this.maxS=1,this.minV=0,this.maxV=1,this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4;for(var v in t)t.hasOwnProperty(v)&&(this[v]=t[v]);this.hidePicker=function(){h()&&r()},this.showPicker=function(){if(!h()){var t,i,n,r=jscolor.getElementPos(e),s=jscolor.getElementSize(e),l=jscolor.getViewPos(),c=jscolor.getViewSize(),u=a(this);switch(this.pickerPosition.toLowerCase()){case"left":t=1,i=0,n=-1;break;case"right":t=1,i=0,n=1;break;case"top":t=0,i=1,n=-1;break;default:t=0,i=1,n=1}var d,f=(s[i]+u[i])/2;d=this.pickerSmartPosition?[-l[t]+r[t]+u[t]>c[t]&&-l[t]+r[t]+s[t]/2>c[t]/2&&r[t]+s[t]-u[t]>=0?r[t]+s[t]-u[t]:r[t],-l[i]+r[i]+s[i]+u[i]-f+f*n>c[i]?-l[i]+r[i]+s[i]/2>c[i]/2&&r[i]+s[i]-f-f*n>=0?r[i]+s[i]-f-f*n:r[i]+s[i]-f+f*n:r[i]+s[i]-f+f*n>=0?r[i]+s[i]-f+f*n:r[i]+s[i]-f-f*n]:[r[t],r[i]+s[i]-f+f*n],o(d[t],d[i])}},this.importColor=function(){w?this.adjust?!this.required&&/^\s*$/.test(w.value)?(w.value="",k.style.backgroundImage=k.jscStyle.backgroundImage,k.style.backgroundColor=k.jscStyle.backgroundColor,k.style.color=k.jscStyle.color,this.exportColor(M|L)):this.fromString(w.value)||this.exportColor():this.fromString(w.value,M)||(k.style.backgroundImage=k.jscStyle.backgroundImage,k.style.backgroundColor=k.jscStyle.backgroundColor,k.style.color=k.jscStyle.color,this.exportColor(M|L)):this.exportColor()},this.exportColor=function(e){if(!(e&M)&&w){var t=this.toString();this.caps&&(t=t.toUpperCase()),this.hash&&(t="#"+t),w.value=t}e&L||!k||(k.style.backgroundImage="none",k.style.backgroundColor="#"+this.toString(),k.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),e&T||!h()||l(),e&A||!h()||u()},this.fromHSV=function(e,t,i,r){null!==e&&(e=Math.max(0,this.minH,Math.min(6,this.maxH,e))),null!==t&&(t=Math.max(0,this.minS,Math.min(1,this.maxS,t))),null!==i&&(i=Math.max(0,this.minV,Math.min(1,this.maxV,i))),this.rgb=n(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===i?this.hsv[2]:this.hsv[2]=i),this.exportColor(r)},this.fromRGB=function(e,t,r,s){null!==e&&(e=Math.max(0,Math.min(1,e))),null!==t&&(t=Math.max(0,Math.min(1,t))),null!==r&&(r=Math.max(0,Math.min(1,r)));var o=i(null===e?this.rgb[0]:e,null===t?this.rgb[1]:t,null===r?this.rgb[2]:r);null!==o[0]&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,o[0]))),0!==o[2]&&(this.hsv[1]=null===o[1]?null:Math.max(0,this.minS,Math.min(1,this.maxS,o[1]))),this.hsv[2]=null===o[2]?null:Math.max(0,this.minV,Math.min(1,this.maxV,o[2]));var a=n(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=a[0],this.rgb[1]=a[1],this.rgb[2]=a[2],this.exportColor(s)},this.fromString=function(e,t){var i=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return i?(6===i[1].length?this.fromRGB(parseInt(i[1].substr(0,2),16)/255,parseInt(i[1].substr(2,2),16)/255,parseInt(i[1].substr(4,2),16)/255,t):this.fromRGB(parseInt(i[1].charAt(0)+i[1].charAt(0),16)/255,parseInt(i[1].charAt(1)+i[1].charAt(1),16)/255,parseInt(i[1].charAt(2)+i[1].charAt(2),16)/255,t),!0):!1},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var y=this,b="hvs"===this.pickerMode.toLowerCase()?1:0,x=!1,w=jscolor.fetchElement(this.valueElement),k=jscolor.fetchElement(this.styleElement),C=!1,S=!1,E={},M=1,L=2,T=4,A=8;jscolor.isColorAttrSupported=!1;var P=document.createElement("input");if(P.setAttribute&&(P.setAttribute("type","color"),"color"==P.type.toLowerCase()&&(jscolor.isColorAttrSupported=!0)),jscolor.addEvent(e,"focus",function(){y.pickerOnfocus&&y.showPicker()}),jscolor.addEvent(e,"blur",function(){x?x=!1:window.setTimeout(function(){x||d(),x=!1},0)}),w){var N=function(){y.fromString(w.value,M),m()};jscolor.addEvent(w,"keyup",N),jscolor.addEvent(w,"input",N),jscolor.addEvent(w,"blur",f),w.setAttribute("autocomplete","off")}switch(k&&(k.jscStyle={backgroundImage:k.style.backgroundImage,backgroundColor:k.style.backgroundColor,color:k.style.color}),b){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}};jscolor.install(),function(){function e(e){function t(t,i,n,r,s,o){for(;s>=0&&o>s;s+=e){var a=r?r[s]:s;n=i(n,t[a],a,t)}return n}return function(i,n,r,s){n=b(n,s,4);var o=!M(i)&&y.keys(i),a=(o||i).length,l=e>0?0:a-1;return arguments.length<3&&(r=i[o?o[l]:l],l+=e),t(i,n,r,o,l,a)}}function t(e){return function(t,i,n){i=x(i,n);for(var r=E(t),s=e>0?0:r-1;s>=0&&r>s;s+=e)if(i(t[s],s,t))return s;return-1}}function i(e,t,i){return function(n,r,s){var o=0,a=E(n);if("number"==typeof s)e>0?o=s>=0?s:Math.max(s+a,o):a=s>=0?Math.min(s+1,a):s+a+1;else if(i&&s&&a)return s=i(n,r),n[s]===r?s:-1;if(r!==r)return s=t(u.call(n,o,a),y.isNaN),s>=0?s+o:-1;for(s=e>0?o:a-1;s>=0&&a>s;s+=e)if(n[s]===r)return s;return-1}}function n(e,t){var i=N.length,n=e.constructor,r=y.isFunction(n)&&n.prototype||a,s="constructor";for(y.has(e,s)&&!y.contains(t,s)&&t.push(s);i--;)s=N[i],s in e&&e[s]!==r[s]&&!y.contains(t,s)&&t.push(s)}var r=this,s=r._,o=Array.prototype,a=Object.prototype,l=Function.prototype,c=o.push,u=o.slice,h=a.toString,d=a.hasOwnProperty,f=Array.isArray,p=Object.keys,g=l.bind,m=Object.create,v=function(){},y=function(e){return e instanceof y?e:this instanceof y?void(this._wrapped=e):new y(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=y),exports._=y):r._=y,y.VERSION="1.8.3";var b=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)};case 4:return function(i,n,r,s){return e.call(t,i,n,r,s)}}return function(){return e.apply(t,arguments)}},x=function(e,t,i){return null==e?y.identity:y.isFunction(e)?b(e,t,i):y.isObject(e)?y.matcher(e):y.property(e)};y.iteratee=function(e,t){return x(e,t,1/0)};var w=function(e,t){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var r=1;n>r;r++)for(var s=arguments[r],o=e(s),a=o.length,l=0;a>l;l++){var c=o[l];t&&void 0!==i[c]||(i[c]=s[c])}return i}},k=function(e){if(!y.isObject(e))return{};if(m)return m(e);v.prototype=e;var t=new v;return v.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},S=Math.pow(2,53)-1,E=C("length"),M=function(e){var t=E(e);return"number"==typeof t&&t>=0&&S>=t};y.each=y.forEach=function(e,t,i){t=b(t,i);var n,r;if(M(e))for(n=0,r=e.length;r>n;n++)t(e[n],n,e);else{var s=y.keys(e);for(n=0,r=s.length;r>n;n++)t(e[s[n]],s[n],e)}return e},y.map=y.collect=function(e,t,i){t=x(t,i);for(var n=!M(e)&&y.keys(e),r=(n||e).length,s=Array(r),o=0;r>o;o++){var a=n?n[o]:o;s[o]=t(e[a],a,e)}return s},y.reduce=y.foldl=y.inject=e(1),y.reduceRight=y.foldr=e(-1),y.find=y.detect=function(e,t,i){var n;return n=M(e)?y.findIndex(e,t,i):y.findKey(e,t,i),void 0!==n&&-1!==n?e[n]:void 0},y.filter=y.select=function(e,t,i){var n=[];return t=x(t,i),y.each(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n},y.reject=function(e,t,i){return y.filter(e,y.negate(x(t)),i)},y.every=y.all=function(e,t,i){t=x(t,i);for(var n=!M(e)&&y.keys(e),r=(n||e).length,s=0;r>s;s++){var o=n?n[s]:s;if(!t(e[o],o,e))return!1}return!0},y.some=y.any=function(e,t,i){t=x(t,i);for(var n=!M(e)&&y.keys(e),r=(n||e).length,s=0;r>s;s++){var o=n?n[s]:s;if(t(e[o],o,e))return!0}return!1},y.contains=y.includes=y.include=function(e,t,i,n){return M(e)||(e=y.values(e)),("number"!=typeof i||n)&&(i=0),y.indexOf(e,t,i)>=0},y.invoke=function(e,t){var i=u.call(arguments,2),n=y.isFunction(t);return y.map(e,function(e){var r=n?t:e[t];return null==r?r:r.apply(e,i)})},y.pluck=function(e,t){return y.map(e,y.property(t))},y.where=function(e,t){return y.filter(e,y.matcher(t))},y.findWhere=function(e,t){return y.find(e,y.matcher(t))},y.max=function(e,t,i){var n,r,s=-1/0,o=-1/0;if(null==t&&null!=e){e=M(e)?e:y.values(e);for(var a=0,l=e.length;l>a;a++)n=e[a],n>s&&(s=n)}else t=x(t,i),y.each(e,function(e,i,n){r=t(e,i,n),(r>o||r===-1/0&&s===-1/0)&&(s=e,o=r)});return s},y.min=function(e,t,i){var n,r,s=1/0,o=1/0;if(null==t&&null!=e){e=M(e)?e:y.values(e);for(var a=0,l=e.length;l>a;a++)n=e[a],s>n&&(s=n)}else t=x(t,i),y.each(e,function(e,i,n){r=t(e,i,n),(o>r||1/0===r&&1/0===s)&&(s=e,o=r)});return s},y.shuffle=function(e){for(var t,i=M(e)?e:y.values(e),n=i.length,r=Array(n),s=0;n>s;s++)t=y.random(0,s),t!==s&&(r[s]=r[t]),r[t]=i[s];return r},y.sample=function(e,t,i){return null==t||i?(M(e)||(e=y.values(e)),e[y.random(e.length-1)]):y.shuffle(e).slice(0,Math.max(0,t))},y.sortBy=function(e,t,i){return t=x(t,i),y.pluck(y.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,i,n){var r={};return i=x(i,n),y.each(t,function(n,s){var o=i(n,s,t);e(r,n,o)}),r}};y.groupBy=L(function(e,t,i){y.has(e,i)?e[i].push(t):e[i]=[t]}),y.indexBy=L(function(e,t,i){e[i]=t}),y.countBy=L(function(e,t,i){y.has(e,i)?e[i]++:e[i]=1}),y.toArray=function(e){return e?y.isArray(e)?u.call(e):M(e)?y.map(e,y.identity):y.values(e):[]},y.size=function(e){return null==e?0:M(e)?e.length:y.keys(e).length},y.partition=function(e,t,i){t=x(t,i);var n=[],r=[];return y.each(e,function(e,i,s){(t(e,i,s)?n:r).push(e)}),[n,r]},y.first=y.head=y.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:y.initial(e,e.length-t)},y.initial=function(e,t,i){return u.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},y.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:y.rest(e,Math.max(0,e.length-t))},y.rest=y.tail=y.drop=function(e,t,i){return u.call(e,null==t||i?1:t)},y.compact=function(e){return y.filter(e,y.identity)};var T=function(e,t,i,n){for(var r=[],s=0,o=n||0,a=E(e);a>o;o++){var l=e[o];if(M(l)&&(y.isArray(l)||y.isArguments(l))){t||(l=T(l,t,i));var c=0,u=l.length;for(r.length+=u;u>c;)r[s++]=l[c++]}else i||(r[s++]=l)}return r};y.flatten=function(e,t){return T(e,t,!1)},y.without=function(e){return y.difference(e,u.call(arguments,1))},y.uniq=y.unique=function(e,t,i,n){y.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=x(i,n));for(var r=[],s=[],o=0,a=E(e);a>o;o++){var l=e[o],c=i?i(l,o,e):l;t?(o&&s===c||r.push(l),s=c):i?y.contains(s,c)||(s.push(c),r.push(l)):y.contains(r,l)||r.push(l)}return r},y.union=function(){return y.uniq(T(arguments,!0,!0))},y.intersection=function(e){for(var t=[],i=arguments.length,n=0,r=E(e);r>n;n++){var s=e[n];if(!y.contains(t,s)){for(var o=1;i>o&&y.contains(arguments[o],s);o++);o===i&&t.push(s)}}return t},y.difference=function(e){var t=T(arguments,!0,!0,1);return y.filter(e,function(e){return!y.contains(t,e)})},y.zip=function(){return y.unzip(arguments)},y.unzip=function(e){for(var t=e&&y.max(e,E).length||0,i=Array(t),n=0;t>n;n++)i[n]=y.pluck(e,n);return i},y.object=function(e,t){for(var i={},n=0,r=E(e);r>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},y.findIndex=t(1),y.findLastIndex=t(-1),y.sortedIndex=function(e,t,i,n){i=x(i,n,1);for(var r=i(t),s=0,o=E(e);o>s;){var a=Math.floor((s+o)/2);i(e[a])<r?s=a+1:o=a}return s},y.indexOf=i(1,y.findIndex,y.sortedIndex),y.lastIndexOf=i(-1,y.findLastIndex),y.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),r=Array(n),s=0;n>s;s++,e+=i)r[s]=e;return r};var A=function(e,t,i,n,r){if(!(n instanceof t))return e.apply(i,r);var s=k(e.prototype),o=e.apply(s,r);return y.isObject(o)?o:s};y.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,u.call(arguments,1));if(!y.isFunction(e))throw new TypeError("Bind must be called on a function");var i=u.call(arguments,2),n=function(){return A(e,n,t,this,i.concat(u.call(arguments)))};return n},y.partial=function(e){var t=u.call(arguments,1),i=function(){for(var n=0,r=t.length,s=Array(r),o=0;r>o;o++)s[o]=t[o]===y?arguments[n++]:t[o];for(;n<arguments.length;)s.push(arguments[n++]);return A(e,i,this,this,s)};return i},y.bindAll=function(e){var t,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(t=1;n>t;t++)i=arguments[t],e[i]=y.bind(e[i],e);return e},y.memoize=function(e,t){var i=function(n){var r=i.cache,s=""+(t?t.apply(this,arguments):n);return y.has(r,s)||(r[s]=e.apply(this,arguments)),r[s]};return i.cache={},i},y.delay=function(e,t){var i=u.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},y.defer=y.partial(y.delay,y,1),y.throttle=function(e,t,i){var n,r,s,o=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:y.now(),o=null,s=e.apply(n,r),o||(n=r=null)};return function(){var c=y.now();a||i.leading!==!1||(a=c);var u=t-(c-a);return n=this,r=arguments,0>=u||u>t?(o&&(clearTimeout(o),o=null),a=c,s=e.apply(n,r),o||(n=r=null)):o||i.trailing===!1||(o=setTimeout(l,u)),s}},y.debounce=function(e,t,i){var n,r,s,o,a,l=function(){var c=y.now()-o;t>c&&c>=0?n=setTimeout(l,t-c):(n=null,i||(a=e.apply(s,r),n||(s=r=null)))};return function(){s=this,r=arguments,o=y.now();var c=i&&!n;return n||(n=setTimeout(l,t)),c&&(a=e.apply(s,r),s=r=null),a}},y.wrap=function(e,t){return y.partial(t,e)},y.negate=function(e){return function(){return!e.apply(this,arguments)}},y.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},y.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},y.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),1>=e&&(t=null),i}},y.once=y.partial(y.before,2);var P=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];y.keys=function(e){if(!y.isObject(e))return[];if(p)return p(e);var t=[];for(var i in e)y.has(e,i)&&t.push(i);return P&&n(e,t),t},y.allKeys=function(e){if(!y.isObject(e))return[];var t=[];for(var i in e)t.push(i);return P&&n(e,t),t},y.values=function(e){for(var t=y.keys(e),i=t.length,n=Array(i),r=0;i>r;r++)n[r]=e[t[r]];return n},y.mapObject=function(e,t,i){t=x(t,i);for(var n,r=y.keys(e),s=r.length,o={},a=0;s>a;a++)n=r[a],o[n]=t(e[n],n,e);return o},y.pairs=function(e){for(var t=y.keys(e),i=t.length,n=Array(i),r=0;i>r;r++)n[r]=[t[r],e[t[r]]];return n},y.invert=function(e){for(var t={},i=y.keys(e),n=0,r=i.length;r>n;n++)t[e[i[n]]]=i[n];return t},y.functions=y.methods=function(e){var t=[];for(var i in e)y.isFunction(e[i])&&t.push(i);return t.sort()},y.extend=w(y.allKeys),y.extendOwn=y.assign=w(y.keys),y.findKey=function(e,t,i){t=x(t,i);for(var n,r=y.keys(e),s=0,o=r.length;o>s;s++)if(n=r[s],t(e[n],n,e))return n},y.pick=function(e,t,i){var n,r,s={},o=e;if(null==o)return s;y.isFunction(t)?(r=y.allKeys(o),n=b(t,i)):(r=T(arguments,!1,!1,1),n=function(e,t,i){return t in i},o=Object(o));for(var a=0,l=r.length;l>a;a++){var c=r[a],u=o[c];n(u,c,o)&&(s[c]=u)}return s},y.omit=function(e,t,i){if(y.isFunction(t))t=y.negate(t);else{var n=y.map(T(arguments,!1,!1,1),String);t=function(e,t){return!y.contains(n,t)}}return y.pick(e,t,i)},y.defaults=w(y.allKeys,!0),y.create=function(e,t){var i=k(e);return t&&y.extendOwn(i,t),i},y.clone=function(e){return y.isObject(e)?y.isArray(e)?e.slice():y.extend({},e):e},y.tap=function(e,t){return t(e),e},y.isMatch=function(e,t){var i=y.keys(t),n=i.length;if(null==e)return!n;for(var r=Object(e),s=0;n>s;s++){var o=i[s];if(t[o]!==r[o]||!(o in r))return!1}return!0};var O=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var r=h.call(e);if(r!==h.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var s="[object Array]"===r;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),s){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!O(e[l],t[l],i,n))return!1}else{var c,u=y.keys(e);if(l=u.length,y.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!y.has(t,c)||!O(e[c],t[c],i,n))return!1}return i.pop(),n.pop(),!0};y.isEqual=function(e,t){return O(e,t)},y.isEmpty=function(e){return null==e?!0:M(e)&&(y.isArray(e)||y.isString(e)||y.isArguments(e))?0===e.length:0===y.keys(e).length},y.isElement=function(e){return!(!e||1!==e.nodeType)},y.isArray=f||function(e){return"[object Array]"===h.call(e)},y.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},y.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){y["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),y.isArguments(arguments)||(y.isArguments=function(e){return y.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(y.isFunction=function(e){return"function"==typeof e||!1}),y.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},y.isNaN=function(e){return y.isNumber(e)&&e!==+e},y.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===h.call(e)},y.isNull=function(e){return null===e},y.isUndefined=function(e){return void 0===e},y.has=function(e,t){return null!=e&&d.call(e,t)},y.noConflict=function(){return r._=s,this},y.identity=function(e){return e},y.constant=function(e){return function(){return e}},y.noop=function(){},y.property=C,y.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},y.matcher=y.matches=function(e){return e=y.extendOwn({},e),function(t){return y.isMatch(t,e)}},y.times=function(e,t,i){var n=Array(Math.max(0,e));t=b(t,i,1);for(var r=0;e>r;r++)n[r]=t(r);return n},y.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},y.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=y.invert(_),j=function(e){var t=function(t){return e[t]},i="(?:"+y.keys(e).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(r,t):e;
}};y.escape=j(_),y.unescape=j(I),y.result=function(e,t,i){var n=null==e?void 0:e[t];return void 0===n&&(n=i),y.isFunction(n)?n.call(e):n};var z=0;y.uniqueId=function(e){var t=++z+"";return e?e+t:t},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,R=function(e){return"\\"+B[e]};y.template=function(e,t,i){!t&&i&&(t=i),t=y.defaults({},t,y.templateSettings);var n=RegExp([(t.escape||H).source,(t.interpolate||H).source,(t.evaluate||H).source].join("|")+"|$","g"),r=0,s="__p+='";e.replace(n,function(t,i,n,o,a){return s+=e.slice(r,a).replace(D,R),r=a+t.length,i?s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(t.variable||"obj","_",s)}catch(a){throw a.source=s,a}var l=function(e){return o.call(this,e,y)},c=t.variable||"obj";return l.source="function("+c+"){\n"+s+"}",l},y.chain=function(e){var t=y(e);return t._chain=!0,t};var W=function(e,t){return e._chain?y(t).chain():t};y.mixin=function(e){y.each(y.functions(e),function(t){var i=y[t]=e[t];y.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),W(this,i.apply(y,e))}})},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];y.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],W(this,i)}}),y.each(["concat","join","slice"],function(e){var t=o[e];y.prototype[e]=function(){return W(this,t.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return y})}.call(this),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(){var e=v();return e.compile=function(t,i){return u.compile(t,i,e)},e.precompile=function(t,i){return u.precompile(t,i,e)},e.AST=l["default"],e.Compiler=u.Compiler,e.JavaScriptCompiler=d["default"],e.Parser=c.parser,e.parse=c.parse,e}var r=i(8)["default"];t.__esModule=!0;var s=i(1),o=r(s),a=i(2),l=r(a),c=i(3),u=i(4),h=i(5),d=r(h),f=i(6),p=r(f),g=i(7),m=r(g),v=o["default"].create,y=n();y.create=n,m["default"](y),y.Visitor=p["default"],y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t,i){"use strict";function n(){var e=new o.HandlebarsEnvironment;return d.extend(e,o),e.SafeString=l["default"],e.Exception=u["default"],e.Utils=d,e.escapeExpression=d.escapeExpression,e.VM=p,e.template=function(t){return p.template(t,e)},e}var r=i(8)["default"];t.__esModule=!0;var s=i(9),o=r(s),a=i(10),l=r(a),c=i(11),u=r(c),h=i(12),d=r(h),f=i(13),p=r(f),g=i(7),m=r(g),v=n();v.create=n,m["default"](v),v["default"]=v,t["default"]=v,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0;var i={Program:function(e,t,i,n){this.loc=n,this.type="Program",this.body=e,this.blockParams=t,this.strip=i},MustacheStatement:function(e,t,i,n,r,s){this.loc=s,this.type="MustacheStatement",this.path=e,this.params=t||[],this.hash=i,this.escaped=n,this.strip=r},BlockStatement:function(e,t,i,n,r,s,o,a,l){this.loc=l,this.type="BlockStatement",this.path=e,this.params=t||[],this.hash=i,this.program=n,this.inverse=r,this.openStrip=s,this.inverseStrip=o,this.closeStrip=a},PartialStatement:function(e,t,i,n,r){this.loc=r,this.type="PartialStatement",this.name=e,this.params=t||[],this.hash=i,this.indent="",this.strip=n},ContentStatement:function(e,t){this.loc=t,this.type="ContentStatement",this.original=this.value=e},CommentStatement:function(e,t,i){this.loc=i,this.type="CommentStatement",this.value=e,this.strip=t},SubExpression:function(e,t,i,n){this.loc=n,this.type="SubExpression",this.path=e,this.params=t||[],this.hash=i},PathExpression:function(e,t,i,n,r){this.loc=r,this.type="PathExpression",this.data=e,this.original=n,this.parts=i,this.depth=t},StringLiteral:function(e,t){this.loc=t,this.type="StringLiteral",this.original=this.value=e},NumberLiteral:function(e,t){this.loc=t,this.type="NumberLiteral",this.original=this.value=Number(e)},BooleanLiteral:function(e,t){this.loc=t,this.type="BooleanLiteral",this.original=this.value="true"===e},UndefinedLiteral:function(e){this.loc=e,this.type="UndefinedLiteral",this.original=this.value=void 0},NullLiteral:function(e){this.loc=e,this.type="NullLiteral",this.original=this.value=null},Hash:function(e,t){this.loc=t,this.type="Hash",this.pairs=e},HashPair:function(e,t,i){this.loc=i,this.type="HashPair",this.key=e,this.value=t},helpers:{helperExpression:function(e){return!("SubExpression"!==e.type&&!e.params.length&&!e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!i.helpers.scopedId(e)&&!e.depth}}};t["default"]=i,e.exports=t["default"]},function(e,t,i){"use strict";function n(e,t){if("Program"===e.type)return e;o["default"].yy=p,p.locInfo=function(e){return new p.SourceLocation(t&&t.srcName,e)};var i=new u["default"];return i.accept(o["default"].parse(e))}var r=i(8)["default"];t.__esModule=!0,t.parse=n;var s=i(14),o=r(s),a=i(2),l=r(a),c=i(15),u=r(c),h=i(16),d=r(h),f=i(12);t.parser=o["default"];var p={};f.extend(p,d,l["default"])},function(e,t,i){"use strict";function n(){}function r(e,t,i){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var n=i.parse(e,t),r=(new i.Compiler).compile(n,t);return(new i.JavaScriptCompiler).compile(r,t)}function s(e,t,i){function n(){var t=i.parse(e,s),n=(new i.Compiler).compile(t,s),r=(new i.JavaScriptCompiler).compile(n,s,void 0,!0);return i.template(r)}function r(e,t){return o||(o=n()),o.call(this,e,t)}var s=void 0===arguments[1]?{}:arguments[1];if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new u["default"]("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in s||(s.data=!0),s.compat&&(s.useDepths=!0);var o=void 0;return r._setup=function(e){return o||(o=n()),o._setup(e)},r._child=function(e,t,i,r){return o||(o=n()),o._child(e,t,i,r)},r}function o(e,t){if(e===t)return!0;if(h.isArray(e)&&h.isArray(t)&&e.length===t.length){for(var i=0;i<e.length;i++)if(!o(e[i],t[i]))return!1;return!0}}function a(e){if(!e.path.parts){var t=e.path;e.path=new f["default"].PathExpression(!1,0,[t.original+""],t.original+"",t.loc)}}var l=i(8)["default"];t.__esModule=!0,t.Compiler=n,t.precompile=r,t.compile=s;var c=i(11),u=l(c),h=i(12),d=i(2),f=l(d),p=[].slice;n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;t>i;i++){var n=this.opcodes[i],r=e.opcodes[i];if(n.opcode!==r.opcode||!o(n.args,r.args))return!1}t=this.children.length;for(var i=0;t>i;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var i=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},i)for(var n in i)n in i&&(t.knownHelpers[n]=i[n]);return this.accept(e)},compileProgram:function(e){var t=new this.compiler,i=t.compile(e,this.options),n=this.guid++;return this.usePartial=this.usePartial||i.usePartial,this.children[n]=i,this.useDepths=this.useDepths||i.useDepths,n},accept:function(e){this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,i=t.length,n=0;i>n;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===i,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){a(e);var t=e.program,i=e.inverse;t=t&&this.compileProgram(t),i=i&&this.compileProgram(i);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,i):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,i),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(e){this.usePartial=!0;var t=e.params;if(t.length>1)throw new u["default"]("Unsupported number of partial arguments: "+t.length,e);t.length||t.push({type:"PathExpression",parts:[],depth:0});var i=e.name.original,n="SubExpression"===e.name.type;n&&this.accept(e.name),this.setupFullMustacheParams(e,void 0,void 0,!0);var r=e.indent||"";this.options.preventIndent&&r&&(this.opcode("appendContent",r),r=""),this.opcode("invokePartial",n,i,r),this.opcode("append")},MustacheStatement:function(e){this.SubExpression(e),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){a(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,i){var n=e.path,r=n.parts[0],s=null!=t||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.accept(n),this.opcode("invokeAmbiguous",r,s)},simpleSexpr:function(e){this.accept(e.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,i){var n=this.setupFullMustacheParams(e,t,i),r=e.path,s=r.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new u["default"]("You specified knownHelpersOnly, but used the unknown helper "+s,e);r.falsy=!0,this.accept(r),this.opcode("invokeHelper",n.length,r.original,f["default"].helpers.simpleId(r))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],i=f["default"].helpers.scopedId(e),n=!e.depth&&!i&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts)):this.opcode("lookupOnContext",e.parts,e.falsy,i):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,i=0,n=t.length;for(this.opcode("pushHash");n>i;i++)this.pushParam(t[i].value);for(;i--;)this.opcode("assignToHash",t[i].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:p.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=f["default"].helpers.simpleId(e.path),i=t&&!!this.blockParamIndex(e.path.parts[0]),n=!i&&f["default"].helpers.helperExpression(e),r=!i&&(n||t);if(r&&!n){var s=e.path.parts[0],o=this.options;o.knownHelpers[s]?n=!0:o.knownHelpersOnly&&(r=!1)}return n?"helper":r?"ambiguous":"simple"},pushParams:function(e){for(var t=0,i=e.length;i>t;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var i=void 0;if(!e.parts||f["default"].helpers.scopedId(e)||e.depth||(i=this.blockParamIndex(e.parts[0])),i){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,n)}else t=e.original||t,t.replace&&(t=t.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,i,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),r},blockParamIndex:function(e){for(var t=0,i=this.options.blockParams.length;i>t;t++){var n=this.options.blockParams[t],r=n&&h.indexOf(n,e);if(n&&r>=0)return[t,r]}}}},function(e,t,i){"use strict";function n(e){this.value=e}function r(){}function s(e,t,i,n){var r=t.popStack(),s=0,o=i.length;for(e&&o--;o>s;s++)r=t.nameLookup(r,i[s],n);return e?[t.aliasable("this.strict"),"(",r,", ",t.quotedString(i[s]),")"]:r}var o=i(8)["default"];t.__esModule=!0;var a=i(9),l=i(11),c=o(l),u=i(12),h=i(17),d=o(h);r.prototype={nameLookup:function(e,t){return r.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"['",t,"']"]},depthedLookup:function(e){return[this.aliasable("this.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=a.COMPILER_REVISION,t=a.REVISION_CHANGES[e];return[e,t]},appendToBuffer:function(e,t,i){return u.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:i?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,i,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var r=e.opcodes,s=void 0,o=void 0,a=void 0,l=void 0;for(a=0,l=r.length;l>a;a++)s=r[a],this.source.currentLocation=s.loc,o=o||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=o,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c["default"]("Compile completed with content left on stack");var u=this.createFunctionContext(n);if(this.isChild)return u;var h={compiler:this.compilerInfo(),main:u},d=this.context.programs;for(a=0,l=d.length;l>a;a++)d[a]&&(h[a]=d[a]);return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),n?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),t.srcName?(h=h.toStringWithSourceMap({file:t.destName}),h.map=h.map&&h.map.toString()):h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new d["default"](this.options.srcName)},createFunctionContext:function(e){var t="",i=this.stackVars.concat(this.registers.list);i.length>0&&(t+=", "+i.join(", "));var n=0;for(var r in this.aliases){var s=this.aliases[r];this.aliases.hasOwnProperty(r)&&s.children&&s.referenceCount>1&&(t+=", alias"+ ++n+"="+r,s.children[0]="alias"+n)}var o=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var a=this.mergeSource(t);return e?(o.push(a),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",a,"}"])},mergeSource:function(e){var t=this.environment.isSimple,i=!this.forceBuffer,n=void 0,r=void 0,s=void 0,o=void 0;return this.source.each(function(e){e.appendToBuffer?(s?e.prepend("  + "):s=e,o=e):(s&&(r?s.prepend("buffer += "):n=!0,o.add(";"),s=o=void 0),r=!0,t||(i=!1))}),i?s?(s.prepend("return "),o.add(";")):r||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(e,0,i);var n=this.popStack();i.splice(1,0,n),this.push(this.source.functionCall(t,"call",i))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var i=this.topStack();t.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,i){var n=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[n++])),this.resolvePath("context",e,n,t)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t){this.pushStackLiteral(e?"this.data(data, "+e+")":"data"),this.resolvePath("data",t,0,!0)},resolvePath:function(e,t,i,n){var r=this;if(this.options.strict||this.options.assumeObjects)return void this.push(s(this.options.strict,this,t,e));for(var o=t.length;o>i;i++)this.replaceStack(function(s){var o=r.nameLookup(s,t[i],e);return n?[" && ",o]:[" != null ? ",o," : ",s]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,i){var n=this.popStack(),r=this.setupHelper(e,t),s=i?[r.name," || "]:"",o=["("].concat(s,n);this.options.strict||o.push(" || ",this.aliasable("helpers.helperMissing")),o.push(")"),this.push(this.source.functionCall(o,"call",r.callParams))},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var i=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=["(","(helper = ",r," || ",i,")"];this.options.strict||(s[0]="(helper = ",s.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",s,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,i){var n=[],r=this.setupParams(t,1,n,!1);e&&(t=this.popStack(),delete r.name),i&&(r.indent=JSON.stringify(i)),r.helpers="helpers",r.partials="partials",n.unshift(e?t:this.nameLookup("partials",t,"partial")),this.options.compat&&(r.depths="depths"),r=this.objectLiteral(r),n.push(r),this.push(this.source.functionCall("this.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),i=void 0,n=void 0,r=void 0;this.trackIds&&(r=this.popStack()),this.stringParams&&(n=this.popStack(),i=this.popStack());var s=this.hash;i&&(s.contexts[e]=i),n&&(s.types[e]=n),r&&(s.ids[e]=r),s.values[e]=t},pushId:function(e,t,i){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===e?this.pushString(t):this.pushStackLiteral("SubExpression"===e?"true":"null")},compiler:r,compileChildren:function(e,t){for(var i=e.children,n=void 0,r=void 0,s=0,o=i.length;o>s;s++){n=i[s],r=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=r.compile(n,t,this.context,!this.precompile),this.context.environments[a]=n,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams):(n.index=a,n.name="program"+a,this.useDepths=this.useDepths||n.useDepths,this.useBlockParams=this.useBlockParams||n.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;i>t;t++){var n=this.context.environments[t];if(n&&n.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],i=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"this.program("+i.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof n||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],i=void 0,r=void 0,s=void 0;if(!this.isInline())throw new c["default"]("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof n)i=[o.value],t=["(",i],s=!0;else{r=!0;var a=this.incrStack();t=["((",this.push(a)," = ",o,")"],i=this.topStack()}var l=e.call(this,i);s||this.popStack(),r&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,i=e.length;i>t;t++){var r=e[t];if(r instanceof n)this.compileStack.push(r);else{var s=this.incrStack();this.pushSource([s," = ",r,";"]),this.compileStack.push(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof n)return i.value;if(!t){if(!this.stackSlot)throw new c["default"]("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,i){var n=[],r=this.setupHelperArgs(t,e,n,i),s=this.nameLookup("helpers",t,"helper");return{params:n,paramsInit:r,name:s,callParams:[this.contextName(0)].concat(n)}},setupParams:function(e,t,i){var n={},r=[],s=[],o=[],a=void 0;n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(n.fn=c||"this.noop",n.inverse=l||"this.noop");for(var u=t;u--;)a=this.popStack(),i[u]=a,this.trackIds&&(o[u]=this.popStack()),this.stringParams&&(s[u]=this.popStack(),r[u]=this.popStack());return this.trackIds&&(n.ids=this.source.generateArray(o)),this.stringParams&&(n.types=this.source.generateArray(s),n.contexts=this.source.generateArray(r)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,i,n){var r=this.setupParams(e,t,i,!0);return r=this.objectLiteral(r),n?(this.useRegister("options"),i.push("options"),["options=",r]):(i.push(r),"")}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=r.RESERVED_WORDS={},i=0,n=e.length;n>i;i++)t[e[i]]=!0}(),r.isValidJavaScriptVariableName=function(e){return!r.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t["default"]=r,e.exports=t["default"]},function(e,t,i){"use strict";function n(){this.parents=[]}var r=i(8)["default"];t.__esModule=!0;var s=i(11),o=r(s),a=i(2),l=r(a);n.prototype={constructor:n,mutating:!1,acceptKey:function(e,t){var i=this.accept(e[t]);if(this.mutating){if(i&&(!i.type||!l["default"][i.type]))throw new o["default"]('Unexpected node type "'+i.type+'" found when accepting '+t+" on "+e.type);e[t]=i}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new o["default"](e.type+" requires "+t)},acceptArray:function(e){for(var t=0,i=e.length;i>t;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,i--)},accept:function(e){if(e){this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:t!==!1?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},BlockStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash"),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")},PartialStatement:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t["default"]=n,e.exports=t["default"]},function(e,t){(function(i){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof i?i:window,n=t.Handlebars;e.noConflict=function(){t.Handlebars===e&&(t.Handlebars=n)}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,i){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},r(this)}function r(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new u["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')}),e.registerHelper("blockHelperMissing",function(t,i){var n=i.inverse,r=i.fn;if(t===!0)return r(this);if(t===!1||null==t)return n(this);if(p(t))return t.length>0?(i.ids&&(i.ids=[i.name]),e.helpers.each(t,i)):n(this);if(i.data&&i.ids){var o=s(i.data);o.contextPath=l.appendContextPath(i.data.contextPath,i.name),i={data:o}}return r(t,i)}),e.registerHelper("each",function(e,t){function i(t,i,r){c&&(c.key=t,c.index=i,c.first=0===i,c.last=!!r,h&&(c.contextPath=h+t)),a+=n(e[t],{data:c,blockParams:l.blockParams([e[t],t],[h+t,null])})}if(!t)throw new u["default"]("Must pass iterator to #each");var n=t.fn,r=t.inverse,o=0,a="",c=void 0,h=void 0;if(t.data&&t.ids&&(h=l.appendContextPath(t.data.contextPath,t.ids[0])+"."),g(e)&&(e=e.call(this)),t.data&&(c=s(t.data)),e&&"object"==typeof e)if(p(e))for(var d=e.length;d>o;o++)i(o,o,o===e.length-1);else{var f=void 0;for(var m in e)e.hasOwnProperty(m)&&(f&&i(f,o-1),f=m,o++);f&&i(f,o-1,!0)}return 0===o&&(a=r(this)),a}),e.registerHelper("if",function(e,t){return g(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||l.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),e.registerHelper("with",function(e,t){g(e)&&(e=e.call(this));var i=t.fn;if(l.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var n=s(t.data);n.contextPath=l.appendContextPath(t.data.contextPath,t.ids[0]),t={data:n}}return i(e,t)}),e.registerHelper("log",function(t,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;e.log(n,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}function s(e){var t=l.extend({},e);return t._parent=e,t}var o=i(8)["default"];t.__esModule=!0,t.HandlebarsEnvironment=n,t.createFrame=s;var a=i(12),l=o(a),c=i(11),u=o(c),h="3.0.1";t.VERSION=h;var d=6;t.COMPILER_REVISION=d;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};t.REVISION_CHANGES=f;var p=l.isArray,g=l.isFunction,m=l.toString,v="[object Object]";n.prototype={constructor:n,logger:y,log:b,registerHelper:function(e,t){if(m.call(e)===v){if(t)throw new u["default"]("Arg not supported with multiple helpers");l.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(m.call(e)===v)l.extend(this.partials,e);else{if("undefined"==typeof t)throw new u["default"]("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var y={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&y.level<=e){var i=y.methodMap[e];(console[i]||console.log).call(console,t)}}};t.logger=y;var b=y.log;t.log=b},function(e,t){"use strict";function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";function i(e,t){var r=t&&t.loc,s=void 0,o=void 0;r&&(s=r.start.line,o=r.start.column,e+=" - "+s+":"+o);for(var a=Error.prototype.constructor.call(this,e),l=0;l<n.length;l++)this[n[l]]=a[n[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i),r&&(this.lineNumber=s,this.column=o)}t.__esModule=!0;var n=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";function i(e){return c[e]}function n(e){
for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}function r(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1}function s(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return h.test(e)?e.replace(u,i):e}function o(e){return e||0===e?p(e)&&0===e.length?!0:!1:!0}function a(e,t){return e.path=t,e}function l(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=n,t.indexOf=r,t.escapeExpression=s,t.isEmpty=o,t.blockParams=a,t.appendContextPath=l;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,h=/[&<>"'`]/,d=Object.prototype.toString;t.toString=d;var f=function(e){return"function"==typeof e};f(/x/)&&(t.isFunction=f=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var f;t.isFunction=f;var p=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};t.isArray=p},function(e,t,i){"use strict";function n(e){var t=e&&e[0]||1,i=g.COMPILER_REVISION;if(t!==i){if(i>t){var n=g.REVISION_CHANGES[i],r=g.REVISION_CHANGES[t];throw new p["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+r+").")}throw new p["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){function i(i,n,r){r.hash&&(n=d.extend({},n,r.hash)),i=t.VM.resolvePartial.call(this,i,n,r);var s=t.VM.invokePartial.call(this,i,n,r);if(null==s&&t.compile&&(r.partials[r.name]=t.compile(i,e.compilerOptions,t),s=r.partials[r.name](n,r)),null!=s){if(r.indent){for(var o=s.split("\n"),a=0,l=o.length;l>a&&(o[a]||a+1!==l);a++)o[a]=r.indent+o[a];s=o.join("\n")}return s}throw new p["default"]("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function n(t){var i=void 0===arguments[1]?{}:arguments[1],s=i.data;n._setup(i),!i.partial&&e.useData&&(s=c(t,s));var o=void 0,a=e.useBlockParams?[]:void 0;return e.useDepths&&(o=i.depths?[t].concat(i.depths):[t]),e.main.call(r,t,r.helpers,r.partials,s,a,o)}if(!t)throw new p["default"]("No environment passed to template");if(!e||!e.main)throw new p["default"]("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var r={strict:function(e,t){if(!(t in e))throw new p["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var i=e.length,n=0;i>n;n++)if(e[n]&&null!=e[n][t])return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:d.escapeExpression,invokePartial:i,fn:function(t){return e[t]},programs:[],program:function(e,t,i,n,r){var o=this.programs[e],a=this.fn(e);return t||r||n||i?o=s(this,e,a,t,i,n,r):o||(o=this.programs[e]=s(this,e,a)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i=d.extend({},t,e)),i},noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(i){i.partial?(r.helpers=i.helpers,r.partials=i.partials):(r.helpers=r.merge(i.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(i.partials,t.partials)))},n._child=function(t,i,n,o){if(e.useBlockParams&&!n)throw new p["default"]("must pass block params");if(e.useDepths&&!o)throw new p["default"]("must pass parent depths");return s(r,t,e[t],i,0,n,o)},n}function s(e,t,i,n,r,s,o){function a(t){var r=void 0===arguments[1]?{}:arguments[1];return i.call(e,t,e.helpers,e.partials,r.data||n,s&&[r.blockParams].concat(s),o&&[t].concat(o))}return a.program=t,a.depth=o?o.length:0,a.blockParams=r||0,a}function o(e,t,i){return e?e.call||i.name||(i.name=e,e=i.partials[e]):e=i.partials[i.name],e}function a(e,t,i){if(i.partial=!0,void 0===e)throw new p["default"]("The partial "+i.name+" could not be found");return e instanceof Function?e(t,i):void 0}function l(){return""}function c(e,t){return t&&"root"in t||(t=t?g.createFrame(t):{},t.root=e),t}var u=i(8)["default"];t.__esModule=!0,t.checkRevision=n,t.template=r,t.wrapProgram=s,t.resolvePartial=o,t.invokePartial=a,t.noop=l;var h=i(12),d=u(h),f=i(11),p=u(f),g=i(9)},function(e,t){"use strict";t.__esModule=!0;var i=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,UNDEFINED:77,NULL:78,DATA:79,pathSegments:80,SEP:81,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"UNDEFINED",78:"NULL",79:"DATA",81:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[80,3],[80,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(e,t,i,n,r,s){var o=s.length-1;switch(r){case 1:return s[o-1];case 2:this.$=new n.Program(s[o],null,{},n.locInfo(this._$));break;case 3:this.$=s[o];break;case 4:this.$=s[o];break;case 5:this.$=s[o];break;case 6:this.$=s[o];break;case 7:this.$=s[o];break;case 8:this.$=new n.CommentStatement(n.stripComment(s[o]),n.stripFlags(s[o],s[o]),n.locInfo(this._$));break;case 9:this.$=new n.ContentStatement(s[o],n.locInfo(this._$));break;case 10:this.$=n.prepareRawBlock(s[o-2],s[o-1],s[o],this._$);break;case 11:this.$={path:s[o-3],params:s[o-2],hash:s[o-1]};break;case 12:this.$=n.prepareBlock(s[o-3],s[o-2],s[o-1],s[o],!1,this._$);break;case 13:this.$=n.prepareBlock(s[o-3],s[o-2],s[o-1],s[o],!0,this._$);break;case 14:this.$={path:s[o-4],params:s[o-3],hash:s[o-2],blockParams:s[o-1],strip:n.stripFlags(s[o-5],s[o])};break;case 15:this.$={path:s[o-4],params:s[o-3],hash:s[o-2],blockParams:s[o-1],strip:n.stripFlags(s[o-5],s[o])};break;case 16:this.$={path:s[o-4],params:s[o-3],hash:s[o-2],blockParams:s[o-1],strip:n.stripFlags(s[o-5],s[o])};break;case 17:this.$={strip:n.stripFlags(s[o-1],s[o-1]),program:s[o]};break;case 18:var a=n.prepareBlock(s[o-2],s[o-1],s[o],s[o],!1,this._$),l=new n.Program([a],null,{},n.locInfo(this._$));l.chained=!0,this.$={strip:s[o-2].strip,program:l,chain:!0};break;case 19:this.$=s[o];break;case 20:this.$={path:s[o-1],strip:n.stripFlags(s[o-2],s[o])};break;case 21:this.$=n.prepareMustache(s[o-3],s[o-2],s[o-1],s[o-4],n.stripFlags(s[o-4],s[o]),this._$);break;case 22:this.$=n.prepareMustache(s[o-3],s[o-2],s[o-1],s[o-4],n.stripFlags(s[o-4],s[o]),this._$);break;case 23:this.$=new n.PartialStatement(s[o-3],s[o-2],s[o-1],n.stripFlags(s[o-4],s[o]),n.locInfo(this._$));break;case 24:this.$=s[o];break;case 25:this.$=s[o];break;case 26:this.$=new n.SubExpression(s[o-3],s[o-2],s[o-1],n.locInfo(this._$));break;case 27:this.$=new n.Hash(s[o],n.locInfo(this._$));break;case 28:this.$=new n.HashPair(n.id(s[o-2]),s[o],n.locInfo(this._$));break;case 29:this.$=n.id(s[o-1]);break;case 30:this.$=s[o];break;case 31:this.$=s[o];break;case 32:this.$=new n.StringLiteral(s[o],n.locInfo(this._$));break;case 33:this.$=new n.NumberLiteral(s[o],n.locInfo(this._$));break;case 34:this.$=new n.BooleanLiteral(s[o],n.locInfo(this._$));break;case 35:this.$=new n.UndefinedLiteral(n.locInfo(this._$));break;case 36:this.$=new n.NullLiteral(n.locInfo(this._$));break;case 37:this.$=s[o];break;case 38:this.$=s[o];break;case 39:this.$=n.preparePath(!0,s[o],this._$);break;case 40:this.$=n.preparePath(!1,s[o],this._$);break;case 41:s[o-2].push({part:n.id(s[o]),original:s[o],separator:s[o-1]}),this.$=s[o-2];break;case 42:this.$=[{part:n.id(s[o]),original:s[o]}];break;case 43:this.$=[];break;case 44:s[o-1].push(s[o]);break;case 45:this.$=[];break;case 46:s[o-1].push(s[o]);break;case 53:this.$=[];break;case 54:s[o-1].push(s[o]);break;case 59:this.$=[];break;case 60:s[o-1].push(s[o]);break;case 65:this.$=[];break;case 66:s[o-1].push(s[o]);break;case 73:this.$=[];break;case 74:s[o-1].push(s[o]);break;case 77:this.$=[];break;case 78:s[o-1].push(s[o]);break;case 81:this.$=[];break;case 82:s[o-1].push(s[o]);break;case 85:this.$=[];break;case 86:s[o-1].push(s[o]);break;case 89:this.$=[s[o]];break;case 90:s[o-1].push(s[o]);break;case 91:this.$=[s[o]];break;case 92:s[o-1].push(s[o])}},table:[{3:1,4:2,5:[2,43],6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],46:[2,43],49:[2,43],53:[2,43]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,44],13:[2,44],14:[2,44],17:[2,44],27:[2,44],32:[2,44],37:[2,44],42:[2,44],45:[2,44],46:[2,44],49:[2,44],53:[2,44]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:33,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:34,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{4:35,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{12:36,14:[1,18]},{18:38,54:37,58:39,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:41,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:42,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:43,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[2,73],47:44,59:[2,73],66:[2,73],74:[2,73],75:[2,73],76:[2,73],77:[2,73],78:[2,73],79:[2,73]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30],78:[2,30],79:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31],78:[2,31],79:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32],78:[2,32],79:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33],78:[2,33],79:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34],78:[2,34],79:[2,34]},{21:[2,35],31:[2,35],52:[2,35],59:[2,35],62:[2,35],66:[2,35],69:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35],78:[2,35],79:[2,35]},{21:[2,36],31:[2,36],52:[2,36],59:[2,36],62:[2,36],66:[2,36],69:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36],78:[2,36],79:[2,36]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],78:[2,40],79:[2,40],81:[1,45]},{66:[1,32],80:46},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{50:47,52:[2,77],59:[2,77],66:[2,77],74:[2,77],75:[2,77],76:[2,77],77:[2,77],78:[2,77],79:[2,77]},{23:48,36:50,37:[1,52],41:51,42:[1,53],43:49,45:[2,49]},{26:54,41:55,42:[1,53],45:[2,51]},{16:[1,56]},{31:[2,81],55:57,59:[2,81],66:[2,81],74:[2,81],75:[2,81],76:[2,81],77:[2,81],78:[2,81],79:[2,81]},{31:[2,37],59:[2,37],66:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],78:[2,37],79:[2,37]},{31:[2,38],59:[2,38],66:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],78:[2,38],79:[2,38]},{18:58,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{28:59,31:[2,53],59:[2,53],66:[2,53],69:[2,53],74:[2,53],75:[2,53],76:[2,53],77:[2,53],78:[2,53],79:[2,53]},{31:[2,59],33:60,59:[2,59],66:[2,59],69:[2,59],74:[2,59],75:[2,59],76:[2,59],77:[2,59],78:[2,59],79:[2,59]},{19:61,21:[2,45],59:[2,45],66:[2,45],74:[2,45],75:[2,45],76:[2,45],77:[2,45],78:[2,45],79:[2,45]},{18:65,31:[2,75],48:62,57:63,58:66,59:[1,40],63:64,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{66:[1,70]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],78:[2,39],79:[2,39],81:[1,45]},{18:65,51:71,52:[2,79],57:72,58:66,59:[1,40],63:73,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{24:74,45:[1,75]},{45:[2,50]},{4:76,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],37:[2,43],42:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{45:[2,19]},{18:77,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{4:78,6:3,13:[2,43],14:[2,43],17:[2,43],27:[2,43],32:[2,43],45:[2,43],46:[2,43],49:[2,43],53:[2,43]},{24:79,45:[1,75]},{45:[2,52]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:65,31:[2,83],56:80,57:81,58:66,59:[1,40],63:82,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{59:[2,85],60:83,62:[2,85],66:[2,85],74:[2,85],75:[2,85],76:[2,85],77:[2,85],78:[2,85],79:[2,85]},{18:65,29:84,31:[2,55],57:85,58:66,59:[1,40],63:86,64:67,65:68,66:[1,69],69:[2,55],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,31:[2,61],34:87,57:88,58:66,59:[1,40],63:89,64:67,65:68,66:[1,69],69:[2,61],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{18:65,20:90,21:[2,47],57:91,58:66,59:[1,40],63:92,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{31:[1,93]},{31:[2,74],59:[2,74],66:[2,74],74:[2,74],75:[2,74],76:[2,74],77:[2,74],78:[2,74],79:[2,74]},{31:[2,76]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24],78:[2,24],79:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25],78:[2,25],79:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:94,66:[1,95],69:[2,27]},{21:[2,89],31:[2,89],52:[2,89],62:[2,89],66:[2,89],69:[2,89]},{21:[2,42],31:[2,42],52:[2,42],59:[2,42],62:[2,42],66:[2,42],67:[1,96],69:[2,42],74:[2,42],75:[2,42],76:[2,42],77:[2,42],78:[2,42],79:[2,42],81:[2,42]},{21:[2,41],31:[2,41],52:[2,41],59:[2,41],62:[2,41],66:[2,41],69:[2,41],74:[2,41],75:[2,41],76:[2,41],77:[2,41],78:[2,41],79:[2,41],81:[2,41]},{52:[1,97]},{52:[2,78],59:[2,78],66:[2,78],74:[2,78],75:[2,78],76:[2,78],77:[2,78],78:[2,78],79:[2,78]},{52:[2,80]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:98,66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{36:50,37:[1,52],41:51,42:[1,53],43:100,44:99,45:[2,71]},{31:[2,65],38:101,59:[2,65],66:[2,65],69:[2,65],74:[2,65],75:[2,65],76:[2,65],77:[2,65],78:[2,65],79:[2,65]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,102]},{31:[2,82],59:[2,82],66:[2,82],74:[2,82],75:[2,82],76:[2,82],77:[2,82],78:[2,82],79:[2,82]},{31:[2,84]},{18:65,57:104,58:66,59:[1,40],61:103,62:[2,87],63:105,64:67,65:68,66:[1,69],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{30:106,31:[2,57],68:107,69:[1,108]},{31:[2,54],59:[2,54],66:[2,54],69:[2,54],74:[2,54],75:[2,54],76:[2,54],77:[2,54],78:[2,54],79:[2,54]},{31:[2,56],69:[2,56]},{31:[2,63],35:109,68:110,69:[1,108]},{31:[2,60],59:[2,60],66:[2,60],69:[2,60],74:[2,60],75:[2,60],76:[2,60],77:[2,60],78:[2,60],79:[2,60]},{31:[2,62],69:[2,62]},{21:[1,111]},{21:[2,46],59:[2,46],66:[2,46],74:[2,46],75:[2,46],76:[2,46],77:[2,46],78:[2,46],79:[2,46]},{21:[2,48]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,90],31:[2,90],52:[2,90],62:[2,90],66:[2,90],69:[2,90]},{67:[1,96]},{18:65,57:112,58:66,59:[1,40],66:[1,32],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,113]},{45:[2,18]},{45:[2,72]},{18:65,31:[2,67],39:114,57:115,58:66,59:[1,40],63:116,64:67,65:68,66:[1,69],69:[2,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,28],78:[1,29],79:[1,31],80:30},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,117]},{59:[2,86],62:[2,86],66:[2,86],74:[2,86],75:[2,86],76:[2,86],77:[2,86],78:[2,86],79:[2,86]},{62:[2,88]},{31:[1,118]},{31:[2,58]},{66:[1,120],70:119},{31:[1,121]},{31:[2,64]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,69],40:122,68:123,69:[1,108]},{31:[2,66],59:[2,66],66:[2,66],69:[2,66],74:[2,66],75:[2,66],76:[2,66],77:[2,66],78:[2,66],79:[2,66]},{31:[2,68],69:[2,68]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26],78:[2,26],79:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,125],71:[1,124]},{66:[2,91],71:[2,91]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,126]},{31:[2,70]},{31:[2,29]},{66:[2,92],71:[2,92]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],49:[2,50],51:[2,19],55:[2,52],64:[2,76],73:[2,80],78:[2,17],82:[2,84],92:[2,48],99:[2,18],100:[2,72],105:[2,88],107:[2,58],110:[2,64],111:[2,11],123:[2,70],124:[2,29]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,n=[0],r=[null],s=[],o=this.table,a="",l=0,c=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;s.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,p,g,m,v,y,b,x,w,k={};;){if(g=n[n.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===f||"undefined"==typeof f)&&(f=t()),m=o[g]&&o[g][f]),"undefined"==typeof m||!m.length||!m[0]){var C="";if(!u){w=[];for(y in o[g])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");C=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:h,expected:w})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+f);switch(m[0]){case 1:n.push(f),r.push(this.lexer.yytext),s.push(this.lexer.yylloc),n.push(m[1]),f=null,p?(f=p,p=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[m[1]][1],k.$=r[r.length-b],k._$={first_line:s[s.length-(b||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(b||1)].first_column,last_column:s[s.length-1].last_column},d&&(k._$.range=[s[s.length-(b||1)].range[0],s[s.length-1].range[1]]),v=this.performAction.call(k,a,c,l,this.yy,m[1],r,s),"undefined"!=typeof v)return v;b&&(n=n.slice(0,-1*b*2),r=r.slice(0,-1*b),s=s.slice(0,-1*b)),n.push(this.productions_[m[1]][0]),r.push(k.$),s.push(k._$),x=o[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,i,n,r;this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),o=0;o<s.length&&(i=this._input.match(this.rules[s[o]]),!i||t&&!(i[0].length>t[0].length)||(t=i,n=o,this.options.flex));o++);return t?(r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,i,n){function r(e,i){return t.yytext=t.yytext.substr(e,t.yyleng-i)}switch(i){case 0:if("\\\\"===t.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:return this.popState(),42;case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(t.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:return 66;case 24:return 66;case 25:return 81;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return t.yytext=r(1,2).replace(/\\"/g,'"'),74;case 30:return t.yytext=r(1,2).replace(/\\'/g,"'"),74;case 31:return 79;case 32:return 76;case 33:return 76;case 34:return 77;case 35:return 78;case 36:return 75;case 37:return 69;case 38:return 71;case 39:return 66;case 40:return 66;case 41:return"INVALID";case 42:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,42],inclusive:!0}},e}();return t.lexer=i,e.prototype=t,t.Parser=e,new e}();t["default"]=i,e.exports=t["default"]},function(e,t,i){"use strict";function n(){}function r(e,t,i){void 0===t&&(t=e.length);var n=e[t-1],r=e[t-2];return n?"ContentStatement"===n.type?(r||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:i}function s(e,t,i){void 0===t&&(t=-1);var n=e[t+1],r=e[t+2];return n?"ContentStatement"===n.type?(r||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:i}function o(e,t,i){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(i||!n.rightStripped)){var r=n.value;n.value=n.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==r}}function a(e,t,i){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(i||!n.leftStripped)){var r=n.value;return n.value=n.value.replace(i?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==r,n.leftStripped}}var l=i(8)["default"];t.__esModule=!0;var c=i(6),u=l(c);n.prototype=new u["default"],n.prototype.Program=function(e){var t=!this.isRootSeen;this.isRootSeen=!0;for(var i=e.body,n=0,l=i.length;l>n;n++){var c=i[n],u=this.accept(c);if(u){var h=r(i,n,t),d=s(i,n,t),f=u.openStandalone&&h,p=u.closeStandalone&&d,g=u.inlineStandalone&&h&&d;u.close&&o(i,n,!0),u.open&&a(i,n,!0),g&&(o(i,n),a(i,n)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(i[n-1].original)[1])),f&&(o((c.program||c.inverse).body),a(i,n)),p&&(o(i,n),a((c.inverse||c.program).body))}}return e},n.prototype.BlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,i=e.program&&e.inverse,n=i,l=i;if(i&&i.chained)for(n=i.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:s(t.body),closeStandalone:r((n||t).body)};if(e.openStrip.close&&o(t.body,null,!0),i){var u=e.inverseStrip;u.open&&a(t.body,null,!0),u.close&&o(n.body,null,!0),e.closeStrip.open&&a(l.body,null,!0),r(t.body)&&s(n.body)&&(a(t.body),o(n.body))}else e.closeStrip.open&&a(t.body,null,!0);return c},n.prototype.MustacheStatement=function(e){return e.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t["default"]=n,e.exports=t["default"]},function(e,t,i){"use strict";function n(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function r(e){return/^\[.*\]$/.test(e)?e.substr(1,e.length-2):e}function s(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function o(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function a(e,t,i){i=this.locInfo(i);for(var n=e?"@":"",r=[],s=0,o="",a=0,l=t.length;l>a;a++){var c=t[a].part,u=t[a].original!==c;if(n+=(t[a].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)r.push(c);else{if(r.length>0)throw new f["default"]("Invalid path: "+n,{loc:i});".."===c&&(s++,o+="../")}}return new this.PathExpression(e,s,r,n,i)}function l(e,t,i,n,r,s){var o=n.charAt(3)||n.charAt(2),a="{"!==o&&"&"!==o;return new this.MustacheStatement(e,t,i,a,r,this.locInfo(s))}function c(e,t,i,n){if(e.path.original!==i){var r={loc:e.path.loc};throw new f["default"](e.path.original+" doesn't match "+i,r)}n=this.locInfo(n);var s=new this.Program([t],null,{},n);return new this.BlockStatement(e.path,e.params,e.hash,s,void 0,{},{},{},n)}function u(e,t,i,n,r,s){if(n&&n.path&&e.path.original!==n.path.original){var o={loc:e.path.loc
};throw new f["default"](e.path.original+" doesn't match "+n.path.original,o)}t.blockParams=e.blockParams;var a=void 0,l=void 0;return i&&(i.chain&&(i.program.body[0].closeStrip=n.strip),l=i.strip,a=i.program),r&&(r=a,a=t,t=r),new this.BlockStatement(e.path,e.params,e.hash,t,a,e.strip,l,n&&n.strip,this.locInfo(s))}var h=i(8)["default"];t.__esModule=!0,t.SourceLocation=n,t.id=r,t.stripFlags=s,t.stripComment=o,t.preparePath=a,t.prepareMustache=l,t.prepareRawBlock=c,t.prepareBlock=u;var d=i(11),f=h(d)},function(e,t,i){"use strict";function n(e,t,i){if(s.isArray(e)){for(var n=[],r=0,o=e.length;o>r;r++)n.push(t.wrap(e[r],i));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function r(e){this.srcFile=e,this.source=[]}t.__esModule=!0;var s=i(12),o=void 0;try{}catch(a){}o||(o=function(e,t,i,n){this.src="",n&&this.add(n)},o.prototype={add:function(e){s.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){s.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),r.prototype={prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,i=this.source.length;i>t;t++)e(this.source[t])},empty:function(){var e=void 0===arguments[0]?this.currentLocation||{start:{}}:arguments[0];return new o(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof o?e:(e=n(e,this,t),new o(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,i){return i=this.generateList(i),this.wrap([e,t?"."+t+"(":"(",i,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=[];for(var i in e)if(e.hasOwnProperty(i)){var r=n(e[i],this);"undefined"!==r&&t.push([this.quotedString(i),":",r])}var s=this.generateList(t);return s.prepend("{"),s.add("}"),s},generateList:function(e,t){for(var i=this.empty(t),r=0,s=e.length;s>r;r++)r&&i.add(","),i.add(n(e[r],this,t));return i},generateArray:function(e,t){var i=this.generateList(e,t);return i.prepend("["),i.add("]"),i}},t["default"]=r,e.exports=t["default"]}])}),function(e){"use strict";var t={},i=function(e){var n,r,s,o,a;i.classes.dispatcher.extend(this);var l=this,c=e||{};if("string"==typeof c||c instanceof HTMLElement?c={renderers:[c]}:"[object Array]"===Object.prototype.toString.call(c)&&(c={renderers:c}),o=c.renderers||c.renderer||c.container,c.renderers&&0!==c.renderers.length||("string"==typeof o||o instanceof HTMLElement||"object"==typeof o&&"container"in o)&&(c.renderers=[o]),c.id){if(t[c.id])throw'sigma: Instance "'+c.id+'" already exists.';Object.defineProperty(this,"id",{value:c.id})}else{for(a=0;t[a];)a++;Object.defineProperty(this,"id",{value:""+a})}for(t[this.id]=this,this.settings=new i.classes.configurable(i.settings,c.settings||{}),Object.defineProperty(this,"graph",{value:new i.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,i={};for(t in e.data)i[t]=e.data[t];i.renderer=e.target,this.dispatchEvent(e.type,i)}.bind(this),s=c.renderers||[],n=0,r=s.length;r>n;n++)this.addRenderer(s[n]);for(s=c.middlewares||[],n=0,r=s.length;r>n;n++)this.middlewares.push("string"==typeof s[n]?i.middlewares[s[n]]:s[n]);"object"==typeof c.graph&&c.graph&&(this.graph.read(c.graph),this.refresh()),window.addEventListener("resize",function(){l.settings&&l.refresh()})};if(i.prototype.addCamera=function(t){var n,r=this;if(!arguments.length){for(t=0;this.cameras[""+t];)t++;t=""+t}if(this.cameras[t])throw'sigma.addCamera: The camera "'+t+'" already exists.';return n=new i.classes.camera(t,this.graph,this.settings),this.cameras[t]=n,n.quadtree=new i.classes.quad,i.classes.edgequad!==e&&(n.edgequadtree=new i.classes.edgequad),n.bind("coordinatesUpdated",function(e){r.renderCamera(n,n.isAnimated)}),this.renderersPerCamera[t]=[],n},i.prototype.killCamera=function(e){if(e="string"==typeof e?this.cameras[e]:e,!e)throw"sigma.killCamera: The camera is undefined.";var t,i,n=this.renderersPerCamera[e.id];for(i=n.length,t=i-1;t>=0;t--)this.killRenderer(n[t]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},i.prototype.addRenderer=function(e){var t,n,r,s,o=e||{};if("string"==typeof o?o={container:document.getElementById(o)}:o instanceof HTMLElement&&(o={container:o}),"string"==typeof o.container&&(o.container=document.getElementById(o.container)),"id"in o)t=o.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(n="function"==typeof o.type?o.type:i.renderers[o.type],n=n||i.renderers.def,r="camera"in o?o.camera instanceof i.classes.camera?o.camera:this.cameras[o.camera]||this.addCamera(o.camera):this.addCamera(),this.cameras[r.id]!==r)throw"sigma.addRenderer: The camera is not properly referenced.";return s=new n(this.graph,r,this.settings,o),this.renderers[t]=s,Object.defineProperty(s,"id",{value:t}),s.bind&&s.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[r.id].push(s),s},i.prototype.killRenderer=function(e){if(e="string"==typeof e?this.renderers[e]:e,!e)throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],i=t.indexOf(e);return i>=0&&t.splice(i,1),e.kill&&e.kill(),delete this.renderers[e.id],this},i.prototype.refresh=function(t){var n,r,s,o,a,l,c=0;for(t=t||{},o=this.middlewares||[],n=0,r=o.length;r>n;n++)o[n].call(this,0===n?"":"tmp"+c+":",n===r-1?"ready:":"tmp"+ ++c+":");for(s in this.cameras)a=this.cameras[s],a.settings("autoRescale")&&this.renderersPerCamera[a.id]&&this.renderersPerCamera[a.id].length?i.middlewares.rescale.call(this,o.length?"ready:":"",a.readPrefix,{width:this.renderersPerCamera[a.id][0].width,height:this.renderersPerCamera[a.id][0].height}):i.middlewares.copy.call(this,o.length?"ready:":"",a.readPrefix),t.skipIndexation||(l=i.utils.getBoundaries(this.graph,a.readPrefix),a.quadtree.index(this.graph.nodes(),{prefix:a.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}),a.edgequadtree!==e&&a.settings("drawEdges")&&a.settings("enableEdgeHovering")&&a.edgequadtree.index(this.graph,{prefix:a.readPrefix,bounds:{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}));for(o=Object.keys(this.renderers),n=0,r=o.length;r>n;n++)if(this.renderers[o[n]].process)if(this.settings("skipErrors"))try{this.renderers[o[n]].process()}catch(u){console.log('Warning: The renderer "'+o[n]+'" crashed on ".process()"')}else this.renderers[o[n]].process();return this.render(),this},i.prototype.render=function(){var e,t,i;for(i=Object.keys(this.renderers),e=0,t=i.length;t>e;e++)if(this.settings("skipErrors"))try{this.renderers[i[e]].render()}catch(n){this.settings("verbose")&&console.log('Warning: The renderer "'+i[e]+'" crashed on ".render()"')}else this.renderers[i[e]].render();return this},i.prototype.renderCamera=function(e,t){var i,n,r,s=this;if(t)for(r=this.renderersPerCamera[e.id],i=0,n=r.length;n>i;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(o){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();else if(!this.cameraFrames[e.id]){for(r=this.renderersPerCamera[e.id],i=0,n=r.length;n>i;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(o){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete s.cameraFrames[e.id]})}return this},i.prototype.kill=function(){var e;this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares;for(e in this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);delete this.renderers,delete this.cameras;for(e in this)this.hasOwnProperty(e)&&delete this[e];delete t[this.id]},i.instances=function(e){return arguments.length?t[e]:i.utils.extend({},t)},i.version="1.0.3","undefined"!=typeof this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=i}.call(this),function(e){"use strict";function t(e,i){var n,r,s,o;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(e in arguments[0])t(e,arguments[0][e]);else if(arguments.length>1)for(o=Array.isArray(e)?e:e.split(/ /),n=0,r=o.length;n!==r;n+=1)s=o[n],T[s]||(T[s]=[]),T[s].push({handler:i})}function i(e,t){var i,n,r,s,o,a,l=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(i=0,n=l.length;i!==n;i+=1){if(a=l[i],T[a]){for(o=[],r=0,s=T[a].length;r!==s;r+=1)T[a][r].handler!==t&&o.push(T[a][r]);T[a]=o}T[a]&&0===T[a].length&&delete T[a]}else for(i=0,n=l.length;i!==n;i+=1)delete T[l[i]];else T=Object.create(null)}function n(e,t){var i,n,r,s,o,a,l=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,i=0,r=l.length;i!==r;i+=1)if(a=l[i],T[a])for(o={type:a,data:t||{}},n=0,s=T[a].length;n!==s;n+=1)try{T[a][n].handler(o)}catch(c){}}function r(){var e,t,i,n,r=!1,s=y(),o=C.shift();if(i=o.job(),s=y()-s,o.done++,o.time+=s,o.currentTime+=s,o.weightTime=o.currentTime/(o.weight||1),o.averageTime=o.time/o.done,n=o.count?o.count<=o.done:!i,!n){for(e=0,t=C.length;t>e;e++)if(C[e].weightTime>o.weightTime){C.splice(e,0,o),r=!0;break}r||C.push(o)}return n?o:null}function s(e){var t=C.length;k[e.id]=e,e.status="running",t&&(e.weightTime=C[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=y(),n("jobStarted",m(e)),C.push(e)}function o(){var e,t,i;for(e in w)t=w[e],t.after?S[e]=t:s(t),delete w[e];for(x=!!C.length;C.length&&y()-b<L.frameDuration;)if(i=r()){l(i.id);for(e in S)S[e].after===i.id&&(s(S[e]),delete S[e])}x?(b=y(),n("enterFrame"),setTimeout(o,0)):n("stop")}function a(e,t){var i,r,s;if(Array.isArray(e)){for(M=!0,i=0,r=e.length;r>i;i++)a(e[i].id,g(e[i],t));M=!1,x||(b=y(),n("start"),o())}else if("object"==typeof e)if("string"==typeof e.id)a(e.id,e);else{M=!0;for(i in e)"function"==typeof e[i]?a(i,g({job:e[i]},t)):a(i,g(e[i],t));M=!1,x||(b=y(),n("start"),o())}else{if("string"!=typeof e)throw new Error("[conrad.addJob] Wrong arguments.");if(u(e))throw new Error('[conrad.addJob] Job with id "'+e+'" already exists.');if("function"==typeof t)s={id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:t};else{if("object"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");s=g({id:e,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},t)}w[e]=s,n("jobAdded",m(s)),x||M||(b=y(),n("start"),o())}return this}function l(e){var t,i,r,s,o=!1;if(Array.isArray(e))for(t=0,i=e.length;i>t;t++)l(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(r=[k,S,w],t=0,i=r.length;i>t;t++)e in r[t]&&(s=r[t][e],L.history&&(s.status="done",E.push(s)),n("jobEnded",m(s)),delete r[t][e],"function"==typeof s.end&&s.end(),o=!0);for(r=C,t=0,i=r.length;i>t;t++)if(r[t].id===e){r.splice(t,1);break}if(!o)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function c(){var e,t=g(w,k,S);if(L.history)for(e in t)t[e].status="done",E.push(t[e]),"function"==typeof t[e].end&&t[e].end();return w={},S={},k={},C=[],x=!1,this}function u(e){var t=w[e]||k[e]||S[e];return t?g(t):null}function h(e,t){var i;if("string"==typeof a1&&1===arguments.length)return L[a1];i="object"==typeof a1&&1===arguments.length?a1||{}:{},"string"==typeof a1&&(i[a1]=a2);for(var n in i)void 0!==i[n]?L[n]=i[n]:delete L[n];return this}function d(){return x}function f(){return E=[],this}function p(e,t){var i,n,r,s,o,a,l;if(!arguments.length){o=[];for(n in w)o.push(w[n]);for(n in S)o.push(S[n]);for(n in k)o.push(k[n]);o=o.concat(E)}if("string"==typeof e)switch(e){case"waiting":o=v(S);break;case"running":o=v(k);break;case"done":o=E;break;default:a=e}if(e instanceof RegExp&&(a=e),!a&&("string"==typeof t||t instanceof RegExp)&&(a=t),a){if(l="string"==typeof a,o instanceof Array)i=o;else if("object"==typeof o){i=[];for(n in o)i=i.concat(o[n])}else{i=[];for(n in w)i.push(w[n]);for(n in S)i.push(S[n]);for(n in k)i.push(k[n]);i=i.concat(E)}for(o=[],r=0,s=i.length;s>r;r++)(l?i[r].id===a:i[r].id.match(a))&&o.push(i[r])}return m(o)}function g(){var e,t,i={},n=arguments.length;for(e=n-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i}function m(e){var t,i,n;if(!e)return e;if(Array.isArray(e))for(t=[],i=0,n=e.length;n>i;i++)t.push(m(e[i]));else if("object"==typeof e){t={};for(i in e)t[i]=m(e[i])}else t=e;return t}function v(e){var t,i=[];for(t in e)i.push(e[t]);return i}function y(){return Date.now?Date.now():(new Date).getTime()}if(e.conrad)throw new Error("conrad already exists");var b,x=!1,w={},k={},C=[],S={},E=[],M=!1,L={frameDuration:20,history:!0},T=Object.create(null);Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var A={hasJob:u,addJob:a,killJob:l,killAll:c,settings:h,getStats:p,isRunning:d,clearHistory:f,bind:t,unbind:i,version:"0.1.0"};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports.conrad=A),e.conrad=A}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var t=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var e,t,i={},n=arguments.length;for(e=n-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},t)},sigma.utils.id=function(){var e=0;return function(){return++e}}(),sigma.utils.floatColor=function(e){var t=[0,0,0];return e.match(/^#/)?(e=(e||"").replace(/^#/,""),t=3===e.length?[parseInt(e.charAt(0)+e.charAt(0),16),parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)]:[parseInt(e.charAt(0)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)]):e.match(/^ *rgba? *\(/)&&(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),t=[+e[1],+e[2],+e[3]]),256*t[0]*256+256*t[1]+t[2]},sigma.utils.zoomTo=function(e,t,i,n,r){var s,o,a,l=e.settings;o=Math.max(l("zoomMin"),Math.min(l("zoomMax"),e.ratio*n)),o!==e.ratio&&(n=o/e.ratio,a={x:t*(1-n)+e.x,y:i*(1-n)+e.y,ratio:o},r&&r.duration?(s=sigma.misc.animation.killAll(e),r=sigma.utils.extend(r,{easing:s?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(e,a,r)):(e.goTo(a),r&&r.onComplete&&r.onComplete()))},sigma.utils.getQuadraticControlPoint=function(e,t,i,n){return{x:(e+i)/2+(n-t)/4,y:(t+n)/2+(e-i)/4}},sigma.utils.getPointOnQuadraticCurve=function(e,t,i,n,r,s,o){return{x:Math.pow(1-e,2)*t+2*(1-e)*e*s+Math.pow(e,2)*n,y:Math.pow(1-e,2)*i+2*(1-e)*e*o+Math.pow(e,2)*r}},sigma.utils.getPointOnBezierCurve=function(e,t,i,n,r,s,o,a,l){var c=Math.pow(1-e,3),u=3*e*Math.pow(1-e,2),h=3*Math.pow(e,2)*(1-e),d=Math.pow(e,3);return{x:c*t+u*s+h*a+d*n,y:c*i+u*o+h*l+d*r}},sigma.utils.getSelfLoopControlPoints=function(e,t,i){return{x1:e-7*i,y1:t,x2:e,y2:t+7*i}},sigma.utils.getDistance=function(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))},sigma.utils.getCircleIntersection=function(e,t,i,n,r,s){var o,a,l,c,u,h,d,f,p;if(a=n-e,l=r-t,c=Math.sqrt(l*l+a*a),c>i+s)return!1;if(c<Math.abs(i-s))return!1;o=(i*i-s*s+c*c)/(2*c),f=e+a*o/c,p=t+l*o/c,u=Math.sqrt(i*i-o*o),h=-l*(u/c),d=a*(u/c);var g=f+h,m=f-h,v=p+d,y=p-d;return{xi:g,xi_prime:m,yi:v,yi_prime:y}},sigma.utils.isPointOnSegment=function(e,t,i,n,r,s,o){var a=Math.abs((t-n)*(r-i)-(e-i)*(s-n)),l=sigma.utils.getDistance(i,n,r,s),c=a/l;return o>c&&Math.min(i,r)<=e&&e<=Math.max(i,r)&&Math.min(n,s)<=t&&t<=Math.max(n,s)},sigma.utils.isPointOnQuadraticCurve=function(e,t,i,n,r,s,o,a,l){var c=sigma.utils.getDistance(i,n,r,s);if(Math.abs(e-i)>c||Math.abs(t-n)>c)return!1;for(var u,h=sigma.utils.getDistance(e,t,i,n),d=sigma.utils.getDistance(e,t,r,s),f=.5,p=d>h?-.01:.01,g=.001,m=100,v=sigma.utils.getPointOnQuadraticCurve(f,i,n,r,s,o,a),y=sigma.utils.getDistance(e,t,v.x,v.y);m-- >0&&f>=0&&1>=f&&y>l&&(p>g||-g>p);)u=y,v=sigma.utils.getPointOnQuadraticCurve(f,i,n,r,s,o,a),y=sigma.utils.getDistance(e,t,v.x,v.y),y>u?(p=-p/2,f+=p):0>f+p||f+p>1?(p/=2,y=u):f+=p;return l>y},sigma.utils.isPointOnBezierCurve=function(e,t,i,n,r,s,o,a,l,c,u){var h=sigma.utils.getDistance(i,n,o,a);if(Math.abs(e-i)>h||Math.abs(t-n)>h)return!1;for(var d,f=sigma.utils.getDistance(e,t,i,n),p=sigma.utils.getDistance(e,t,r,s),g=.5,m=p>f?-.01:.01,v=.001,y=100,b=sigma.utils.getPointOnBezierCurve(g,i,n,r,s,o,a,l,c),x=sigma.utils.getDistance(e,t,b.x,b.y);y-- >0&&g>=0&&1>=g&&x>u&&(m>v||-v>m);)d=x,b=sigma.utils.getPointOnBezierCurve(g,i,n,r,s,o,a,l,c),x=sigma.utils.getDistance(e,t,b.x,b.y),x>d?(m=-m/2,g+=m):0>g+m||g+m>1?(m/=2,x=d):g+=m;return u>x},sigma.utils.getX=function(t){return t.offsetX!==e&&t.offsetX||t.layerX!==e&&t.layerX||t.clientX!==e&&t.clientX},sigma.utils.getY=function(t){return t.offsetY!==e&&t.offsetY||t.layerY!==e&&t.layerY||t.clientY!==e&&t.clientY},sigma.utils.getWidth=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getHeight=function(t){var i=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;return"number"==typeof i&&i||i!==e&&i.baseVal!==e&&i.baseVal.value},sigma.utils.getDelta=function(t){return t.wheelDelta!==e&&t.wheelDelta||t.detail!==e&&-t.detail},sigma.utils.getOffset=function(e){for(var t=0,i=0;e;)i+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:i,left:t}},sigma.utils.doubleClick=function(e,t,i){var n,r=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],n=e._doubleClickHandler[t],n.push(function(e){return r++,2===r?(r=0,i(e)):void(1===r&&setTimeout(function(){r=0},sigma.settings.doubleClickTimeout))}),e.addEventListener(t,n[n.length-1],!1)},sigma.utils.unbindDoubleClick=function(e,t){for(var i,n=(e._doubleClickHandler||{})[t]||[];i=n.pop();)e.removeEventListener(t,i);delete(e._doubleClickHandler||{})[t]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(e){return e},sigma.utils.easings.quadraticIn=function(e){return e*e},sigma.utils.easings.quadraticOut=function(e){return e*(2-e)},sigma.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},sigma.utils.easings.cubicIn=function(e){return e*e*e},sigma.utils.easings.cubicOut=function(e){return--e*e*e+1},sigma.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},sigma.utils.loadShader=function(e,t,i,n){var r,s=e.createShader(i);return e.shaderSource(s,t),e.compileShader(s),r=e.getShaderParameter(s,e.COMPILE_STATUS),r?s:(n&&n('Error compiling shader "'+s+'":'+e.getShaderInfoLog(s)),e.deleteShader(s),null)},sigma.utils.loadProgram=function(e,t,i,n,r){var s,o,a=e.createProgram();for(s=0;s<t.length;++s)e.attachShader(a,t[s]);if(i)for(s=0;s<i.length;++s)e.bindAttribLocation(a,locations?locations[s]:s,opt_attribs[s]);return e.linkProgram(a),o=e.getProgramParameter(a,e.LINK_STATUS),o?a:(r&&r("Error in program linking: "+e.getProgramInfoLog(a)),e.deleteProgram(a),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},sigma.utils.matrices.rotation=function(e,t){var i=Math.cos(e),n=Math.sin(e);return t?[i,-n,n,i]:[i,-n,0,n,i,0,0,0,1]},sigma.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},sigma.utils.matrices.multiply=function(e,t,i){var n=i?2:3,r=e[0*n+0],s=e[0*n+1],o=e[0*n+2],a=e[1*n+0],l=e[1*n+1],c=e[1*n+2],u=e[2*n+0],h=e[2*n+1],d=e[2*n+2],f=t[0*n+0],p=t[0*n+1],g=t[0*n+2],m=t[1*n+0],v=t[1*n+1],y=t[1*n+2],b=t[2*n+0],x=t[2*n+1],w=t[2*n+2];return i?[r*f+s*m,r*p+s*v,a*f+l*m,a*p+l*v]:[r*f+s*m+o*b,r*p+s*v+o*x,r*g+s*y+o*w,a*f+l*m+c*b,a*p+l*v+c*x,a*g+l*y+c*w,u*f+h*m+d*b,u*p+h*v+d*x,u*g+h*y+d*w]}}.call(this),function(e){"use strict";var t,i=0,n=["ms","moz","webkit","o"];for(t=0;t<n.length&&!e.requestAnimationFrame;t++)e.requestAnimationFrame=e[n[t]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[n[t]+"CancelAnimationFrame"]||e[n[t]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),s=Math.max(0,16-(r-i)),o=e.setTimeout(function(){t(r+s)},s);return i=r+s,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t,i,n=Array.prototype.slice.call(arguments,1),r=this;return t=function(){},i=function(){return r.apply(this instanceof t&&e?this:e,n.concat(Array.prototype.slice.call(arguments)))},t.prototype=this.prototype,i.prototype=new t,i})}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var t={clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200};sigma.settings=sigma.utils.extend(sigma.settings||{},t)}.call(this),function(){"use strict";var e=function(){Object.defineProperty(this,"_handlers",{value:{}})};e.prototype.bind=function(e,t){var i,n,r,s;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(s="string"==typeof e?e.split(" "):e,i=0,n=s.length;i!==n;i+=1)r=s[i],r&&(this._handlers[r]||(this._handlers[r]=[]),this._handlers[r].push({handler:t}))}return this},e.prototype.unbind=function(e,t){var i,n,r,s,o,a,l,c="string"==typeof e?e.split(" "):e;if(!arguments.length){for(o in this._handlers)delete this._handlers[o];return this}if(t)for(i=0,n=c.length;i!==n;i+=1){if(l=c[i],this._handlers[l]){for(a=[],r=0,s=this._handlers[l].length;r!==s;r+=1)this._handlers[l][r].handler!==t&&a.push(this._handlers[l][r]);this._handlers[l]=a}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(i=0,n=c.length;i!==n;i+=1)delete this._handlers[c[i]];return this},e.prototype.dispatchEvent=function(e,t){var i,n,r,s,o,a,l,c=this,u="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,i=0,n=u.length;i!==n;i+=1)if(l=u[i],this._handlers[l]){for(a=c.getEvent(l,t),o=[],r=0,s=this._handlers[l].length;r!==s;r+=1)this._handlers[l][r].handler(a),this._handlers[l][r].one||o.push(this._handlers[l][r]);this._handlers[l]=o}return this},e.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},e.extend=function(t,i){var n;for(n in e.prototype)e.prototype.hasOwnProperty(n)&&(t[n]=e.prototype[n]);e.apply(t,i)},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.dispatcher=e):this.dispatcher=e}.call(this),function(){"use strict";var e=function(){var t,i,n={},r=Array.prototype.slice.call(arguments,0),s=function(e,t){var i,o,a,l;{if(1!==arguments.length||"string"!=typeof e){if("object"==typeof e&&"string"==typeof t)return void 0!==(e||{})[t]?e[t]:s(t);for(i="object"==typeof e&&void 0===t?e:{},"string"==typeof e&&(i[e]=t),o=0,l=Object.keys(i),a=l.length;a>o;o++)n[l[o]]=i[l[o]];return this}if(void 0!==n[e])return n[e];for(o=0,a=r.length;a>o;o++)if(void 0!==r[o][e])return r[o][e]}};for(s.embedObjects=function(){var t=r.concat(n).concat(Array.prototype.splice.call(arguments,0));return e.apply({},t)},t=0,i=arguments.length;i>t;t++)s(arguments[t]);return s};"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=e):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.configurable=e):this.configurable=e}.call(this),function(e){"use strict";function t(e,t,i){var n=function(){var n,r;for(n in a[e])a[e][n].apply(t,arguments);r=i.apply(t,arguments);for(n in o[e])o[e][n].apply(t,arguments);return r};return n}function i(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}var n=Object.create(null),r=Object.create(null),s=Object.create(null),o=Object.create(null),a=Object.create(null),l={immutable:!0,clone:!0},c=function(e){return l[e]},u=function(e){var i,r,o;o={settings:e||c,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(i in s)s[i].call(o);for(i in n)r=t(i,o,n[i]),this[i]=r,o[i]=r};u.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(n[e]||u[e])throw'The method "'+e+'" already exists.';return n[e]=t,o[e]=Object.create(null),a[e]=Object.create(null),this},u.hasMethod=function(e){return!(!n[e]&&!u[e])},u.attach=function(e,t,i,n){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof i||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var r;if("constructor"===e)r=s;else if(n){if(!a[e])throw'The method "'+e+'" does not exist.';r=a[e]}else{if(!o[e])throw'The method "'+e+'" does not exist.';r=o[e]}if(r[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return r[t]=i,this},u.attachBefore=function(e,t,i){return this.attach(e,t,i,!0)},u.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(r[e])throw'The index "'+e+'" already exists.';var i;r[e]=t;for(i in t){if("function"!=typeof t[i])throw"The bindings must be functions.";u.attach(i,e,t[i])}return this},u.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,i=e.id,n=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(n[t]=e[t]);else n=e;return this.settings("immutable")?Object.defineProperty(n,"id",{value:i,enumerable:!0}):n.id=i,this.inNeighborsIndex[i]=Object.create(null),this.outNeighborsIndex[i]=Object.create(null),this.allNeighborsIndex[i]=Object.create(null),this.inNeighborsCount[i]=0,this.outNeighborsCount[i]=0,this.allNeighborsCount[i]=0,this.nodesArray.push(n),this.nodesIndex[n.id]=n,this}),u.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,i=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(i[t]=e[t]);else i=e;return this.settings("immutable")?(Object.defineProperty(i,"id",{value:e.id,enumerable:!0}),Object.defineProperty(i,"source",{value:e.source,enumerable:!0}),Object.defineProperty(i,"target",{value:e.target,enumerable:!0})):(i.id=e.id,i.source=e.source,i.target=e.target),this.edgesArray.push(i),this.edgesIndex[i.id]=i,this.inNeighborsIndex[i.target][i.source]||(this.inNeighborsIndex[i.target][i.source]=Object.create(null)),this.inNeighborsIndex[i.target][i.source][i.id]=i,this.outNeighborsIndex[i.source][i.target]||(this.outNeighborsIndex[i.source][i.target]=Object.create(null)),this.outNeighborsIndex[i.source][i.target][i.id]=i,this.allNeighborsIndex[i.source][i.target]||(this.allNeighborsIndex[i.source][i.target]=Object.create(null)),this.allNeighborsIndex[i.source][i.target][i.id]=i,i.target!==i.source&&(this.allNeighborsIndex[i.target][i.source]||(this.allNeighborsIndex[i.target][i.source]=Object.create(null)),this.allNeighborsIndex[i.target][i.source][i.id]=i),this.inNeighborsCount[i.target]++,this.outNeighborsCount[i.source]++,this.allNeighborsCount[i.target]++,this.allNeighborsCount[i.source]++,this}),u.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,i,n;for(delete this.nodesIndex[e],t=0,n=this.nodesArray.length;n>t;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)(this.edgesArray[t].source===e||this.edgesArray[t].target===e)&&this.dropEdge(this.edgesArray[t].id);delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e];
for(i in this.nodesIndex)delete this.inNeighborsIndex[i][e],delete this.outNeighborsIndex[i][e],delete this.allNeighborsIndex[i][e];return this}),u.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,i,n;for(n=this.edgesIndex[e],delete this.edgesIndex[e],t=0,i=this.edgesArray.length;i>t;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[n.target][n.source][n.id],Object.keys(this.inNeighborsIndex[n.target][n.source]).length||delete this.inNeighborsIndex[n.target][n.source],delete this.outNeighborsIndex[n.source][n.target][n.id],Object.keys(this.outNeighborsIndex[n.source][n.target]).length||delete this.outNeighborsIndex[n.source][n.target],delete this.allNeighborsIndex[n.source][n.target][n.id],Object.keys(this.allNeighborsIndex[n.source][n.target]).length||delete this.allNeighborsIndex[n.source][n.target],n.target!==n.source&&(delete this.allNeighborsIndex[n.target][n.source][n.id],Object.keys(this.allNeighborsIndex[n.target][n.source]).length||delete this.allNeighborsIndex[n.target][n.source]),this.inNeighborsCount[n.target]--,this.outNeighborsCount[n.source]--,this.allNeighborsCount[n.source]--,this.allNeighborsCount[n.target]--,this}),u.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),u.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,i(this.nodesIndex),i(this.edgesIndex),i(this.nodesIndex),i(this.inNeighborsIndex),i(this.outNeighborsIndex),i(this.allNeighborsIndex),i(this.inNeighborsCount),i(this.outNeighborsCount),i(this.allNeighborsCount),this}),u.addMethod("read",function(e){var t,i,n;for(i=e.nodes||[],t=0,n=i.length;n>t;t++)this.addNode(i[t]);for(i=e.edges||[],t=0,n=i.length;n>t;t++)this.addEdge(i[t]);return this}),u.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,n=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";n.push(this.nodesIndex[e[t]])}return n}throw"nodes: Wrong arguments."}),u.addMethod("degree",function(e,t){if(t={"in":this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var i,n,r=[];for(i=0,n=e.length;n>i;i++){if("string"!=typeof e[i]&&"number"!=typeof e[i])throw"degree: Wrong arguments.";r.push(t[e[i]])}return r}throw"degree: Wrong arguments."}),u.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,i,n=[];for(t=0,i=e.length;i>t;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";n.push(this.edgesIndex[e[t]])}return n}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=u):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.graph=u):this.graph=u}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(e,t,i,n){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof n&&n?i.embedObject(n):i},sigma.classes.camera.prototype.goTo=function(t){if(!this.settings("enableCamera"))return this;var i,n,r=t||{},s=["x","y","ratio","angle"];for(i=0,n=s.length;n>i;i++)if(r[s[i]]!==e){if("number"!=typeof r[s[i]]||isNaN(r[s[i]]))throw'Value for "'+s[i]+'" is not a number.';this[s[i]]=r[s[i]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(t,i,n){n=n||{},i=i!==e?i:this.prefix,t=t!==e?t:this.readPrefix;var r,s,o,a=n.nodes||this.graph.nodes(),l=n.edges||this.graph.edges(),c=Math.cos(this.angle),u=Math.sin(this.angle),h=Math.pow(this.ratio,this.settings("nodesPowRatio")),d=Math.pow(this.ratio,this.settings("edgesPowRatio"));for(r=0,s=a.length;s>r;r++)o=a[r],o[i+"x"]=(((o[t+"x"]||0)-this.x)*c+((o[t+"y"]||0)-this.y)*u)/this.ratio+(n.width||0)/2,o[i+"y"]=(((o[t+"y"]||0)-this.y)*c-((o[t+"x"]||0)-this.x)*u)/this.ratio+(n.height||0)/2,o[i+"size"]=(o[t+"size"]||0)/h;for(r=0,s=l.length;s>r;r++)l[r][i+"size"]=(l[r][t+"size"]||0)/d;return this},sigma.classes.camera.prototype.graphPosition=function(e,t,i){var n=0,r=0,s=Math.cos(this.angle),o=Math.sin(this.angle);return i||(n=-(this.x*s+this.y*o)/this.ratio,r=-(this.y*s-this.x*o)/this.ratio),{x:(e*s+t*o)/this.ratio+n,y:(t*s-e*o)/this.ratio+r}},sigma.classes.camera.prototype.cameraPosition=function(e,t,i){var n=0,r=0,s=Math.cos(this.angle),o=Math.sin(this.angle);return i||(n=-(this.x*s+this.y*o)/this.ratio,r=-(this.y*s-this.x*o)/this.ratio),{x:((e-n)*s-(t-r)*o)*this.ratio,y:((t-r)*s+(e-n)*o)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var e=sigma.utils.matrices.scale(1/this.ratio),t=sigma.utils.matrices.rotation(this.angle),i=sigma.utils.matrices.translation(-this.x,-this.y),n=sigma.utils.matrices.multiply(i,sigma.utils.matrices.multiply(t,e));return n},sigma.classes.camera.prototype.getRectangle=function(e,t){var i=this.cameraPosition(e,0,!0),n=this.cameraPosition(0,t,!0),r=this.cameraPosition(e/2,t/2,!0),s=this.cameraPosition(e/4,0,!0).x,o=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-r.x-s,y1:this.y-r.y-o,x2:this.x-r.x+s+i.x,y2:this.y-r.y-o+i.y,height:Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y+2*o,2))}}}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,n=t.y+t.height/2,r=e.y<n,s=e.x<i;return r?s?0:1:s?2:3}function i(e,t){for(var i=[],n=0;4>n;n++)e.x2>=t[n][0].x&&e.x1<=t[n][1].x&&e.y1+e.height>=t[n][0].y&&e.y1<=t[n][2].y&&i.push(n);return i}function n(e,t){for(var i=[],n=0;4>n;n++)c.collision(e,t[n])&&i.push(n);return i}function r(e,t){var i,n,r=t.level+1,s=Math.round(t.bounds.width/2),o=Math.round(t.bounds.height/2),a=Math.round(t.bounds.x),c=Math.round(t.bounds.y);switch(e){case 0:i=a,n=c;break;case 1:i=a+s,n=c;break;case 2:i=a,n=c+o;break;case 3:i=a+s,n=c+o}return l({x:i,y:n,width:s,height:o},r,t.maxElements,t.maxLevel)}function s(t,n,o){if(o.level<o.maxLevel)for(var a=i(n,o.corners),l=0,c=a.length;c>l;l++)o.nodes[a[l]]===e&&(o.nodes[a[l]]=r(a[l],o)),s(t,n,o.nodes[a[l]]);else o.elements.push(t)}function o(i,n){if(n.level<n.maxLevel){var r=t(i,n.bounds);return n.nodes[r]!==e?o(i,n.nodes[r]):[]}return n.elements}function a(t,i,n,r){if(r=r||{},i.level<i.maxLevel)for(var s=n(t,i.corners),o=0,l=s.length;l>o;o++)i.nodes[s[o]]!==e&&a(t,i.nodes[s[o]],n,r);else for(var c=0,u=i.elements.length;u>c;c++)r[i.elements[c].id]===e&&(r[i.elements[c].id]=i.elements[c]);return r}function l(e,t,i,n){return{level:t||0,bounds:e,corners:c.splitSquare(e),maxElements:i||40,maxLevel:n||8,elements:[],nodes:[]}}var c={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var i=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),n=Math.min(e.x1,e.x2,i.x),r=Math.max(e.x1,e.x2,i.x),s=Math.min(e.y1,e.y2,i.y),o=Math.max(e.y1,e.y2,i.y);return{x1:n-e.size,y1:s-e.size,x2:r+e.size,y2:s-e.size,height:o-s+2*e.size}},selfLoopToSquare:function(e){var t=sigma.utils.getSelfLoopControlPoints(e.x,e.y,e.size),i=Math.min(e.x,t.x1,t.x2),n=Math.max(e.x,t.x1,t.x2),r=Math.min(e.y,t.y1,t.y2),s=Math.max(e.y,t.y1,t.y2);return{x1:i-e.size,y1:r-e.size,x2:n+e.size,y2:r-e.size,height:s-r+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var n=[],r=[],s=0;4>s;s++){var o=this.projection(t[s],e),a=this.projection(i[s],e);n.push(o.x*e.x+o.y*e.y),r.push(a.x*e.x+a.y*e.y)}var l=Math.max.apply(Math,n),c=Math.max.apply(Math,r),u=Math.min.apply(Math,n),h=Math.min.apply(Math,r);return l>=h&&c>=u},collision:function(e,t){for(var i=this.axis(e,t),n=!0,r=0;4>r;r++)n=n&&this.axisCollision(i[r],e,t);return n}},u=function(){this._geom=c,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};u.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var i,n,r,o,a,u=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var h=e.edges(),d=0,f=h.length;f>d;d++)n=e.nodes(h[d].source),r=e.nodes(h[d].target),a={x1:n[u+"x"],y1:n[u+"y"],x2:r[u+"x"],y2:r[u+"y"],size:h[d][u+"size"]||0},"curve"===h[d].type||"curvedArrow"===h[d].type?n.id===r.id?(o={x:n[u+"x"],y:n[u+"y"],size:n[u+"size"]||0},s(h[d],c.selfLoopToSquare(o),this._tree)):(i=sigma.utils.getQuadraticControlPoint(a.x1,a.y1,a.x2,a.y2),s(h[d],c.quadraticCurveToSquare(a,i),this._tree)):s(h[d],c.lineToSquare(a),this._tree);return this._cache={query:!1,result:!1},this._tree},u.prototype.point=function(e,t){return this._enabled&&this._tree?o({x:e,y:t},this._tree)||[]:[]},u.prototype.area=function(e){if(!this._enabled)return[];var t,r,s=JSON.stringify(e);if(this._cache.query===s)return this._cache.result;c.isAxisAligned(e)?(t=i,r=c.axisAlignedTopPoints(e)):(t=n,r=c.rectangleCorners(e));var o=this._tree?a(r,this._tree,t):[],l=[];for(var u in o)l.push(o[u]);return this._cache.query=s,this._cache.result=l,l},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=u):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.edgequad=u):this.edgequad=u}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,i){function n(e){var t,i,n;return S("mouseEnabled")&&w.dispatchEvent("mousemove",{x:sigma.utils.getX(e)-sigma.utils.getWidth(e)/2,y:sigma.utils.getY(e)-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),S("mouseEnabled")&&m?(v=!0,y=!0,x&&clearTimeout(x),x=setTimeout(function(){v=!1},S("dragTimeout")),sigma.misc.animation.killAll(C),C.isMoving=!0,n=C.cameraPosition(sigma.utils.getX(e)-p,sigma.utils.getY(e)-g,!0),t=u-n.x,i=h-n.y,(t!==C.x||i!==C.y)&&(d=C.x,f=C.y,C.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function r(e){if(S("mouseEnabled")&&m){m=!1,x&&clearTimeout(x),C.isMoving=!1;var t=sigma.utils.getX(e),i=sigma.utils.getY(e);v?(sigma.misc.animation.killAll(C),sigma.misc.animation.camera(C,{x:C.x+S("mouseInertiaRatio")*(C.x-d),y:C.y+S("mouseInertiaRatio")*(C.y-f)},{easing:"quadraticOut",duration:S("mouseInertiaDuration")})):(p!==t||g!==i)&&C.goTo({x:C.x,y:C.y}),w.dispatchEvent("mouseup",{x:t-sigma.utils.getWidth(e)/2,y:i-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),v=!1}}function s(e){if(S("mouseEnabled"))switch(u=C.x,h=C.y,d=C.x,f=C.y,p=sigma.utils.getX(e),g=sigma.utils.getY(e),y=!1,b=(new Date).getTime(),e.which){case 2:break;case 3:w.dispatchEvent("rightclick",{x:p-sigma.utils.getWidth(e)/2,y:g-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey});break;default:m=!0,w.dispatchEvent("mousedown",{x:p-sigma.utils.getWidth(e)/2,y:g-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey})}}function o(e){S("mouseEnabled")&&w.dispatchEvent("mouseout")}function a(e){return S("mouseEnabled")&&w.dispatchEvent("click",{x:sigma.utils.getX(e)-sigma.utils.getWidth(e)/2,y:sigma.utils.getY(e)-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey,isDragging:(new Date).getTime()-b>100&&y}),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function l(e){var t,i,n;return S("mouseEnabled")?(i=1/S("doubleClickZoomingRatio"),w.dispatchEvent("doubleclick",{x:p-sigma.utils.getWidth(e)/2,y:g-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),S("doubleClickEnabled")&&(t=C.cameraPosition(sigma.utils.getX(e)-sigma.utils.getWidth(e)/2,sigma.utils.getY(e)-sigma.utils.getHeight(e)/2,!0),n={duration:S("doubleClickZoomDuration")},sigma.utils.zoomTo(C,t.x,t.y,i,n)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}function c(e){var t,i,n;return S("mouseEnabled")&&S("mouseWheelEnabled")?(i=sigma.utils.getDelta(e)>0?1/S("zoomingRatio"):S("zoomingRatio"),t=C.cameraPosition(sigma.utils.getX(e)-sigma.utils.getWidth(e)/2,sigma.utils.getY(e)-sigma.utils.getHeight(e)/2,!0),n={duration:S("mouseZoomDuration")},sigma.utils.zoomTo(C,t.x,t.y,i,n),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var u,h,d,f,p,g,m,v,y,b,x,w=this,k=e,C=t,S=i;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(k,"click",l),k.addEventListener("DOMMouseScroll",c,!1),k.addEventListener("mousewheel",c,!1),k.addEventListener("mousemove",n,!1),k.addEventListener("mousedown",s,!1),k.addEventListener("click",a,!1),k.addEventListener("mouseout",o,!1),document.addEventListener("mouseup",r,!1),this.kill=function(){sigma.utils.unbindDoubleClick(k,"click"),k.removeEventListener("DOMMouseScroll",c),k.removeEventListener("mousewheel",c),k.removeEventListener("mousemove",n),k.removeEventListener("mousedown",s),k.removeEventListener("click",a),k.removeEventListener("mouseout",o),document.removeEventListener("mouseup",r)}}}.call(this),function(e){"use strict";function t(e,t){var i=t.x+t.width/2,n=t.y+t.height/2,r=e.y<n,s=e.x<i;return r?s?0:1:s?2:3}function i(e,t){for(var i=[],n=0;4>n;n++)e.x2>=t[n][0].x&&e.x1<=t[n][1].x&&e.y1+e.height>=t[n][0].y&&e.y1<=t[n][2].y&&i.push(n);return i}function n(e,t){for(var i=[],n=0;4>n;n++)c.collision(e,t[n])&&i.push(n);return i}function r(e,t){var i,n,r=t.level+1,s=Math.round(t.bounds.width/2),o=Math.round(t.bounds.height/2),a=Math.round(t.bounds.x),c=Math.round(t.bounds.y);switch(e){case 0:i=a,n=c;break;case 1:i=a+s,n=c;break;case 2:i=a,n=c+o;break;case 3:i=a+s,n=c+o}return l({x:i,y:n,width:s,height:o},r,t.maxElements,t.maxLevel)}function s(t,n,o){if(o.level<o.maxLevel)for(var a=i(n,o.corners),l=0,c=a.length;c>l;l++)o.nodes[a[l]]===e&&(o.nodes[a[l]]=r(a[l],o)),s(t,n,o.nodes[a[l]]);else o.elements.push(t)}function o(i,n){if(n.level<n.maxLevel){var r=t(i,n.bounds);return n.nodes[r]!==e?o(i,n.nodes[r]):[]}return n.elements}function a(t,i,n,r){if(r=r||{},i.level<i.maxLevel)for(var s=n(t,i.corners),o=0,l=s.length;l>o;o++)i.nodes[s[o]]!==e&&a(t,i.nodes[s[o]],n,r);else for(var c=0,u=i.elements.length;u>c;c++)r[i.elements[c].id]===e&&(r[i.elements[c].id]=i.elements[c]);return r}function l(e,t,i,n){return{level:t||0,bounds:e,corners:c.splitSquare(e),maxElements:i||20,maxLevel:n||4,elements:[],nodes:[]}}var c={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var n=[],r=[],s=0;4>s;s++){var o=this.projection(t[s],e),a=this.projection(i[s],e);n.push(o.x*e.x+o.y*e.y),r.push(a.x*e.x+a.y*e.y)}var l=Math.max.apply(Math,n),c=Math.max.apply(Math,r),u=Math.min.apply(Math,n),h=Math.min.apply(Math,r);return l>=h&&c>=u},collision:function(e,t){for(var i=this.axis(e,t),n=!0,r=0;4>r;r++)n=n&&this.axisCollision(i[r],e,t);return n}},u=function(){this._geom=c,this._tree=null,this._cache={query:!1,result:!1}};u.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var i=t.prefix||"";this._tree=l(t.bounds,0,t.maxElements,t.maxLevel);for(var n=0,r=e.length;r>n;n++)s(e[n],c.pointToSquare({x:e[n][i+"x"],y:e[n][i+"y"],size:e[n][i+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},u.prototype.point=function(e,t){return this._tree?o({x:e,y:t},this._tree)||[]:[]},u.prototype.area=function(e){var t,r,s=JSON.stringify(e);if(this._cache.query===s)return this._cache.result;c.isAxisAligned(e)?(t=i,r=c.axisAlignedTopPoints(e)):(t=n,r=c.rectangleCorners(e));var o=this._tree?a(r,this._tree,t):[],l=[];for(var u in o)l.push(o[u]);return this._cache.query=s,this._cache.result=l,l},"undefined"!=typeof this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=u):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.quad=u):this.quad=u}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(e,t,i){function n(e){var t=sigma.utils.getOffset(L);return{x:e.pageX-t.left,y:e.pageY-t.top}}function r(e){if(A("touchEnabled")){var t,i,r,s,o,a;switch(P=e.touches,P.length){case 1:T.isMoving=!0,k=1,l=T.x,c=T.y,d=T.x,f=T.y,o=n(P[0]),m=o.x,v=o.y;break;case 2:return T.isMoving=!0,k=2,o=n(P[0]),a=n(P[1]),t=o.x,r=o.y,i=a.x,s=a.y,d=T.x,f=T.y,u=T.angle,h=T.ratio,l=T.x,c=T.y,m=t,v=r,y=i,b=s,x=Math.atan2(b-v,y-m),w=Math.sqrt(Math.pow(b-v,2)+Math.pow(y-m,2)),e.preventDefault(),!1}}}function s(e){if(A("touchEnabled")){P=e.touches;var t=A("touchInertiaRatio");switch(E&&(C=!1,clearTimeout(E)),k){case 2:if(1===e.touches.length){r(e),e.preventDefault();break}case 1:T.isMoving=!1,M.dispatchEvent("stopDrag"),C&&(S=!1,sigma.misc.animation.camera(T,{x:T.x+t*(T.x-d),y:T.y+t*(T.y-f)},{easing:"quadraticOut",duration:A("touchInertiaDuration")})),C=!1,k=0}}}function o(e){if(!S&&A("touchEnabled")){var t,i,r,s,o,a,L,N,O,_,I,j,z,H,B,D,R;switch(P=e.touches,C=!0,E&&clearTimeout(E),E=setTimeout(function(){C=!1},A("dragTimeout")),k){case 1:N=n(P[0]),t=N.x,r=N.y,_=T.cameraPosition(t-m,r-v,!0),H=l-_.x,B=c-_.y,(H!==T.x||B!==T.y)&&(d=T.x,f=T.y,T.goTo({x:H,y:B}),M.dispatchEvent("mousemove",{x:N.x-sigma.utils.getWidth(e)/2,y:N.y-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),M.dispatchEvent("drag"));break;case 2:N=n(P[0]),O=n(P[1]),t=N.x,r=N.y,i=O.x,s=O.y,I=T.cameraPosition((m+y)/2-sigma.utils.getWidth(e)/2,(v+b)/2-sigma.utils.getHeight(e)/2,!0),L=T.cameraPosition((t+i)/2-sigma.utils.getWidth(e)/2,(r+s)/2-sigma.utils.getHeight(e)/2,!0),j=Math.atan2(s-r,i-t)-x,z=Math.sqrt(Math.pow(s-r,2)+Math.pow(i-t,2))/w,t=I.x,r=I.y,D=h/z,t*=z,r*=z,R=u-j,o=Math.cos(-j),a=Math.sin(-j),i=t*o+r*a,s=r*o-t*a,t=i,r=s,H=t-L.x+l,B=r-L.y+c,(D!==T.ratio||R!==T.angle||H!==T.x||B!==T.y)&&(d=T.x,f=T.y,p=T.angle,g=T.ratio,T.goTo({x:H,y:B,angle:R,ratio:D}),M.dispatchEvent("drag"))}return e.preventDefault(),!1}}function a(e){var t,i,r;return e.touches&&1===e.touches.length&&A("touchEnabled")?(S=!0,i=1/A("doubleClickZoomingRatio"),t=n(e.touches[0]),M.dispatchEvent("doubleclick",{x:t.x-sigma.utils.getWidth(e)/2,y:t.y-sigma.utils.getHeight(e)/2,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}),A("doubleClickEnabled")&&(t=T.cameraPosition(t.x-sigma.utils.getWidth(e)/2,t.y-sigma.utils.getHeight(e)/2,!0),r={duration:A("doubleClickZoomDuration"),onComplete:function(){S=!1}},sigma.utils.zoomTo(T,t.x,t.y,i,r)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1):void 0}var l,c,u,h,d,f,p,g,m,v,y,b,x,w,k,C,S,E,M=this,L=e,T=t,A=i,P=[];sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(L,"touchstart",a),L.addEventListener("touchstart",r,!1),L.addEventListener("touchend",s,!1),L.addEventListener("touchcancel",s,!1),L.addEventListener("touchleave",s,!1),L.addEventListener("touchmove",o,!1),this.kill=function(){sigma.utils.unbindDoubleClick(L,"touchstart"),L.addEventListener("touchstart",r),L.addEventListener("touchend",s),L.addEventListener("touchcancel",s),L.addEventListener("touchleave",s),L.addEventListener("touchmove",o)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,i,n){if("object"!=typeof n)throw"sigma.renderers.canvas: Wrong arguments.";if(!(n.container instanceof HTMLElement))throw"Container not found.";var r,s,o,a;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=n,this.container=this.options.container,this.settings="object"==typeof n.settings&&n.settings?i.embedObjects(n.settings):i,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],o=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,s=o.length;s>r;r++)a="function"==typeof o[r]?o[r]:sigma.captors[o[r]],this.captors.push(new a(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(t){t=t||{};var i,n,r,s,o,a,l,c,u,h,d,f,p,g={},m=this.graph,v=this.graph.nodes,y=(this.options.prefix||"",this.settings(t,"drawEdges")),b=this.settings(t,"drawNodes"),x=this.settings(t,"drawLabels"),w=this.settings(t,"drawEdgeLabels"),k=this.settings.embedObjects(t,{prefix:this.options.prefix});this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(y=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear();for(r in this.jobs)conrad.hasJob(r)&&conrad.killJob(r);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,n=0,s=i.length;s>n;n++)g[i[n].id]=i[n];if(y){for(i=m.edges(),n=0,s=i.length;s>n;n++)o=i[n],!g[o.source]&&!g[o.target]||o.hidden||v(o.source).hidden||v(o.target).hidden||this.edgesOnScreen.push(o);if(this.settings(t,"batchEdgesDrawing"))a="edges_"+this.conradId,f=k("canvasEdgesBatchSize"),h=this.edgesOnScreen,s=h.length,u=0,l=Math.min(h.length,u+f),c=function(){for(p=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",d=sigma.canvas.edges,n=u;l>n;n++)o=h[n],(d[o.type||this.settings(t,"defaultEdgeType")]||d.def)(o,m.nodes(o.source),m.nodes(o.target),this.contexts.edges,k);if(w)for(d=sigma.canvas.edges.labels,n=u;l>n;n++)o=h[n],o.hidden||(d[o.type||this.settings(t,"defaultEdgeType")]||d.def)(o,m.nodes(o.source),m.nodes(o.target),this.contexts.labels,k);return this.contexts.edges.globalCompositeOperation=p,l===h.length?(delete this.jobs[a],!1):(u=l+1,l=Math.min(h.length,u+f),!0)},this.jobs[a]=c,conrad.addJob(a,c.bind(this));else{for(d=sigma.canvas.edges,i=this.edgesOnScreen,n=0,s=i.length;s>n;n++)o=i[n],(d[o.type||this.settings(t,"defaultEdgeType")]||d.def)(o,m.nodes(o.source),m.nodes(o.target),this.contexts.edges,k);if(w)for(d=sigma.canvas.edges.labels,i=this.edgesOnScreen,n=0,s=i.length;s>n;n++)i[n].hidden||(d[i[n].type||this.settings(t,"defaultEdgeType")]||d.def)(i[n],m.nodes(i[n].source),m.nodes(i[n].target),this.contexts.labels,k)}}if(b)for(d=sigma.canvas.nodes,i=this.nodesOnScreen,n=0,s=i.length;s>n;n++)i[n].hidden||(d[i[n].type||this.settings(t,"defaultNodeType")]||d.def)(i[n],this.contexts.nodes,k);if(x)for(d=sigma.canvas.labels,i=this.nodesOnScreen,n=0,s=i.length;s>n;n++)i[n].hidden||(d[i[n].type||this.settings(t,"defaultNodeType")]||d.def)(i[n],this.contexts.labels,k);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var i=document.createElement(e);i.style.position="absolute",i.setAttribute("class","sigma-"+t),this.domElements[t]=i,this.container.appendChild(i),"canvas"===e.toLowerCase()&&(this.contexts[t]=i.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(t,i){var n,r=this.width,s=this.height,o=1;if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||s!==this.height)for(n in this.domElements)this.domElements[n].style.width=t+"px",this.domElements[n].style.height=i+"px","canvas"===this.domElements[n].tagName.toLowerCase()&&(this.domElements[n].setAttribute("width",t*o+"px"),this.domElements[n].setAttribute("height",i*o+"px"),1!==o&&this.contexts[n].scale(o,o));return this},sigma.renderers.canvas.prototype.clear=function(){var e;for(e in this.domElements)"CANVAS"===this.domElements[e].tagName&&(this.domElements[e].width=this.domElements[e].width);return this},sigma.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(e,t,i,n){if("object"!=typeof n)throw"sigma.renderers.svg: Wrong arguments.";if(!(n.container instanceof HTMLElement))throw"Container not found.";var r,s,o,a,l=this;for(sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=n,this.container=this.options.container,this.settings="object"==typeof n.settings&&n.settings?i.embedObjects(n.settings):i,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],o=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,s=o.length;s>r;r++)a="function"==typeof o[r]?o[r]:sigma.captors[o[r]],this.captors.push(new a(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){l.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(t){t=t||{};var i,n,r,s,o,a,l,c,u,h={},d=this.graph,f=this.graph.nodes,p=(this.options.prefix||"",this.settings(t,"drawEdges")),g=this.settings(t,"drawNodes"),m=(this.settings(t,"drawLabels"),this.settings.embedObjects(t,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(p=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=this.nodesOnScreen,n=0,s=i.length;s>n;n++)h[i[n].id]=i[n];for(i=d.edges(),n=0,s=i.length;s>n;n++)o=i[n],!h[o.source]&&!h[o.target]||o.hidden||f(o.source).hidden||f(o.target).hidden||this.edgesOnScreen.push(o);if(c=sigma.svg.nodes,u=sigma.svg.labels,
g)for(i=this.nodesOnScreen,n=0,s=i.length;s>n;n++)i[n].hidden||this.domElements.nodes[i[n].id]||(r=(c[i[n].type]||c.def).create(i[n],m),this.domElements.nodes[i[n].id]=r,this.domElements.groups.nodes.appendChild(r),r=(u[i[n].type]||u.def).create(i[n],m),this.domElements.labels[i[n].id]=r,this.domElements.groups.labels.appendChild(r));if(g)for(i=this.nodesOnScreen,n=0,s=i.length;s>n;n++)i[n].hidden||((c[i[n].type]||c.def).update(i[n],this.domElements.nodes[i[n].id],m),(u[i[n].type]||u.def).update(i[n],this.domElements.labels[i[n].id],m));if(c=sigma.svg.edges,p)for(i=this.edgesOnScreen,n=0,s=i.length;s>n;n++)this.domElements.edges[i[n].id]||(a=f(i[n].source),l=f(i[n].target),r=(c[i[n].type]||c.def).create(i[n],a,l,m),this.domElements.edges[i[n].id]=r,this.domElements.groups.edges.appendChild(r));if(p)for(i=this.edgesOnScreen,n=0,s=i.length;s>n;n++)a=f(i[n].source),l=f(i[n].target),(c[i[n].type]||c.def).update(i[n],this.domElements.edges[i[n].id],a,l,m);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(e){var t,i,n,r=document.createElementNS(this.settings("xmlns"),e),s=this.settings("classPrefix");r.style.position="absolute",r.setAttribute("class",s+"-svg"),r.setAttribute("xmlns",this.settings("xmlns")),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1");var o=document.createElement("canvas");o.setAttribute("class",s+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(r);var a=["edges","nodes","labels","hovers"];for(n=0,i=a.length;i>n;n++)t=document.createElementNS(this.settings("xmlns"),"g"),t.setAttributeNS(null,"id",s+"-group-"+a[n]),t.setAttributeNS(null,"class",s+"-group"),this.domElements.groups[a[n]]=this.domElements.graph.appendChild(t);this.container.appendChild(o),this.measurementCanvas=o.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(e){var t,i;for(i in e)t=e[i],sigma.svg.utils.hide(t);return this},sigma.renderers.svg.prototype.bindHovers=function(e){function t(t){var i=t.data.node,n=o.settings.embedObjects({prefix:e});if(n("enableHovering")){var a=(s[i.type]||s.def).create(i,o.domElements.nodes[i.id],o.measurementCanvas,n);o.domElements.hovers[i.id]=a,o.domElements.groups.hovers.appendChild(a),r=i}}function i(t){var i=t.data.node,n=o.settings.embedObjects({prefix:e});n("enableHovering")&&(o.domElements.groups.hovers.removeChild(o.domElements.hovers[i.id]),r=null,delete o.domElements.hovers[i.id],o.domElements.groups.nodes.appendChild(o.domElements.nodes[i.id]))}function n(){if(r){var t=o.settings.embedObjects({prefix:e});o.domElements.groups.hovers.removeChild(o.domElements.hovers[r.id]),delete o.domElements.hovers[r.id];var i=(s[r.type]||s.def).create(r,o.domElements.nodes[r.id],o.measurementCanvas,t);o.domElements.hovers[r.id]=i,o.domElements.groups.hovers.appendChild(i)}}var r,s=sigma.svg.hovers,o=this;this.bind("overNode",t),this.bind("outNode",i),this.bind("render",n)},sigma.renderers.svg.prototype.resize=function(t,i){var n=this.width,r=this.height,s=1;return t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),(n!==this.width||r!==this.height)&&(this.domElements.graph.style.width=t+"px",this.domElements.graph.style.height=i+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",t*s),this.domElements.graph.setAttribute("height",i*s))),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(e,t,i,n){if("object"!=typeof n)throw"sigma.renderers.webgl: Wrong arguments.";if(!(n.container instanceof HTMLElement))throw"Container not found.";var r,s,o,a;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=n,this.container=this.options.container,this.settings="object"==typeof n.settings&&n.settings?i.embedObjects(n.settings):i,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),this.settings(n,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],o=this.options.captors||[sigma.captors.mouse,sigma.captors.touch],r=0,s=o.length;s>r;r++)a="function"==typeof o[r]?o[r]:sigma.captors[o[r]],this.captors.push(new a(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var e,t,i,n,r,s,o=this.graph,a=sigma.utils.extend(a,this.options);for(n in this.nodeFloatArrays)delete this.nodeFloatArrays[n];for(n in this.edgeFloatArrays)delete this.edgeFloatArrays[n];for(e=o.edges(),t=0,i=e.length;i>t;t++)r=e[t].type||this.settings(a,"defaultEdgeType"),n=r&&sigma.webgl.edges[r]?r:"def",this.edgeFloatArrays[n]||(this.edgeFloatArrays[n]={edges:[]}),this.edgeFloatArrays[n].edges.push(e[t]);for(e=o.nodes(),t=0,i=e.length;i>t;t++)r=e[t].type||this.settings(a,"defaultNodeType"),n=r&&sigma.webgl.nodes[r]?r:"def",this.nodeFloatArrays[n]||(this.nodeFloatArrays[n]={nodes:[]}),this.nodeFloatArrays[n].nodes.push(e[t]);for(n in this.edgeFloatArrays)for(s=sigma.webgl.edges[n],e=this.edgeFloatArrays[n].edges,t=0,i=e.length;i>t;t++)this.edgeFloatArrays[n].array||(this.edgeFloatArrays[n].array=new Float32Array(e.length*s.POINTS*s.ATTRIBUTES)),e[t].hidden||o.nodes(e[t].source).hidden||o.nodes(e[t].target).hidden||s.addEdge(e[t],o.nodes(e[t].source),o.nodes(e[t].target),this.edgeFloatArrays[n].array,t*s.POINTS*s.ATTRIBUTES,a.prefix,this.settings);for(n in this.nodeFloatArrays)for(s=sigma.webgl.nodes[n],e=this.nodeFloatArrays[n].nodes,t=0,i=e.length;i>t;t++)this.nodeFloatArrays[n].array||(this.nodeFloatArrays[n].array=new Float32Array(e.length*s.POINTS*s.ATTRIBUTES)),e[t].hidden||s.addNode(e[t],this.nodeFloatArrays[n].array,t*s.POINTS*s.ATTRIBUTES,a.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(t){var i,n,r,s,o,a,l=this,c=(this.graph,this.contexts.nodes),u=this.contexts.edges,h=this.camera.getMatrix(),d=sigma.utils.extend(t,this.options),f=this.settings(d,"drawLabels"),p=this.settings(d,"drawEdges"),g=this.settings(d,"drawNodes");this.resize(!1),this.settings(d,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(p=!1),this.clear(),h=sigma.utils.matrices.multiply(h,sigma.utils.matrices.translation(this.width/2,this.height/2));for(s in this.jobs)conrad.hasJob(s)&&conrad.killJob(s);if(p)if(this.settings(d,"batchEdgesDrawing"))(function(){var e,t,i,n,r,s,o,a,l;i="edges_"+this.conradId,l=this.settings(d,"webglEdgesBatchSize"),e=Object.keys(this.edgeFloatArrays),e.length&&(t=0,a=sigma.webgl.edges[e[t]],r=this.edgeFloatArrays[e[t]].array,o=0,s=Math.min(o+l*a.POINTS,r.length/a.ATTRIBUTES),n=function(){return this.edgePrograms[e[t]]||(this.edgePrograms[e[t]]=a.initProgram(u)),s>o&&(u.useProgram(this.edgePrograms[e[t]]),a.render(u,this.edgePrograms[e[t]],r,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(d,"webglOversamplingRatio"),start:o,count:s-o})),s>=r.length/a.ATTRIBUTES&&t===e.length-1?(delete this.jobs[i],!1):(s>=r.length/a.ATTRIBUTES?(t++,r=this.edgeFloatArrays[e[t]].array,a=sigma.webgl.edges[e[t]],o=0,s=Math.min(o+l*a.POINTS,r.length/a.ATTRIBUTES)):(o=s,s=Math.min(o+l*a.POINTS,r.length/a.ATTRIBUTES)),!0)},this.jobs[i]=n,conrad.addJob(i,n.bind(this)))}).call(this);else for(s in this.edgeFloatArrays)a=sigma.webgl.edges[s],this.edgePrograms[s]||(this.edgePrograms[s]=a.initProgram(u)),this.edgeFloatArrays[s]&&(u.useProgram(this.edgePrograms[s]),a.render(u,this.edgePrograms[s],this.edgeFloatArrays[s].array,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(d,"webglOversamplingRatio")}));if(g){c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.enable(c.BLEND);for(s in this.nodeFloatArrays)a=sigma.webgl.nodes[s],this.nodePrograms[s]||(this.nodePrograms[s]=a.initProgram(c)),this.nodeFloatArrays[s]&&(c.useProgram(this.nodePrograms[s]),a.render(c,this.nodePrograms[s],this.nodeFloatArrays[s].array,{settings:this.settings,matrix:h,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(d,"webglOversamplingRatio")}))}if(f)for(i=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(e,e,{nodes:i,edges:[],width:this.width,height:this.height}),o=function(e){return l.settings({prefix:l.camera.prefix},e)},n=0,r=i.length;r>n;n++)i[n].hidden||(sigma.canvas.labels[i[n].type||this.settings(d,"defaultNodeType")]||sigma.canvas.labels.def)(i[n],this.contexts.labels,o);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(e,t,i){var n=document.createElement(e),r=this;n.style.position="absolute",n.setAttribute("class","sigma-"+t),this.domElements[t]=n,this.container.appendChild(n),"canvas"===e.toLowerCase()&&(this.contexts[t]=n.getContext(i?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),i&&(n.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),n.addEventListener("webglcontextrestored",function(e){r.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(t,i){var n,r=this.width,s=this.height;if(t!==e&&i!==e?(this.width=t,this.height=i):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,i=this.height),r!==this.width||s!==this.height)for(n in this.domElements)this.domElements[n].style.width=t+"px",this.domElements[n].style.height=i+"px","canvas"===this.domElements[n].tagName.toLowerCase()&&(this.contexts[n]&&this.contexts[n].scale?(this.domElements[n].setAttribute("width",t+"px"),this.domElements[n].setAttribute("height",i+"px")):(this.domElements[n].setAttribute("width",t*this.settings("webglOversamplingRatio")+"px"),this.domElements[n].setAttribute("height",i*this.settings("webglOversamplingRatio")+"px")));for(n in this.contexts)this.contexts[n]&&this.contexts[n].viewport&&this.contexts[n].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){var e;for(e in this.domElements)"CANVAS"===this.domElements[e].tagName&&(this.domElements[e].width=this.domElements[e].width);return this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();delete this.captors;for(e in this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var t,i=!!e.WebGLRenderingContext;if(i){t=document.createElement("canvas");try{i=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(n){i=!1}}sigma.renderers.def=i?sigma.renderers.webgl:sigma.renderers.canvas}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,i){var n,r=i("prefix")||"",s=e[r+"size"];s<i("labelThreshold")||e.label&&"string"==typeof e.label&&(n="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*s,t.font=(i("fontStyle")?i("fontStyle")+" ":"")+n+"px "+i("font"),t.fillStyle="node"===i("labelColor")?e.color||i("defaultNodeColor"):i("defaultLabelColor"),t.fillText(e.label,Math.round(e[r+"x"]+s+3),Math.round(e[r+"y"]+n/3)))}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,i){var n,r,s,o,a,l=i("hoverFontStyle")||i("fontStyle"),c=i("prefix")||"",u=e[c+"size"],h="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*u;t.font=(l?l+" ":"")+h+"px "+(i("hoverFont")||i("font")),t.beginPath(),t.fillStyle="node"===i("labelHoverBGColor")?e.color||i("defaultNodeColor"):i("defaultHoverLabelBGColor"),e.label&&i("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=i("labelHoverShadowColor")),e.label&&"string"==typeof e.label&&(n=Math.round(e[c+"x"]-h/2-2),r=Math.round(e[c+"y"]-h/2-2),s=Math.round(t.measureText(e.label).width+h/2+u+7),o=Math.round(h+4),a=Math.round(h/2+2),t.moveTo(n,r+a),t.arcTo(n,r,n+a,r,a),t.lineTo(n+s,r),t.lineTo(n+s,r+o),t.lineTo(n+a,r+o),t.arcTo(n,r+o,n,r+o-a,a),t.lineTo(n,r+a),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),i("borderSize")>0&&(t.beginPath(),t.fillStyle="node"===i("nodeBorderColor")?e.color||i("defaultNodeColor"):i("defaultNodeBorderColor"),t.arc(e[c+"x"],e[c+"y"],u+i("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill());var d=sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def;d(e,t,i),e.label&&"string"==typeof e.label&&(t.fillStyle="node"===i("labelHoverColor")?e.color||i("defaultNodeColor"):i("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[c+"x"]+u+3),Math.round(e[c+"y"]+h/3)))}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(e,t,i){var n=i("prefix")||"";t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.arc(e[n+"x"],e[n+"y"],e[n+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,t,i,n,r){var s=e.color,o=r("prefix")||"",a=e[o+"size"]||1,l=r("edgeColor"),c=r("defaultNodeColor"),u=r("defaultEdgeColor"),h={},d=t[o+"size"],f=t[o+"x"],p=t[o+"y"],g=i[o+"x"],m=i[o+"y"];if(h=t.id===i.id?sigma.utils.getSelfLoopControlPoints(f,p,d):sigma.utils.getQuadraticControlPoint(f,p,g,m),!s)switch(l){case"source":s=t.color||c;break;case"target":s=i.color||c;break;default:s=u}n.strokeStyle=s,n.lineWidth=a,n.beginPath(),n.moveTo(f,p),t.id===i.id?n.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,g,m):n.quadraticCurveTo(h.x,h.y,g,m),n.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,i,n,r){var s=e.color,o=r("prefix")||"",a=r("edgeColor"),l=r("defaultNodeColor"),c=r("defaultEdgeColor"),u=e[o+"size"]||1,h=i[o+"size"],d=t[o+"x"],f=t[o+"y"],p=i[o+"x"],g=i[o+"y"],m=Math.max(2.5*u,r("minArrowSize")),v=Math.sqrt(Math.pow(p-d,2)+Math.pow(g-f,2)),y=d+(p-d)*(v-m-h)/v,b=f+(g-f)*(v-m-h)/v,x=(p-d)*m/v,w=(g-f)*m/v;if(!s)switch(a){case"source":s=t.color||l;break;case"target":s=i.color||l;break;default:s=c}n.strokeStyle=s,n.lineWidth=u,n.beginPath(),n.moveTo(d,f),n.lineTo(y,b),n.stroke(),n.fillStyle=s,n.beginPath(),n.moveTo(y+x,b+w),n.lineTo(y+.6*w,b-.6*x),n.lineTo(y-.6*w,b+.6*x),n.lineTo(y+x,b+w),n.closePath(),n.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,t,i,n,r){var s,o,a,l,c,u=e.color,h=r("prefix")||"",d=r("edgeColor"),f=r("defaultNodeColor"),p=r("defaultEdgeColor"),g={},m=e[h+"size"]||1,v=i[h+"size"],y=t[h+"x"],b=t[h+"y"],x=i[h+"x"],w=i[h+"y"],k=Math.max(2.5*m,r("minArrowSize"));if(g=t.id===i.id?sigma.utils.getSelfLoopControlPoints(y,b,v):sigma.utils.getQuadraticControlPoint(y,b,x,w),t.id===i.id?(s=Math.sqrt(Math.pow(x-g.x1,2)+Math.pow(w-g.y1,2)),o=g.x1+(x-g.x1)*(s-k-v)/s,a=g.y1+(w-g.y1)*(s-k-v)/s,l=(x-g.x1)*k/s,c=(w-g.y1)*k/s):(s=Math.sqrt(Math.pow(x-g.x,2)+Math.pow(w-g.y,2)),o=g.x+(x-g.x)*(s-k-v)/s,a=g.y+(w-g.y)*(s-k-v)/s,l=(x-g.x)*k/s,c=(w-g.y)*k/s),!u)switch(d){case"source":u=t.color||f;break;case"target":u=i.color||f;break;default:u=p}n.strokeStyle=u,n.lineWidth=m,n.beginPath(),n.moveTo(y,b),t.id===i.id?n.bezierCurveTo(g.x2,g.y2,g.x1,g.y1,o,a):n.quadraticCurveTo(g.x,g.y,o,a),n.stroke(),n.fillStyle=u,n.beginPath(),n.moveTo(o+l,a+c),n.lineTo(o+.6*c,a-.6*l),n.lineTo(o-.6*c,a+.6*l),n.lineTo(o+l,a+c),n.closePath(),n.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,i,n,r){var s=e.color,o=r("prefix")||"",a=e[o+"size"]||1,l=r("edgeColor"),c=r("defaultNodeColor"),u=r("defaultEdgeColor");if(!s)switch(l){case"source":s=t.color||c;break;case"target":s=i.color||c;break;default:s=u}s="edge"===r("edgeHoverColor")?e.hover_color||s:e.hover_color||r("defaultEdgeHoverColor")||s,a*=r("edgeHoverSizeRatio"),n.strokeStyle=s,n.lineWidth=a,n.beginPath(),n.moveTo(t[o+"x"],t[o+"y"]),n.lineTo(i[o+"x"],i[o+"y"]),n.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,i,n,r){var s=e.color,o=r("prefix")||"",a=r("edgeHoverSizeRatio")*(e[o+"size"]||1),l=r("edgeColor"),c=r("defaultNodeColor"),u=r("defaultEdgeColor"),h={},d=t[o+"size"],f=t[o+"x"],p=t[o+"y"],g=i[o+"x"],m=i[o+"y"];if(h=t.id===i.id?sigma.utils.getSelfLoopControlPoints(f,p,d):sigma.utils.getQuadraticControlPoint(f,p,g,m),!s)switch(l){case"source":s=t.color||c;break;case"target":s=i.color||c;break;default:s=u}s="edge"===r("edgeHoverColor")?e.hover_color||s:e.hover_color||r("defaultEdgeHoverColor")||s,n.strokeStyle=s,n.lineWidth=a,n.beginPath(),n.moveTo(f,p),t.id===i.id?n.bezierCurveTo(h.x1,h.y1,h.x2,h.y2,g,m):n.quadraticCurveTo(h.x,h.y,g,m),n.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,i,n,r){var s=e.color,o=r("prefix")||"",a=r("edgeColor"),l=r("defaultNodeColor"),c=r("defaultEdgeColor"),u=e[o+"size"]||1,h=i[o+"size"],d=t[o+"x"],f=t[o+"y"],p=i[o+"x"],g=i[o+"y"];u=e.hover?r("edgeHoverSizeRatio")*u:u;var m=2.5*u,v=Math.sqrt(Math.pow(p-d,2)+Math.pow(g-f,2)),y=d+(p-d)*(v-m-h)/v,b=f+(g-f)*(v-m-h)/v,x=(p-d)*m/v,w=(g-f)*m/v;if(!s)switch(a){case"source":s=t.color||l;break;case"target":s=i.color||l;break;default:s=c}s="edge"===r("edgeHoverColor")?e.hover_color||s:e.hover_color||r("defaultEdgeHoverColor")||s,n.strokeStyle=s,n.lineWidth=u,n.beginPath(),n.moveTo(d,f),n.lineTo(y,b),n.stroke(),n.fillStyle=s,n.beginPath(),n.moveTo(y+x,b+w),n.lineTo(y+.6*w,b-.6*x),n.lineTo(y-.6*w,b+.6*x),n.lineTo(y+x,b+w),n.closePath(),n.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,i,n,r){var s,o,a,l,c,u,h=e.color,d=r("prefix")||"",f=r("edgeColor"),p=r("defaultNodeColor"),g=r("defaultEdgeColor"),m={},v=r("edgeHoverSizeRatio")*(e[d+"size"]||1),y=i[d+"size"],b=t[d+"x"],x=t[d+"y"],w=i[d+"x"],k=i[d+"y"];if(m=t.id===i.id?sigma.utils.getSelfLoopControlPoints(b,x,y):sigma.utils.getQuadraticControlPoint(b,x,w,k),t.id===i.id?(s=Math.sqrt(Math.pow(w-m.x1,2)+Math.pow(k-m.y1,2)),o=2.5*v,a=m.x1+(w-m.x1)*(s-o-y)/s,l=m.y1+(k-m.y1)*(s-o-y)/s,c=(w-m.x1)*o/s,u=(k-m.y1)*o/s):(s=Math.sqrt(Math.pow(w-m.x,2)+Math.pow(k-m.y,2)),o=2.5*v,a=m.x+(w-m.x)*(s-o-y)/s,l=m.y+(k-m.y)*(s-o-y)/s,c=(w-m.x)*o/s,u=(k-m.y)*o/s),!h)switch(f){case"source":h=t.color||p;break;case"target":h=i.color||p;break;default:h=g}h="edge"===r("edgeHoverColor")?e.hover_color||h:e.hover_color||r("defaultEdgeHoverColor")||h,n.strokeStyle=h,n.lineWidth=v,n.beginPath(),n.moveTo(b,x),t.id===i.id?n.bezierCurveTo(m.x2,m.y2,m.x1,m.y1,a,l):n.quadraticCurveTo(m.x,m.y,a,l),n.stroke(),n.fillStyle=h,n.beginPath(),n.moveTo(a+c,l+u),n.lineTo(a+.6*u,l-.6*c),n.lineTo(a-.6*u,l+.6*c),n.lineTo(a+c,l+u),n.closePath(),n.fill()}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,i,n,r){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,n,r),(sigma.canvas.hovers[i.type]||sigma.canvas.hovers.def)(i,n,r)}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,t,i){var n,r,s,o,a,l,c,u,h=this.graph.nodes(),d=this.graph.edges(),f=this.settings.embedObjects(i||{}),p=f("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),g=p.minX,m=p.minY,v=p.maxX,y=p.maxY,b=p.sizeMax,x=p.weightMax,w=f("width")||1,k=f("height")||1,C=f("autoRescale"),S={nodePosition:1,nodeSize:1,edgeSize:1};for(C instanceof Array||(C=["nodePosition","nodeSize","edgeSize"]),n=0,r=C.length;r>n;n++)if(!S[C[n]])throw new Error('The rescale setting "'+C[n]+'" is not recognized.');var E=~C.indexOf("nodePosition"),M=~C.indexOf("nodeSize"),L=~C.indexOf("edgeSize");for(c="outside"===f("scalingMode")?Math.max(w/Math.max(v-g,1),k/Math.max(y-m,1)):Math.min(w/Math.max(v-g,1),k/Math.max(y-m,1)),u=(f("rescaleIgnoreSize")?0:(f("maxNodeSize")||b)/c)+(f("sideMargin")||0),v+=u,g-=u,y+=u,m-=u,c="outside"===f("scalingMode")?Math.max(w/Math.max(v-g,1),k/Math.max(y-m,1)):Math.min(w/Math.max(v-g,1),k/Math.max(y-m,1)),f("maxNodeSize")||f("minNodeSize")?f("maxNodeSize")===f("minNodeSize")?(s=0,o=+f("maxNodeSize")):(s=(f("maxNodeSize")-f("minNodeSize"))/b,o=+f("minNodeSize")):(s=1,o=0),f("maxEdgeSize")||f("minEdgeSize")?f("maxEdgeSize")===f("minEdgeSize")?(a=0,l=+f("minEdgeSize")):(a=(f("maxEdgeSize")-f("minEdgeSize"))/x,l=+f("minEdgeSize")):(a=1,l=0),n=0,r=d.length;r>n;n++)d[n][t+"size"]=d[n][e+"size"]*(L?a:1)+(L?l:0);for(n=0,r=h.length;r>n;n++)h[n][t+"size"]=h[n][e+"size"]*(M?s:1)+(M?o:0),h[n][t+"x"]=(h[n][e+"x"]-(v+g)/2)*(E?c:1),h[n][t+"y"]=(h[n][e+"y"]-(y+m)/2)*(E?c:1)},sigma.utils.getBoundaries=function(e,t,i){var n,r,s=e.edges(),o=e.nodes(),a=-(1/0),l=-(1/0),c=1/0,u=1/0,h=-(1/0),d=-(1/0);if(i)for(n=0,r=s.length;r>n;n++)a=Math.max(s[n][t+"size"],a);for(n=0,r=o.length;r>n;n++)l=Math.max(o[n][t+"size"],l),h=Math.max(o[n][t+"x"],h),c=Math.min(o[n][t+"x"],c),d=Math.max(o[n][t+"y"],d),u=Math.min(o[n][t+"y"],u);return a=a||1,l=l||1,{weightMax:a,sizeMax:l,minX:c,minY:u,maxX:h,maxY:d}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(e,t){var i,n,r;if(t+""!=e+""){for(r=this.graph.nodes(),i=0,n=r.length;n>i;i++)r[i][t+"x"]=r[i][e+"x"],r[i][t+"y"]=r[i][e+"y"],r[i][t+"size"]=r[i][e+"size"];for(r=this.graph.edges(),i=0,n=r.length;n>i;i++)r[i][t+"size"]=r[i][e+"size"]}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var t=function(){var e=0;return function(){return""+ ++e}}();sigma.misc.animation.camera=function(i,n,r){if(!(i instanceof sigma.classes.camera&&"object"==typeof n&&n))throw"animation.camera: Wrong arguments.";if("number"!=typeof n.x&&"number"!=typeof n.y&&"number"!=typeof n.ratio&&"number"!=typeof n.angle)throw"There must be at least one valid coordinate in the given val.";var s,o,a,l,c,u,h=r||{},d=sigma.utils.dateNow();return u={x:i.x,y:i.y,ratio:i.ratio,angle:i.angle},c=h.duration,l="function"!=typeof h.easing?sigma.utils.easings[h.easing||"quadraticInOut"]:h.easing,s=function(){var t,r=h.duration?(sigma.utils.dateNow()-d)/h.duration:1;r>=1?(i.isAnimated=!1,i.goTo({x:n.x!==e?n.x:u.x,y:n.y!==e?n.y:u.y,ratio:n.ratio!==e?n.ratio:u.ratio,angle:n.angle!==e?n.angle:u.angle}),cancelAnimationFrame(o),delete sigma.misc.animation.running[o],"function"==typeof h.onComplete&&h.onComplete()):(t=l(r),i.isAnimated=!0,i.goTo({x:n.x!==e?u.x+(n.x-u.x)*t:u.x,y:n.y!==e?u.y+(n.y-u.y)*t:u.y,ratio:n.ratio!==e?u.ratio+(n.ratio-u.ratio)*t:u.ratio,angle:n.angle!==e?u.angle+(n.angle-u.angle)*t:u.angle}),"function"==typeof h.onNewFrame&&h.onNewFrame(),a.frameId=requestAnimationFrame(s))},o=t(),a={frameId:requestAnimationFrame(s),target:i,type:"camera",options:h,fn:s},sigma.misc.animation.running[o]=a,o},sigma.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=sigma.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete sigma.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},sigma.misc.animation.killAll=function(e){var t,i,n=0,r="string"==typeof e?e:null,s="object"==typeof e?e:null,o=sigma.misc.animation.running;for(i in o)r&&o[i].type!==r||s&&o[i].target!==s||(t=sigma.misc.animation.running[i],cancelAnimationFrame(t.frameId),delete sigma.misc.animation.running[i],"camera"===t.type&&(t.target.isAnimated=!1),n++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return n},sigma.misc.animation.has=function(e){var t,i="string"==typeof e?e:null,n="object"==typeof e?e:null,r=sigma.misc.animation.running;for(t in r)if(!(i&&r[t].type!==i||n&&r[t].target!==n))return!0;return!1}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(t){function i(e){e&&(a="x"in e.data?e.data.x:a,l="y"in e.data?e.data.y:l);var i,n,r,s,o,u,h,d,f=[],p=a+c.width/2,g=l+c.height/2,m=c.camera.cameraPosition(a,l),v=c.camera.quadtree.point(m.x,m.y);if(v.length)for(i=0,r=v.length;r>i;i++)if(s=v[i],o=s[t+"x"],u=s[t+"y"],h=s[t+"size"],!s.hidden&&p>o-h&&o+h>p&&g>u-h&&u+h>g&&Math.sqrt(Math.pow(p-o,2)+Math.pow(g-u,2))<h){for(d=!1,n=0;n<f.length;n++)if(s.size>f[n].size){f.splice(n,0,s),d=!0;break}d||f.push(s)}return f}function n(i){function n(e,t){for(v=!1,o=0;o<e.length;o++)if(t.size>e[o].size){e.splice(o,0,t),v=!0;break}v||e.push(t)}if(!c.settings("enableEdgeHovering"))return[];var r=sigma.renderers.canvas&&c instanceof sigma.renderers.canvas;if(!r)throw new Error("The edge events feature is not compatible with the WebGL renderer");i&&(a="x"in i.data?i.data.x:a,l="y"in i.data?i.data.y:l);var s,o,u,h,d,f,p,g,m,v,y=c.settings("edgeHoverPrecision"),b={},x=[],w=a+c.width/2,k=l+c.height/2,C=c.camera.cameraPosition(a,l),S=[];if(r){var E=c.camera.quadtree.area(c.camera.getRectangle(c.width,c.height));for(h=E,s=0,u=h.length;u>s;s++)b[h[s].id]=h[s]}if(c.camera.edgequadtree!==e&&(S=c.camera.edgequadtree.point(C.x,C.y)),S.length)for(s=0,u=S.length;u>s;s++)d=S[s],p=c.graph.nodes(d.source),g=c.graph.nodes(d.target),f=d[t+"size"]||d["read_"+t+"size"],!d.hidden&&!p.hidden&&!g.hidden&&(!r||b[d.source]||b[d.target])&&sigma.utils.getDistance(p[t+"x"],p[t+"y"],w,k)>p[t+"size"]&&sigma.utils.getDistance(g[t+"x"],g[t+"y"],w,k)>g[t+"size"]&&("curve"==d.type||"curvedArrow"==d.type?p.id===g.id?(m=sigma.utils.getSelfLoopControlPoints(p[t+"x"],p[t+"y"],p[t+"size"]),sigma.utils.isPointOnBezierCurve(w,k,p[t+"x"],p[t+"y"],g[t+"x"],g[t+"y"],m.x1,m.y1,m.x2,m.y2,Math.max(f,y))&&n(x,d)):(m=sigma.utils.getQuadraticControlPoint(p[t+"x"],p[t+"y"],g[t+"x"],g[t+"y"]),sigma.utils.isPointOnQuadraticCurve(w,k,p[t+"x"],p[t+"y"],g[t+"x"],g[t+"y"],m.x,m.y,Math.max(f,y))&&n(x,d)):sigma.utils.isPointOnSegment(w,k,p[t+"x"],p[t+"y"],g[t+"x"],g[t+"y"],Math.max(f,y))&&n(x,d));return x}function r(e){function t(e){c.settings("eventsEnabled")&&(c.dispatchEvent("click",e.data),l=i(e),u=n(e),l.length?(c.dispatchEvent("clickNode",{node:l[0],captor:e.data}),c.dispatchEvent("clickNodes",{node:l,captor:e.data})):u.length?(c.dispatchEvent("clickEdge",{edge:u[0],captor:e.data}),c.dispatchEvent("clickEdges",{edge:u,captor:e.data})):c.dispatchEvent("clickStage",{captor:e.data}))}function r(e){c.settings("eventsEnabled")&&(c.dispatchEvent("doubleClick",e.data),l=i(e),u=n(e),l.length?(c.dispatchEvent("doubleClickNode",{node:l[0],captor:e.data}),c.dispatchEvent("doubleClickNodes",{node:l,captor:e.data})):u.length?(c.dispatchEvent("doubleClickEdge",{edge:u[0],captor:e.data}),c.dispatchEvent("doubleClickEdges",{edge:u,captor:e.data})):c.dispatchEvent("doubleClickStage",{captor:e.data}))}function s(e){c.settings("eventsEnabled")&&(c.dispatchEvent("rightClick",e.data),l=i(e),u=n(e),l.length?(c.dispatchEvent("rightClickNode",{node:l[0],captor:e.data}),c.dispatchEvent("rightClickNodes",{node:l,captor:e.data})):u.length?(c.dispatchEvent("rightClickEdge",{edge:u[0],captor:e.data}),c.dispatchEvent("rightClickEdges",{edge:u,captor:e.data})):c.dispatchEvent("rightClickStage",{captor:e.data}))}function o(e){if(c.settings("eventsEnabled")){var t,i,n,r,s=[],o=[];for(t in h)s.push(h[t]);for(h={},i=0,n=s.length;n>i;i++)c.dispatchEvent("outNode",{node:s[i],captor:e.data});for(s.length&&c.dispatchEvent("outNodes",{nodes:s,captor:e.data}),d={},i=0,r=o.length;r>i;i++)c.dispatchEvent("outEdge",{edge:o[i],captor:e.data});o.length&&c.dispatchEvent("outEdges",{edges:o,captor:e.data})}}function a(e){if(c.settings("eventsEnabled")){l=i(e),u=n(e);var t,r,s,o,a=[],f=[],p={},g=l.length,m=[],v=[],y={},b=u.length;for(t=0;g>t;t++)s=l[t],p[s.id]=s,h[s.id]||(f.push(s),h[s.id]=s);for(r in h)p[r]||(a.push(h[r]),delete h[r]);for(t=0,g=f.length;g>t;t++)c.dispatchEvent("overNode",{node:f[t],captor:e.data});for(t=0,g=a.length;g>t;t++)c.dispatchEvent("outNode",{node:a[t],captor:e.data});for(f.length&&c.dispatchEvent("overNodes",{nodes:f,captor:e.data}),a.length&&c.dispatchEvent("outNodes",{nodes:a,captor:e.data}),t=0;b>t;t++)o=u[t],y[o.id]=o,d[o.id]||(v.push(o),d[o.id]=o);for(r in d)y[r]||(m.push(d[r]),delete d[r]);for(t=0,b=v.length;b>t;t++)c.dispatchEvent("overEdge",{edge:v[t],captor:e.data});for(t=0,b=m.length;b>t;t++)c.dispatchEvent("outEdge",{edge:m[t],captor:e.data});v.length&&c.dispatchEvent("overEdges",{edges:v,captor:e.data}),m.length&&c.dispatchEvent("outEdges",{edges:m,captor:e.data})}}var l,u,h={},d={};e.bind("click",t),e.bind("mousedown",a),e.bind("mouseup",a),e.bind("mousemove",a),e.bind("mouseout",o),e.bind("doubleclick",r),e.bind("rightclick",s),c.bind("render",a)}var s,o,a,l,c=this;for(s=0,o=this.captors.length;o>s;s++)r(this.captors[s])}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(e){function t(e){this.attr=function(t){return e.getAttributeNS(null,t)},this.tag=e.tagName,this["class"]=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this["class"].indexOf(o.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this["class"].indexOf(o.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this["class"].indexOf(o.settings("classPrefix")+"-hover")}}function i(e){if(o.settings("eventsEnabled")){o.dispatchEvent("click",e);var i=new t(e.target);i.isNode()?o.dispatchEvent("clickNode",{node:a.nodes(i.attr("data-node-id"))}):o.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation()}}function n(e){if(o.settings("eventsEnabled")){o.dispatchEvent("doubleClick",e);var i=new t(e.target);i.isNode()?o.dispatchEvent("doubleClickNode",{node:a.nodes(i.attr("data-node-id"))}):o.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation()}}function r(e){var i=e.toElement||e.target;if(o.settings("eventsEnabled")&&i){var n=new t(i);if(n.isNode())o.dispatchEvent("overNode",{node:a.nodes(n.attr("data-node-id"))});else if(n.isEdge()){var r=a.edges(n.attr("data-edge-id"));o.dispatchEvent("overEdge",{edge:r,source:a.nodes(r.source),target:a.nodes(r.target)})}}}function s(e){var i=e.fromElement||e.originalTarget;if(o.settings("eventsEnabled")){var n=new t(i);if(n.isNode())o.dispatchEvent("outNode",{node:a.nodes(n.attr("data-node-id"))});else if(n.isEdge()){var r=a.edges(n.attr("data-edge-id"));o.dispatchEvent("outEdge",{
edge:r,source:a.nodes(r.source),target:a.nodes(r.target)})}}}var o=this,a=this.graph;e.addEventListener("click",i,!1),sigma.utils.doubleClick(e,"click",n),e.addEventListener("touchstart",i,!1),sigma.utils.doubleClick(e,"touchstart",n),e.addEventListener("mouseover",r,!0),e.addEventListener("mouseout",s,!0)}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(e){function t(){i.contexts.hover.canvas.width=i.contexts.hover.canvas.width;var t,s,o,a,l,c=i.settings("defaultNodeType"),u=i.settings("defaultEdgeType"),h=sigma.canvas.hovers,d=sigma.canvas.edgehovers,f=sigma.canvas.extremities,p=i.settings.embedObjects({prefix:e});if(p("enableHovering")&&p("singleHover")&&Object.keys(n).length&&(a=n[Object.keys(n)[0]],(h[a.type]||h[c]||h.def)(a,i.contexts.hover,p)),p("enableHovering")&&!p("singleHover"))for(t in n)(h[n[t].type]||h[c]||h.def)(n[t],i.contexts.hover,p);if(p("enableEdgeHovering")&&p("singleHover")&&Object.keys(r).length&&(l=r[Object.keys(r)[0]],s=i.graph.nodes(l.source),o=i.graph.nodes(l.target),l.hidden||((d[l.type]||d[u]||d.def)(l,s,o,i.contexts.hover,p),p("edgeHoverExtremities")?(f[l.type]||f.def)(l,s,o,i.contexts.hover,p):((sigma.canvas.nodes[s.type]||sigma.canvas.nodes.def)(s,i.contexts.hover,p),(sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,i.contexts.hover,p)))),p("enableEdgeHovering")&&!p("singleHover"))for(t in r)l=r[t],s=i.graph.nodes(l.source),o=i.graph.nodes(l.target),l.hidden||((d[l.type]||d[u]||d.def)(l,s,o,i.contexts.hover,p),p("edgeHoverExtremities")?(f[l.type]||f.def)(l,s,o,i.contexts.hover,p):((sigma.canvas.nodes[s.type]||sigma.canvas.nodes.def)(s,i.contexts.hover,p),(sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,i.contexts.hover,p)))}var i=this,n={},r={};this.bind("overNode",function(e){var i=e.data.node;i.hidden||(n[i.id]=i,t())}),this.bind("outNode",function(e){delete n[e.data.node.id],t()}),this.bind("overEdge",function(e){var i=e.data.edge;i.hidden||(r[i.id]=i,t())}),this.bind("outEdge",function(e){delete r[e.data.edge.id],t()}),this.bind("render",function(e){t()})}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers"),sigma.utils.pkg("sigma.utils"),sigma.utils.xhr=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject){e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(t in e)try{return new ActiveXObject(e[t])}catch(i){}}return null},sigma.parsers.json=function(e,t,i){var n,r=sigma.utils.xhr();if(!r)throw"XMLHttpRequest not supported, cannot load the file.";r.open("GET",e,!0),r.onreadystatechange=function(){4===r.readyState&&(n=JSON.parse(r.responseText),t instanceof sigma?(t.graph.clear(),t.graph.read(n)):"object"==typeof t?(t.graph=n,t=new sigma(t)):"function"==typeof t&&(i=t,t=null),i&&i(t||n))},r.send()}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.neo4j"),sigma.utils.pkg("sigma.utils"),sigma.utils.pkg("sigma.parsers"),sigma.neo4j.send=function(e,t,i,n,r){var s,o,a,l=sigma.utils.xhr();if(s=e,"object"==typeof e&&(s=e.url,o=e.user,a=e.password),!l)throw"XMLHttpRequest not supported, cannot load the file.";s+=t,l.open(i,s,!0),o&&a&&l.setRequestHeader("Authorization","Basic "+btoa(o+":"+a)),l.setRequestHeader("Accept","application/json"),l.setRequestHeader("Content-type","application/json; charset=utf-8"),l.onreadystatechange=function(){4===l.readyState&&r(JSON.parse(l.responseText))},l.send(n)},sigma.neo4j.cypher_parse=function(e){var t,i={nodes:[],edges:[]},n={},r={};e.results[0].data.forEach(function(e){e.graph.nodes.forEach(function(e){var t={id:e.id,label:e.id,x:Math.random(),y:Math.random(),size:1,color:"#000000",neo4j_labels:e.labels,neo4j_data:e.properties};t.id in n||(n[t.id]=t)}),e.graph.relationships.forEach(function(e){var t={id:e.id,label:e.type,source:e.startNode,target:e.endNode,color:"#7D7C8E",neo4j_type:e.type,neo4j_data:e.properties};t.id in r||(r[t.id]=t)})});for(t in n)i.nodes.push(n[t]);for(t in r)i.edges.push(r[t]);return i},sigma.neo4j.cypher=function(e,t,i,n){var r,s,o="/db/data/transaction/commit";r=JSON.stringify({statements:[{statement:t,resultDataContents:["graph"],includeStats:!1}]}),s=function(e){return function(t){var n={nodes:[],edges:[]};n=sigma.neo4j.cypher_parse(t),i instanceof sigma?(i.graph.clear(),i.graph.read(n)):"object"==typeof i?(i=new sigma(i),i.graph.read(n),i.refresh()):"function"==typeof i&&(e=i,i=null),e&&e(i||n)}},sigma.neo4j.send(e,o,"POST",r,s(n))},sigma.neo4j.getLabels=function(e,t){sigma.neo4j.send(e,"/db/data/labels","GET",null,t)},sigma.neo4j.getTypes=function(e,t){sigma.neo4j.send(e,"/db/data/relationship/types","GET",null,t)}}.call(this),function(undefined){"use strict";function crush(e){var t,i,n,r=["x","y","dx","dy","old_dx","old_dy","mass","convergence","size","fixed"],s=["source","target","weight"],o=["node","centerX","centerY","size","nextSibling","firstChild","mass","massCenterX","massCenterY"];for(i=0,n=o.length;n>i;i++)t=new RegExp("rp\\(([^,]*), '"+o[i]+"'\\)","g"),e=e.replace(t,0===i?"$1":"$1 + "+i);for(i=0,n=r.length;n>i;i++)t=new RegExp("np\\(([^,]*), '"+r[i]+"'\\)","g"),e=e.replace(t,0===i?"$1":"$1 + "+i);for(i=0,n=s.length;n>i;i++)t=new RegExp("ep\\(([^,]*), '"+s[i]+"'\\)","g"),e=e.replace(t,0===i?"$1":"$1 + "+i);return e}function getWorkerFn(){var e=crush?crush(Worker.toString()):Worker.toString();return";("+e+").call(this);"}var _root=this,inWebWorker=!("document"in _root),Worker=function(e){function t(){var e,t,i={},n=arguments.length;for(e=n-1;e>=0;e--)for(t in arguments[e])i[t]=arguments[e][t];return i}function i(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}function n(e,t){if(e%p.ppn!==0)throw"np: non correct ("+e+").";if(e!==parseInt(e))throw"np: non int.";if(t in g)return e+g[t];throw"ForceAtlas2.Worker - Inexistant node property given ("+t+")."}function r(e,t){if(e%p.ppe!==0)throw"ep: non correct ("+e+").";if(e!==parseInt(e))throw"ep: non int.";if(t in m)return e+m[t];throw"ForceAtlas2.Worker - Inexistant edge property given ("+t+")."}function s(e,t){if(e%p.ppr!==0)throw"rp: non correct ("+e+").";if(e!==parseInt(e))throw"rp: non int.";if(t in v)return e+v[t];throw"ForceAtlas2.Worker - Inexistant region property given ("+t+")."}function o(e,t,i){i=i||{};u=e,h=t,p.nodesLength=u.length,p.edgesLength=h.length,a(i)}function a(e){p.settings=t(e,p.settings)}function l(){var e,t,i,o,a,l,c,f,g,m,v,y,b,x,w;for(i=0;i<p.nodesLength;i+=p.ppn)u[n(i,"old_dx")]=u[n(i,"dx")],u[n(i,"old_dy")]=u[n(i,"dy")],u[n(i,"dx")]=0,u[n(i,"dy")]=0;if(p.settings.outboundAttractionDistribution){for(g=0,i=0;i<p.nodesLength;i+=p.ppn)g+=u[n(i,"mass")];g/=p.nodesLength}if(p.settings.barnesHutOptimize){var k,C,S=1/0,E=-(1/0),M=1/0,L=-(1/0);for(d=[],i=0;i<p.nodesLength;i+=p.ppn)S=Math.min(S,u[n(i,"x")]),E=Math.max(E,u[n(i,"x")]),M=Math.min(M,u[n(i,"y")]),L=Math.max(L,u[n(i,"y")]);for(d[s(0,"node")]=-1,d[s(0,"centerX")]=(S+E)/2,d[s(0,"centerY")]=(M+L)/2,d[s(0,"size")]=Math.max(E-S,L-M),d[s(0,"nextSibling")]=-1,d[s(0,"firstChild")]=-1,d[s(0,"mass")]=0,d[s(0,"massCenterX")]=0,d[s(0,"massCenterY")]=0,e=1,i=0;i<p.nodesLength;i+=p.ppn)for(t=0;;)if(d[s(t,"firstChild")]>=0)k=u[n(i,"x")]<d[s(t,"centerX")]?u[n(i,"y")]<d[s(t,"centerY")]?d[s(t,"firstChild")]:d[s(t,"firstChild")]+p.ppr:u[n(i,"y")]<d[s(t,"centerY")]?d[s(t,"firstChild")]+2*p.ppr:d[s(t,"firstChild")]+3*p.ppr,d[s(t,"massCenterX")]=(d[s(t,"massCenterX")]*d[s(t,"mass")]+u[n(i,"x")]*u[n(i,"mass")])/(d[s(t,"mass")]+u[n(i,"mass")]),d[s(t,"massCenterY")]=(d[s(t,"massCenterY")]*d[s(t,"mass")]+u[n(i,"y")]*u[n(i,"mass")])/(d[s(t,"mass")]+u[n(i,"mass")]),d[s(t,"mass")]+=u[n(i,"mass")],t=k;else{if(d[s(t,"node")]<0){d[s(t,"node")]=i;break}if(d[s(t,"firstChild")]=e*p.ppr,c=d[s(t,"size")]/2,f=d[s(t,"firstChild")],d[s(f,"node")]=-1,d[s(f,"centerX")]=d[s(t,"centerX")]-c,d[s(f,"centerY")]=d[s(t,"centerY")]-c,d[s(f,"size")]=c,d[s(f,"nextSibling")]=f+p.ppr,d[s(f,"firstChild")]=-1,d[s(f,"mass")]=0,d[s(f,"massCenterX")]=0,d[s(f,"massCenterY")]=0,f+=p.ppr,d[s(f,"node")]=-1,d[s(f,"centerX")]=d[s(t,"centerX")]-c,d[s(f,"centerY")]=d[s(t,"centerY")]+c,d[s(f,"size")]=c,d[s(f,"nextSibling")]=f+p.ppr,d[s(f,"firstChild")]=-1,d[s(f,"mass")]=0,d[s(f,"massCenterX")]=0,d[s(f,"massCenterY")]=0,f+=p.ppr,d[s(f,"node")]=-1,d[s(f,"centerX")]=d[s(t,"centerX")]+c,d[s(f,"centerY")]=d[s(t,"centerY")]-c,d[s(f,"size")]=c,d[s(f,"nextSibling")]=f+p.ppr,d[s(f,"firstChild")]=-1,d[s(f,"mass")]=0,d[s(f,"massCenterX")]=0,d[s(f,"massCenterY")]=0,f+=p.ppr,d[s(f,"node")]=-1,d[s(f,"centerX")]=d[s(t,"centerX")]+c,d[s(f,"centerY")]=d[s(t,"centerY")]+c,d[s(f,"size")]=c,d[s(f,"nextSibling")]=d[s(t,"nextSibling")],d[s(f,"firstChild")]=-1,d[s(f,"mass")]=0,d[s(f,"massCenterX")]=0,d[s(f,"massCenterY")]=0,e+=4,k=u[n(d[s(t,"node")],"x")]<d[s(t,"centerX")]?u[n(d[s(t,"node")],"y")]<d[s(t,"centerY")]?d[s(t,"firstChild")]:d[s(t,"firstChild")]+p.ppr:u[n(d[s(t,"node")],"y")]<d[s(t,"centerY")]?d[s(t,"firstChild")]+2*p.ppr:d[s(t,"firstChild")]+3*p.ppr,d[s(t,"mass")]=u[n(d[s(t,"node")],"mass")],d[s(t,"massCenterX")]=u[n(d[s(t,"node")],"x")],d[s(t,"massCenterY")]=u[n(d[s(t,"node")],"y")],d[s(k,"node")]=d[s(t,"node")],d[s(t,"node")]=-1,C=u[n(i,"x")]<d[s(t,"centerX")]?u[n(i,"y")]<d[s(t,"centerY")]?d[s(t,"firstChild")]:d[s(t,"firstChild")]+p.ppr:u[n(i,"y")]<d[s(t,"centerY")]?d[s(t,"firstChild")]+2*p.ppr:d[s(t,"firstChild")]+3*p.ppr,k!==C){d[s(C,"node")]=i;break}t=k}}if(p.settings.barnesHutOptimize)for(m=p.settings.scalingRatio,i=0;i<p.nodesLength;i+=p.ppn)for(t=0;;)if(d[s(t,"firstChild")]>=0){if(x=Math.sqrt(Math.pow(u[n(i,"x")]-d[s(t,"massCenterX")],2)+Math.pow(u[n(i,"y")]-d[s(t,"massCenterY")],2)),2*d[s(t,"size")]/x<p.settings.barnesHutTheta){if(v=u[n(i,"x")]-d[s(t,"massCenterX")],y=u[n(i,"y")]-d[s(t,"massCenterY")],p.settings.adjustSize?x>0?(w=m*u[n(i,"mass")]*d[s(t,"mass")]/x/x,u[n(i,"dx")]+=v*w,u[n(i,"dy")]+=y*w):0>x&&(w=-m*u[n(i,"mass")]*d[s(t,"mass")]/x,u[n(i,"dx")]+=v*w,u[n(i,"dy")]+=y*w):x>0&&(w=m*u[n(i,"mass")]*d[s(t,"mass")]/x/x,u[n(i,"dx")]+=v*w,u[n(i,"dy")]+=y*w),d[s(t,"nextSibling")]<0)break;t=d[s(t,"nextSibling")];continue}t=d[s(t,"firstChild")]}else{if(d[s(t,"node")]>=0&&d[s(t,"node")]!==i&&(v=u[n(i,"x")]-u[n(d[s(t,"node")],"x")],y=u[n(i,"y")]-u[n(d[s(t,"node")],"y")],x=Math.sqrt(v*v+y*y),p.settings.adjustSize?x>0?(w=m*u[n(i,"mass")]*u[n(d[s(t,"node")],"mass")]/x/x,u[n(i,"dx")]+=v*w,u[n(i,"dy")]+=y*w):0>x&&(w=-m*u[n(i,"mass")]*u[n(d[s(t,"node")],"mass")]/x,u[n(i,"dx")]+=v*w,u[n(i,"dy")]+=y*w):x>0&&(w=m*u[n(i,"mass")]*u[n(d[s(t,"node")],"mass")]/x/x,u[n(i,"dx")]+=v*w,u[n(i,"dy")]+=y*w)),d[s(t,"nextSibling")]<0)break;t=d[s(t,"nextSibling")]}else for(m=p.settings.scalingRatio,o=0;o<p.nodesLength;o+=p.ppn)for(a=0;o>a;a+=p.ppn)v=u[n(o,"x")]-u[n(a,"x")],y=u[n(o,"y")]-u[n(a,"y")],p.settings.adjustSize?(x=Math.sqrt(v*v+y*y)-u[n(o,"size")]-u[n(a,"size")],x>0?(w=m*u[n(o,"mass")]*u[n(a,"mass")]/x/x,u[n(o,"dx")]+=v*w,u[n(o,"dy")]+=y*w,u[n(a,"dx")]+=v*w,u[n(a,"dy")]+=y*w):0>x&&(w=100*m*u[n(o,"mass")]*u[n(a,"mass")],u[n(o,"dx")]+=v*w,u[n(o,"dy")]+=y*w,u[n(a,"dx")]-=v*w,u[n(a,"dy")]-=y*w)):(x=Math.sqrt(v*v+y*y),x>0&&(w=m*u[n(o,"mass")]*u[n(a,"mass")]/x/x,u[n(o,"dx")]+=v*w,u[n(o,"dy")]+=y*w,u[n(a,"dx")]-=v*w,u[n(a,"dy")]-=y*w));for(f=p.settings.gravity/p.settings.scalingRatio,m=p.settings.scalingRatio,i=0;i<p.nodesLength;i+=p.ppn)w=0,v=u[n(i,"x")],y=u[n(i,"y")],x=Math.sqrt(Math.pow(v,2)+Math.pow(y,2)),p.settings.strongGravityMode?x>0&&(w=m*u[n(i,"mass")]*f):x>0&&(w=m*u[n(i,"mass")]*f/x),u[n(i,"dx")]-=v*w,u[n(i,"dy")]-=y*w;for(m=1*(p.settings.outboundAttractionDistribution?g:1),l=0;l<p.edgesLength;l+=p.ppe)o=h[r(l,"source")],a=h[r(l,"target")],c=h[r(l,"weight")],b=Math.pow(c,p.settings.edgeWeightInfluence),v=u[n(o,"x")]-u[n(a,"x")],y=u[n(o,"y")]-u[n(a,"y")],p.settings.adjustSizes?(x=Math.sqrt(Math.pow(v,2)+Math.pow(y,2)-u[n(o,"size")]-u[n(a,"size")]),p.settings.linLogMode?p.settings.outboundAttractionDistribution?x>0&&(w=-m*b*Math.log(1+x)/x/u[n(o,"mass")]):x>0&&(w=-m*b*Math.log(1+x)/x):p.settings.outboundAttractionDistribution?x>0&&(w=-m*b/u[n(o,"mass")]):x>0&&(w=-m*b)):(x=Math.sqrt(Math.pow(v,2)+Math.pow(y,2)),p.settings.linLogMode?p.settings.outboundAttractionDistribution?x>0&&(w=-m*b*Math.log(1+x)/x/u[n(o,"mass")]):x>0&&(w=-m*b*Math.log(1+x)/x):p.settings.outboundAttractionDistribution?(x=1,w=-m*b/u[n(o,"mass")]):(x=1,w=-m*b)),x>0&&(u[n(o,"dx")]+=v*w,u[n(o,"dy")]+=y*w,u[n(a,"dx")]-=v*w,u[n(a,"dy")]-=y*w);var T,A,P,N;if(p.settings.adjustSizes)for(i=0;i<p.nodesLength;i+=p.ppn)u[n(i,"fixed")]||(T=Math.sqrt(Math.pow(u[n(i,"dx")],2)+Math.pow(u[n(i,"dy")],2)),T>p.maxForce&&(u[n(i,"dx")]=u[n(i,"dx")]*p.maxForce/T,u[n(i,"dy")]=u[n(i,"dy")]*p.maxForce/T),A=u[n(i,"mass")]*Math.sqrt((u[n(i,"old_dx")]-u[n(i,"dx")])*(u[n(i,"old_dx")]-u[n(i,"dx")])+(u[n(i,"old_dy")]-u[n(i,"dy")])*(u[n(i,"old_dy")]-u[n(i,"dy")])),P=Math.sqrt((u[n(i,"old_dx")]+u[n(i,"dx")])*(u[n(i,"old_dx")]+u[n(i,"dx")])+(u[n(i,"old_dy")]+u[n(i,"dy")])*(u[n(i,"old_dy")]+u[n(i,"dy")]))/2,N=.1*Math.log(1+P)/(1+Math.sqrt(A)),u[n(i,"x")]=u[n(i,"x")]+u[n(i,"dx")]*(N/p.settings.slowDown),u[n(i,"y")]=u[n(i,"y")]+u[n(i,"dy")]*(N/p.settings.slowDown));else for(i=0;i<p.nodesLength;i+=p.ppn)u[n(i,"fixed")]||(A=u[n(i,"mass")]*Math.sqrt((u[n(i,"old_dx")]-u[n(i,"dx")])*(u[n(i,"old_dx")]-u[n(i,"dx")])+(u[n(i,"old_dy")]-u[n(i,"dy")])*(u[n(i,"old_dy")]-u[n(i,"dy")])),P=Math.sqrt((u[n(i,"old_dx")]+u[n(i,"dx")])*(u[n(i,"old_dx")]+u[n(i,"dx")])+(u[n(i,"old_dy")]+u[n(i,"dy")])*(u[n(i,"old_dy")]+u[n(i,"dy")]))/2,N=u[n(i,"convergence")]*Math.log(1+P)/(1+Math.sqrt(A)),u[n(i,"convergence")]=Math.min(1,Math.sqrt(N*(Math.pow(u[n(i,"dx")],2)+Math.pow(u[n(i,"dy")],2))/(1+Math.sqrt(A)))),u[n(i,"x")]=u[n(i,"x")]+u[n(i,"dx")]*(N/p.settings.slowDown),u[n(i,"y")]=u[n(i,"y")]+u[n(i,"dy")]*(N/p.settings.slowDown));p.iterations++}function c(e){for(var t=0;e>t;t++)l();f()}var u,h,d,f,p={ppn:10,ppe:3,ppr:9,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1}},g={x:0,y:1,dx:2,dy:3,old_dx:4,old_dy:5,mass:6,convergence:7,size:8,fixed:9},m={source:0,target:1,weight:2},v={node:0,centerX:1,centerY:2,size:3,nextSibling:4,firstChild:5,mass:6,massCenterX:7,massCenterY:8};f="undefined"!=typeof window&&window.document?function(){var e;document.createEvent?(e=document.createEvent("Event"),e.initEvent("newCoords",!0,!1)):(e=document.createEventObject(),e.eventType="newCoords"),e.eventName="newCoords",e.data={nodes:u.buffer},requestAnimationFrame(function(){document.dispatchEvent(e)})}:function(){self.postMessage({nodes:u.buffer},[u.buffer])};var y=function(e){switch(e.data.action){case"start":o(new Float32Array(e.data.nodes),new Float32Array(e.data.edges),e.data.config),c(p.settings.startingIterations);break;case"loop":u=new Float32Array(e.data.nodes),c(p.settings.iterationsPerRender);break;case"config":a(e.data.config);break;case"kill":i(p),u=null,h=null,d=null,self.removeEventListener("message",y)}};self.addEventListener("message",y)};if(inWebWorker)eval(getWorkerFn());else{if("undefined"==typeof sigma)throw"sigma is not declared";sigma.prototype.getForceAtlas2Worker=getWorkerFn}}.call(this),function(undefined){"use strict";function Supervisor(sigInst,options){var _this=this,workerFn=sigInst.getForceAtlas2Worker&&sigInst.getForceAtlas2Worker();if(options=options||{},_root.URL=_root.URL||_root.webkitURL,this.sigInst=sigInst,this.graph=this.sigInst.graph,this.ppn=10,this.ppe=3,this.config={},this.shouldUseWorker=options.worker===!1?!1:webWorkers,this.workerUrl=options.workerUrl,this.started=!1,this.running=!1,this.shouldUseWorker){if(this.workerUrl)this.worker=new Worker(this.workerUrl);else{var blob=this.makeBlob(workerFn);this.worker=new Worker(URL.createObjectURL(blob))}this.worker.postMessage=this.worker.webkitPostMessage||this.worker.postMessage}else eval(workerFn);this.msgName=this.worker?"message":"newCoords",this.listener=function(e){_this.nodesByteArray=new Float32Array(e.data.nodes),_this.running&&(_this.applyLayoutChanges(),_this.sendByteArrayToWorker(),_this.sigInst.refresh())},(this.worker||document).addEventListener(this.msgName,this.listener),this.graphToByteArrays(),sigInst.bind("kill",function(){sigInst.killForceAtlas2()})}if("undefined"==typeof sigma)throw"sigma is not declared";var _root=this,webWorkers="Worker"in _root;Supervisor.prototype.makeBlob=function(e){var t;try{t=new Blob([e],{type:"application/javascript"})}catch(i){_root.BlobBuilder=_root.BlobBuilder||_root.WebKitBlobBuilder||_root.MozBlobBuilder,t=new BlobBuilder,t.append(e),t=t.getBlob()}return t},Supervisor.prototype.graphToByteArrays=function(){var e,t,i,n=this.graph.nodes(),r=this.graph.edges(),s=n.length*this.ppn,o=r.length*this.ppe,a={};for(this.nodesByteArray=new Float32Array(s),this.edgesByteArray=new Float32Array(o),e=t=0,i=n.length;i>e;e++)a[n[e].id]=t,this.nodesByteArray[t]=n[e].x,this.nodesByteArray[t+1]=n[e].y,this.nodesByteArray[t+2]=0,this.nodesByteArray[t+3]=0,this.nodesByteArray[t+4]=0,this.nodesByteArray[t+5]=0,this.nodesByteArray[t+6]=1+this.graph.degree(n[e].id),this.nodesByteArray[t+7]=1,this.nodesByteArray[t+8]=n[e].size,this.nodesByteArray[t+9]=0,t+=this.ppn;for(e=t=0,i=r.length;i>e;e++)this.edgesByteArray[t]=a[r[e].source],this.edgesByteArray[t+1]=a[r[e].target],this.edgesByteArray[t+2]=r[e].weight||0,t+=this.ppe},Supervisor.prototype.applyLayoutChanges=function(){for(var e=this.graph.nodes(),t=0,i=0,n=this.nodesByteArray.length;n>i;i+=this.ppn)e[t].x=this.nodesByteArray[i],e[t].y=this.nodesByteArray[i+1],t++},Supervisor.prototype.sendByteArrayToWorker=function(e){var t={action:e||"loop",nodes:this.nodesByteArray.buffer},i=[this.nodesByteArray.buffer];"start"===e&&(t.config=this.config||{},t.edges=this.edgesByteArray.buffer,i.push(this.edgesByteArray.buffer)),this.shouldUseWorker?this.worker.postMessage(t,i):_root.postMessage(t,"*")},Supervisor.prototype.start=function(){if(!this.running){this.running=!0;var e,t;for(e in this.sigInst.cameras)t=this.sigInst.cameras[e],t.edgequadtree._enabled=!1;this.started?this.sendByteArrayToWorker():(this.sendByteArrayToWorker("start"),this.started=!0)}},Supervisor.prototype.stop=function(){if(this.running){var e,t,i;for(e in this.sigInst.cameras)t=this.sigInst.cameras[e],t.edgequadtree._enabled=!0,i=sigma.utils.getBoundaries(this.graph,t.readPrefix),t.settings("drawEdges")&&t.settings("enableEdgeHovering")&&t.edgequadtree.index(this.sigInst.graph,{prefix:t.readPrefix,bounds:{x:i.minX,y:i.minY,width:i.maxX-i.minX,height:i.maxY-i.minY}});this.running=!1}},Supervisor.prototype.killWorker=function(){this.worker?this.worker.terminate():(_root.postMessage({action:"kill"},"*"),document.removeEventListener(this.msgName,this.listener))},Supervisor.prototype.configure=function(e){if(this.config=e,this.started){var t={action:"config",config:this.config};this.shouldUseWorker?this.worker.postMessage(t):_root.postMessage(t,"*")}},sigma.prototype.startForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),e&&this.supervisor.configure(e),this.supervisor.start(),this},sigma.prototype.stopForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this):this},sigma.prototype.killForceAtlas2=function(){return this.supervisor?(this.supervisor.stop(),this.supervisor.killWorker(),this.supervisor=null,this):this},sigma.prototype.configForceAtlas2=function(e){return this.supervisor||(this.supervisor=new Supervisor(this,e)),this.supervisor.configure(e),this},sigma.prototype.isForceAtlas2Running=function(e){return!!this.supervisor&&this.supervisor.running}}.call(this),function(){"use strict";function e(e,t){function i(e){var t=window.getComputedStyle(e),i=function(e){return parseInt(t.getPropertyValue(e).replace("px",""))||0};return{left:e.getBoundingClientRect().left+i("padding-left"),top:e.getBoundingClientRect().top+i("padding-top")}}function n(e){b=!1,h.removeEventListener("mousemove",l),h.removeEventListener("mouseup",a),v.length||(g=null)}function r(e){y[e.data.node.id]||(v.push(e.data.node),y[e.data.node.id]=!0,v.length&&!b&&(g=v[v.length-1],f.addEventListener("mousedown",o)))}function s(e){var t=v.map(function(e){return e}).indexOf(e.data.node);v.splice(t,1),delete y[e.data.node.id],v.length&&!b?g=v[v.length-1]:f.removeEventListener("mousedown",o)}function o(e){b=!0;var t=u.graph.nodes().length;if(g&&t>1){f.removeEventListener("mousedown",o),h.addEventListener("mousemove",l),h.addEventListener("mouseup",a);var i,n;for(i in u.cameras)n=u.cameras[i],void 0!==n.edgequadtree&&(n.edgequadtree._enabled=!1);d.settings({mouseEnabled:!1,enableHovering:!1}),u.refresh(),c.dispatchEvent("startdrag",{node:g,captor:e,renderer:d})}}function a(e){b=!1,f.addEventListener("mousedown",o),h.removeEventListener("mousemove",l),h.removeEventListener("mouseup",a);var t,i;for(t in u.cameras)i=u.cameras[t],void 0!==i.edgequadtree&&(i.edgequadtree._enabled=!0);d.settings({mouseEnabled:!0,enableHovering:!0}),u.refresh(),x&&c.dispatchEvent("drop",{node:g,captor:e,renderer:d}),c.dispatchEvent("dragend",{node:g,captor:e,renderer:d}),x=!1,g=null}function l(e){function t(){for(var t=i(d.container),n=e.clientX-t.left,r=e.clientY-t.top,s=Math.cos(p.angle),o=Math.sin(p.angle),a=u.graph.nodes(),l=[],h=0;2>h;h++){var f=a[h],v={x:f.x*s+f.y*o,y:f.y*s-f.x*o,renX:f[m+"x"],renY:f[m+"y"]};l.push(v)}if(l[0].x===l[1].x&&l[0].y===l[1].y){var y=0===l[0].renX?1:l[0].renX,b=0===l[0].renY?1:l[0].renY;n=l[0].x/y*(n-l[0].renX)+l[0].x,r=l[0].y/b*(r-l[0].renY)+l[0].y}else{var y=(l[1].renX-l[0].renX)/(l[1].x-l[0].x),b=(l[1].renY-l[0].renY)/(l[1].y-l[0].y);l[1].x===l[0].x&&(y=b),l[1].y===l[0].y&&(b=y),n=(n-l[0].renX)/y+l[0].x,r=(r-l[0].renY)/b+l[0].y}g.x=n*s-r*o,g.y=r*s+n*o,u.refresh(),x=!0,c.dispatchEvent("drag",{node:g,captor:e,renderer:d})}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){clearTimeout(n);var n=setTimeout(t,0)}else t()}if(sigma.classes.dispatcher.extend(this),sigma.renderers.webgl&&t instanceof sigma.renderers.webgl)throw new Error("The sigma.plugins.dragNodes is not compatible with the WebGL renderer");var c=this,u=e,h=document.body,d=t,f=t.container.lastChild,p=t.camera,g=null,m="",v=[],y={},b=!1,x=!1;t instanceof sigma.renderers.svg&&(f=t.container.firstChild),m=t instanceof sigma.renderers.webgl?t.options.prefix.substr(5):t.options.prefix,t.bind("overNode",r),t.bind("outNode",s),t.bind("click",n),u.bind("kill",function(){c.unbindAll()}),this.unbindAll=function(){f.removeEventListener("mousedown",o),h.removeEventListener("mousemove",l),h.removeEventListener("mouseup",a),d.unbind("overNode",r),d.unbind("outNode",s)}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var t={};sigma.plugins.dragNodes=function(i,n){return t[i.id]||(t[i.id]=new e(i,n)),i.bind("kill",function(){sigma.plugins.killDragNodes(i)}),t[i.id]},sigma.plugins.killDragNodes=function(i){t[i.id]instanceof e&&(t[i.id].unbindAll(),delete t[i.id])}}.call(window),function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");sigma.plugins.relativeSize=function(e,t){for(var i=e.graph.nodes(),n=0;n<i.length;n++){var r=e.graph.degree(i[n].id);i[n].size=t*Math.sqrt(r)}e.refresh()}}.call(window),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dashed=function(e,t,i,n,r){var s=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,o=r("prefix")||"",a=e[o+"size"]||1,l=r("edgeColor"),c=r("defaultNodeColor"),u=r("defaultEdgeColor");if(!s)switch(l){case"source":s=t.color||c;break;case"target":s=i.color||c;break;default:s=u}n.save(),e.active?n.strokeStyle="edge"===r("edgeActiveColor")?s||u:r("defaultEdgeActiveColor"):n.strokeStyle=s,n.setLineDash([8,3]),n.lineWidth=a,n.beginPath(),n.moveTo(t[o+"x"],t[o+"y"]),n.lineTo(i[o+"x"],i[o+"y"]),n.stroke(),n.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.dotted=function(e,t,i,n,r){var s=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,o=r("prefix")||"",a=e[o+"size"]||1,l=r("edgeColor"),c=r("defaultNodeColor"),u=r("defaultEdgeColor");if(!s)switch(l){case"source":s=t.color||c;break;case"target":s=i.color||c;break;default:s=u}n.save(),e.active?n.strokeStyle="edge"===r("edgeActiveColor")?s||u:r("defaultEdgeActiveColor"):n.strokeStyle=s,n.setLineDash([2]),n.lineWidth=a,n.beginPath(),n.moveTo(t[o+"x"],t[o+"y"]),n.lineTo(i[o+"x"],i[o+"y"]),n.stroke(),n.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.parallel=function(e,t,i,n,r){var s,o,a=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,l=r("prefix")||"",c=e[l+"size"]||1,u=r("edgeColor"),h=r("defaultNodeColor"),d=r("defaultEdgeColor"),f=t[l+"x"],p=t[l+"y"],g=i[l+"x"],m=i[l+"y"],v=sigma.utils.getDistance(f,p,g,m);if(!a)switch(u){case"source":a=t.color||h;break;case"target":a=i.color||h;break;default:a=d}s=sigma.utils.getCircleIntersection(f,p,c,g,m,v),o=sigma.utils.getCircleIntersection(g,m,c,f,p,v),n.save(),e.active?n.strokeStyle="edge"===r("edgeActiveColor")?a||d:r("defaultEdgeActiveColor"):n.strokeStyle=a,n.lineWidth=c,n.beginPath(),n.moveTo(s.xi,s.yi),n.lineTo(o.xi_prime,o.yi_prime),n.closePath(),n.stroke(),n.beginPath(),n.moveTo(s.xi_prime,s.yi_prime),n.lineTo(o.xi,o.yi),n.closePath(),n.stroke(),n.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.tapered=function(e,t,i,n,r){var s=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,o=r("prefix")||"",a=e[o+"size"]||1,l=r("edgeColor"),o=r("prefix")||"",c=r("defaultNodeColor"),u=r("defaultEdgeColor"),h=t[o+"x"],d=t[o+"y"],f=i[o+"x"],p=i[o+"y"],g=sigma.utils.getDistance(h,d,f,p);if(!s)switch(l){case"source":s=t.color||c;break;case"target":s=i.color||c;break;default:s=u}var m=sigma.utils.getCircleIntersection(h,d,a,f,p,g);n.save(),e.active?n.fillStyle="edge"===r("edgeActiveColor")?s||u:r("defaultEdgeActiveColor"):n.fillStyle=s,n.globalAlpha=.65,n.beginPath(),n.moveTo(f,p),n.lineTo(m.xi,m.yi),n.lineTo(m.xi_prime,m.yi_prime),n.closePath(),n.fill(),n.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dashed=function(e,t,i,n,r){var s=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,o=r("prefix")||"",a=e[o+"size"]||1,l=r("edgeColor"),c=r("defaultNodeColor"),u=r("defaultEdgeColor");if(!s)switch(l){case"source":s=t.color||c;break;case"target":s=i.color||c;break;default:s=u}s="edge"===r("edgeHoverColor")?e.hover_color||s:e.hover_color||r("defaultEdgeHoverColor")||s,a*=r("edgeHoverSizeRatio"),n.save(),n.setLineDash([8,3]),n.strokeStyle=s,n.lineWidth=a,n.beginPath(),n.moveTo(t[o+"x"],t[o+"y"]),n.lineTo(i[o+"x"],i[o+"y"]),n.stroke(),n.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.dotted=function(e,t,i,n,r){var s=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,o=r("prefix")||"",a=e[o+"size"]||1,l=r("edgeColor"),c=r("defaultNodeColor"),u=r("defaultEdgeColor");if(!s)switch(l){case"source":s=t.color||c;break;case"target":s=i.color||c;break;default:s=u}s="edge"===r("edgeHoverColor")?e.hover_color||s:e.hover_color||r("defaultEdgeHoverColor")||s,a*=r("edgeHoverSizeRatio"),n.save(),n.setLineDash([2]),n.strokeStyle=s,n.lineWidth=a,n.beginPath(),n.moveTo(t[o+"x"],t[o+"y"]),n.lineTo(i[o+"x"],i[o+"y"]),n.stroke(),n.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.parallel=function(e,t,i,n,r){var s,o,a=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,l=r("prefix")||"",c=e[l+"size"]||1,u=r("edgeColor"),h=r("defaultNodeColor"),d=r("defaultEdgeColor"),f=t[l+"x"],p=t[l+"y"],g=i[l+"x"],m=i[l+"y"],v=sigma.utils.getDistance(f,p,g,m);if(!a)switch(u){case"source":a=t.color||h;break;case"target":a=i.color||h;break;default:a=d}a="edge"===r("edgeHoverColor")?e.hover_color||a:e.hover_color||r("defaultEdgeHoverColor")||a,c*=r("edgeHoverSizeRatio"),s=sigma.utils.getCircleIntersection(f,p,c,g,m,v),o=sigma.utils.getCircleIntersection(g,m,c,f,p,v),n.save(),n.strokeStyle=a,n.lineWidth=c,n.beginPath(),n.moveTo(s.xi,s.yi),n.lineTo(o.xi_prime,o.yi_prime),n.closePath(),n.stroke(),n.beginPath(),n.moveTo(s.xi_prime,s.yi_prime),n.lineTo(o.xi,o.yi),n.closePath(),n.stroke(),n.restore()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.tapered=function(e,t,i,n,r){var s=e.active?e.active_color||r("defaultEdgeActiveColor"):e.color,o=r("prefix")||"",a=e[o+"size"]||1,l=r("edgeColor"),o=r("prefix")||"",c=r("defaultNodeColor"),u=r("defaultEdgeColor"),h=t[o+"x"],d=t[o+"y"],f=i[o+"x"],p=i[o+"y"],g=sigma.utils.getDistance(h,d,f,p);if(!s)switch(l){case"source":s=t.color||c;break;case"target":s=i.color||c;break;default:s=u}s="edge"===r("edgeHoverColor")?e.hover_color||s:e.hover_color||r("defaultEdgeHoverColor")||s,a*=r("edgeHoverSizeRatio");var m=sigma.utils.getCircleIntersection(h,d,a,f,p,g);n.save(),n.globalAlpha=.65,n.fillStyle=s,n.beginPath(),n.moveTo(f,p),n.lineTo(m.xi,m.yi),n.lineTo(m.xi_prime,m.yi_prime),n.closePath(),n.fill(),n.restore()}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");var t={defaultEdgeLabelColor:"#000",defaultEdgeLabelActiveColor:"#000",defaultEdgeLabelSize:10,edgeLabelSize:"fixed",edgeLabelSizePowRatio:1,edgeLabelThreshold:1};sigma.settings=sigma.utils.extend(sigma.settings||{},t),sigma.settings.drawEdgeLabels=!0}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.def=function(e,t,i,n,r){if("string"==typeof e.label&&t!=i){var s=r("prefix")||"",o=e[s+"size"]||1;if(!(o<r("edgeLabelThreshold"))){if(0===r("edgeLabelSizePowRatio"))throw'"edgeLabelSizePowRatio" must not be 0.';var a,l=(t[s+"x"]+i[s+"x"])/2,c=(t[s+"y"]+i[s+"y"])/2,u=i[s+"x"]-t[s+"x"],h=i[s+"y"]-t[s+"y"],d=t[s+"x"]<i[s+"x"]?1:-1,f=Math.atan2(h*d,u*d);a="fixed"===r("edgeLabelSize")?r("defaultEdgeLabelSize"):r("defaultEdgeLabelSize")*o*Math.pow(o,-1/r("edgeLabelSizePowRatio")),n.save(),e.active?(n.font=[r("activeFontStyle"),a+"px",r("activeFont")||r("font")].join(" "),n.fillStyle="edge"===r("edgeActiveColor")?e.active_color||r("defaultEdgeActiveColor"):r("defaultEdgeLabelActiveColor")):(n.font=[r("fontStyle"),a+"px",r("font")].join(" "),n.fillStyle="edge"===r("edgeLabelColor")?e.color||r("defaultEdgeColor"):r("defaultEdgeLabelColor")),n.textAlign="center",n.textBaseline="alphabetic",n.translate(l,c),n.rotate(f),n.fillText(e.label,0,-o/2-3),n.restore()}}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curve=function(e,t,i,n,r){if("string"==typeof e.label){var s=r("prefix")||"",o=e[s+"size"]||1;if(!(o<r("edgeLabelThreshold"))){var a,l,c,u=t[s+"size"],h=t[s+"x"],d=t[s+"y"],f=i[s+"x"],p=i[s+"y"],g=f-h,m=p-d,v=f>h?1:-1,y={},b=.5;t.id===i.id?(y=sigma.utils.getSelfLoopControlPoints(h,d,u),l=sigma.utils.getPointOnBezierCurve(b,h,d,f,p,y.x1,y.y1,y.x2,y.y2),c=Math.atan2(1,1)):(y=sigma.utils.getQuadraticControlPoint(h,d,f,p),l=sigma.utils.getPointOnQuadraticCurve(b,h,d,f,p,y.x,y.y),c=Math.atan2(m*v,g*v)),a="fixed"===r("edgeLabelSize")?r("defaultEdgeLabelSize"):r("defaultEdgeLabelSize")*o*Math.pow(o,-1/r("edgeLabelSizePowRatio")),n.save(),e.active?(n.font=[r("activeFontStyle"),a+"px",r("activeFont")||r("font")].join(" "),n.fillStyle="edge"===r("edgeActiveColor")?e.active_color||r("defaultEdgeActiveColor"):r("defaultEdgeLabelActiveColor")):(n.font=[r("fontStyle"),a+"px",r("font")].join(" "),n.fillStyle="edge"===r("edgeLabelColor")?e.color||r("defaultEdgeColor"):r("defaultEdgeLabelColor")),
n.textAlign="center",n.textBaseline="alphabetic",n.translate(l.x,l.y),n.rotate(c),n.fillText(e.label,0,-o/2-3),n.restore()}}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.edges.labels"),sigma.canvas.edges.labels.curvedArrow=function(e,t,i,n,r){sigma.canvas.edges.labels.curve(e,t,i,n,r)}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes");var e={},t=function(t,i,n,r,s,o,a){if(t.image&&t.image.url&&!(a>r)){var l=t.image.url,c=t.image.h||1,u=t.image.w||1,h=t.image.scale||1,d=t.image.clip||1,f=e[l];f||(f=document.createElement("IMG"),f.setAttribute("crossOrigin",o),f.src=l,f.onload=function(){window.dispatchEvent(new Event("resize"))},e[l]=f);var p=c>u?u/c:1,g=u>c?c/u:1,m=r*h;s.save(),s.beginPath(),s.arc(i,n,r*d,0,2*Math.PI,!0),s.closePath(),s.clip(),s.drawImage(f,i+Math.sin(-0.7855)*m*p,n-Math.cos(-0.7855)*m*g,m*p*2*Math.sin(-0.7855)*-1,m*g*2*Math.cos(-0.7855)),s.restore()}},i=function(e,t,i,n,r,s){if(e.icon&&!(s>n)){var o=e.icon.font||"Arial",a=e.icon.color||"#F00",l=e.icon.content||"?",c=(e.icon.x||.5,e.icon.y||.5,n),u=.7;"number"==typeof e.icon.scale&&(u=Math.abs(Math.max(.01,e.icon.scale)));var h=Math.round(u*c);r.save(),r.fillStyle=a,r.font=""+h+"px "+o,r.textAlign="center",r.textBaseline="middle",r.fillText(l,t,i),r.restore()}};sigma.canvas.nodes.def=function(e,n,r){var s=r("prefix")||"",o=e[s+"size"]||1,a=e[s+"x"],l=e[s+"y"],c=r("defaultNodeColor"),u=r("imgCrossOrigin")||"anonymous",h=r("borderSize"),d=r("outerBorderSize"),f=e.color||c;if(e.active&&(f="node"===r("nodeActiveColor")?e.active_color||f:r("defaultNodeActiveColor")||f),e.active&&(d>0&&(n.beginPath(),n.fillStyle="node"===r("nodeOuterBorderColor")?f||c:r("defaultNodeOuterBorderColor"),n.arc(a,l,o+h+d,0,2*Math.PI,!0),n.closePath(),n.fill()),h>0&&(n.beginPath(),n.fillStyle="node"===r("nodeBorderColor")?f||c:r("defaultNodeBorderColor"),n.arc(a,l,o+h,0,2*Math.PI,!0),n.closePath(),n.fill())),(!e.active||e.active&&"node"===r("nodeActiveColor"))&&e.colors&&e.colors.length){var p,g=e.colors.length,m=1/g,v=0;for(p=0;g>p;p++)n.fillStyle=e.colors[p],n.beginPath(),n.moveTo(a,l),n.arc(a,l,o,v,v+2*Math.PI*m,!1),n.lineTo(a,l),n.closePath(),n.fill(),v+=2*Math.PI*m}else n.fillStyle=f,n.beginPath(),n.arc(a,l,o,0,2*Math.PI,!0),n.closePath(),n.fill();e.image&&t(e,a,l,o,n,u,r("imageThreshold")),e.icon&&i(e,a,l,o,n,r("iconThreshold"))}}(),function(e){"use strict";function t(e,t,i){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",i||"graph."+t);var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r),n.remove()}function i(e,t,i){var n=Math.min(i/e,i/t);return{width:e*n,height:t*n}}function n(e,t,i){var n;return n=sigma.utils.getBoundaries(e.graph,t.camera.readPrefix),n.minX/=i.zoomRatio,n.minY/=i.zoomRatio,n.maxX/=i.zoomRatio,n.maxY/=i.zoomRatio,n}function r(e,t,r){var s,o=r.margin||0,a={width:t.width,height:t.height};return r.clips||r.size?r.size&&r.size>=1&&(a=i(t.width,t.height,r.size)):(s=n(e,t,r),a={width:s.maxX-s.minX+2*s.sizeMax,height:s.maxY-s.minY+2*s.sizeMax}),a.width+=o,a.height+=o,a}function s(e,i,n){if(n=n||{},n.format&&!(n.format in a))throw Error('sigma.renderers.image: unsupported format "'+n.format+'".');var s=r(e,i,n);n.clip||this.clone(e,n,s);var o=this.draw(i,n,s),l=o.toDataURL(a[n.format||"png"]);return n.download&&t(l,n.format||"png",n.filename),l}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var o,a,l,c;o=["scene","edges","nodes","labels"],a={png:"image/png",jpg:"image/jpeg",gif:"image/gif",tiff:"image/tiff"},s.prototype.clone=function(e,t,i){t.tmpContainer=t.tmpContainer||"image-container";var n=document.getElementById(t.tmpContainer);n||(n=document.createElement("div"),n.id=t.tmpContainer,document.body.appendChild(n)),n.setAttribute("style","width:"+i.width+"px;height:"+Math.round(i.height)+"px;");var r=e.addRenderer({container:document.getElementById(t.tmpContainer),type:"canvas",settings:{batchEdgesDrawing:!0,drawLabels:!!t.labels}});r.camera.ratio=t.zoomRatio>0?t.zoomRatio:1;var s=r instanceof sigma.renderers.webgl,a=!1,u=[];l=document.createElement("canvas"),c=l.getContext("2d"),e.refresh(),o.forEach(function(e){if(r.contexts[e]&&(t.labels!==!1||"labels"!==e)){var n=r.domElements[e]||r.domElements.scene,o=r.contexts[e];a||(l.width=i.width,l.height=i.height,s&&o instanceof WebGLRenderingContext&&(l.width*=.5,l.height*=.5),a=!0),o instanceof WebGLRenderingContext?c.drawImage(n,0,0,n.width/2,n.height/2):c.drawImage(n,0,0),~u.indexOf(o)||u.push(o)}}),u=[],e.killRenderer(r),n.remove()},s.prototype.draw=function(e,t,n){(!t.size||t.size<1)&&(t.size=window.innerWidth);var r=e instanceof sigma.renderers.webgl,s=!1,a=[],c=document.createElement("canvas"),u=c.getContext("2d");return o.forEach(function(o){if(e.contexts[o]&&(t.labels!==!1||"labels"!==o)){var h=e.domElements[o]||e.domElements.scene,d=e.contexts[o];if(!~a.indexOf(d)){if(!s){var f,p;t.clip?(f=h.width,p=h.height,n=i(f,p,t.size)):(f=l.width,p=l.height),c.width=n.width,c.height=n.height,!r&&!d instanceof WebGLRenderingContext&&(c.width*=2,c.height*=2),s=!0,t.background&&(u.rect(0,0,c.width,c.height),u.fillStyle=t.background,u.fill())}t.clip?u.drawImage(h,0,0,c.width,c.height):u.drawImage(l,0,0,c.width,c.height),a.push(d)}}}),a=[],c};var u=null;sigma.plugins.image=function(e,t,i){return sigma.plugins.killImage(),u||(u=new s(e,t,i)),u},sigma.plugins.killImage=function(){u instanceof s&&(u=null,l=null,c=null)}}.call(this),function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.CodeMirror=e()}}(function(){"use strict";function e(i,n){if(!(this instanceof e))return new e(i,n);this.options=n=n?zr(n):{},zr(Qs,n,!1),f(n);var r=n.value;"string"==typeof r&&(r=new ko(r,n.mode,null,n.lineSeparator)),this.doc=r;var s=new e.inputStyles[n.inputStyle](this),o=this.display=new t(i,r,s);o.wrapper.CodeMirror=this,c(this),a(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),n.autofocus&&!Ls&&o.input.focus(),v(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Ar,keySeq:null,specialChars:null};var l=this;vs&&11>ys&&setTimeout(function(){l.display.input.reset(!0)},20),Wt(this),$r(),bt(this),this.curOp.forceUpdate=!0,Un(this,r),n.autofocus&&!Ls||l.hasFocus()?setTimeout(Hr(gi,this),20):mi(this);for(var u in Zs)Zs.hasOwnProperty(u)&&Zs[u](this,n[u],Js);k(this),n.finishInit&&n.finishInit(this);for(var h=0;h<no.length;++h)no[h](this);wt(this),bs&&n.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function t(e,t,i){var n=this;this.input=i,n.scrollbarFiller=Wr("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=Wr("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=Wr("div",null,"CodeMirror-code"),n.selectionDiv=Wr("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=Wr("div",null,"CodeMirror-cursors"),n.measure=Wr("div",null,"CodeMirror-measure"),n.lineMeasure=Wr("div",null,"CodeMirror-measure"),n.lineSpace=Wr("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=Wr("div",[Wr("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Wr("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=Wr("div",null,null,"position: absolute; height: "+_o+"px; width: 1px;"),n.gutters=Wr("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Wr("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Wr("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),vs&&8>ys&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),bs||ps&&Ls||(n.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(n.wrapper):e(n.wrapper)),n.viewFrom=n.viewTo=t.first,n.reportedViewFrom=n.reportedViewTo=t.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,i.init(n)}function i(t){t.doc.mode=e.getMode(t.options,t.doc.modeOption),n(t)}function n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Be(e,100),e.state.modeGen++,e.curOp&&It(e)}function r(e){e.options.lineWrapping?(Go(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Uo(e.display.wrapper,"CodeMirror-wrap"),d(e)),o(e),It(e),ot(e),setTimeout(function(){y(e)},100)}function s(e){var t=vt(e.display),i=e.options.lineWrapping,n=i&&Math.max(5,e.display.scroller.clientWidth/yt(e.display)-3);return function(r){if(wn(e.doc,r))return 0;var s=0;if(r.widgets)for(var o=0;o<r.widgets.length;o++)r.widgets[o].height&&(s+=r.widgets[o].height);return i?s+(Math.ceil(r.text.length/n)||1)*t:s+t}}function o(e){var t=e.doc,i=s(e);t.iter(function(e){var t=i(e);t!=e.height&&Jn(e,t)})}function a(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ot(e)}function l(e){c(e),It(e),setTimeout(function(){w(e)},20)}function c(e){var t=e.display.gutters,i=e.options.gutters;Fr(t);for(var n=0;n<i.length;++n){var r=i[n],s=t.appendChild(Wr("div",null,"CodeMirror-gutter "+r));"CodeMirror-linenumbers"==r&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=n?"":"none",u(e)}function u(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function h(e){if(0==e.height)return 0;for(var t,i=e.text.length,n=e;t=pn(n);){var r=t.find(0,!0);n=r.from.line,i+=r.from.ch-r.to.ch}for(n=e;t=gn(n);){var r=t.find(0,!0);i-=n.text.length-r.from.ch,n=r.to.line,i+=n.text.length-r.to.ch}return i}function d(e){var t=e.display,i=e.doc;t.maxLine=Gn(i,i.first),t.maxLineLength=h(t.maxLine),t.maxLineChanged=!0,i.iter(function(e){var i=h(e);i>t.maxLineLength&&(t.maxLineLength=i,t.maxLine=e)})}function f(e){var t=Or(e.gutters,"CodeMirror-linenumbers");-1==t&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function p(e){var t=e.display,i=t.gutters.offsetWidth,n=Math.round(e.doc.height+qe(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:n,scrollHeight:n+Ke(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}function g(e,t,i){this.cm=i;var n=this.vert=Wr("div",[Wr("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=Wr("div",[Wr("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(n),e(r),To(n,"scroll",function(){n.clientHeight&&t(n.scrollTop,"vertical")}),To(r,"scroll",function(){r.clientWidth&&t(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,vs&&8>ys&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function m(){}function v(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Uo(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new e.scrollbarModel[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),To(e,"mousedown",function(){t.state.focused&&setTimeout(function(){t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,i){"horizontal"==i?ni(t,e):ii(t,e)},t),t.display.scrollbars.addClass&&Go(t.display.wrapper,t.display.scrollbars.addClass)}function y(e,t){t||(t=p(e));var i=e.display.barWidth,n=e.display.barHeight;b(e,t);for(var r=0;4>r&&i!=e.display.barWidth||n!=e.display.barHeight;r++)i!=e.display.barWidth&&e.options.lineWrapping&&N(e),b(e,p(e)),i=e.display.barWidth,n=e.display.barHeight}function b(e,t){var i=e.display,n=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=n.right)+"px",i.sizer.style.paddingBottom=(i.barHeight=n.bottom)+"px",n.right&&n.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=n.bottom+"px",i.scrollbarFiller.style.width=n.right+"px"):i.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=n.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}function x(e,t,i){var n=i&&null!=i.top?Math.max(0,i.top):e.scroller.scrollTop;n=Math.floor(n-Fe(e));var r=i&&null!=i.bottom?i.bottom:n+e.wrapper.clientHeight,s=tr(t,n),o=tr(t,r);if(i&&i.ensure){var a=i.ensure.from.line,l=i.ensure.to.line;s>a?(s=a,o=tr(t,ir(Gn(t,a))+e.wrapper.clientHeight)):Math.min(l,t.lastLine())>=o&&(s=tr(t,ir(Gn(t,l))-e.wrapper.clientHeight),o=l)}return{from:s,to:Math.max(o,s+1)}}function w(e){var t=e.display,i=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=S(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,s=n+"px",o=0;o<i.length;o++)if(!i[o].hidden){e.options.fixedGutter&&i[o].gutter&&(i[o].gutter.style.left=s);var a=i[o].alignable;if(a)for(var l=0;l<a.length;l++)a[l].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}}function k(e){if(!e.options.lineNumbers)return!1;var t=e.doc,i=C(e.options,t.first+t.size-1),n=e.display;if(i.length!=n.lineNumChars){var r=n.measure.appendChild(Wr("div",[Wr("div",i)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=r.firstChild.offsetWidth,o=r.offsetWidth-s;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(s,n.lineGutter.offsetWidth-o)+1,n.lineNumWidth=n.lineNumInnerWidth+o,n.lineNumChars=n.lineNumInnerWidth?i.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",u(e),!0}return!1}function C(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function S(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function E(e,t,i){var n=e.display;this.viewport=t,this.visible=x(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Ye(e),this.force=i,this.dims=_(e),this.events=[]}function M(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Ke(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Ke(e)+"px",t.scrollbarsClipped=!0)}function L(e,t){var i=e.display,n=e.doc;if(t.editorIsHidden)return zt(e),!1;if(!t.force&&t.visible.from>=i.viewFrom&&t.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==Rt(e))return!1;k(e)&&(zt(e),t.dims=_(e));var r=n.first+n.size,s=Math.max(t.visible.from-e.options.viewportMargin,n.first),o=Math.min(r,t.visible.to+e.options.viewportMargin);i.viewFrom<s&&s-i.viewFrom<20&&(s=Math.max(n.first,i.viewFrom)),i.viewTo>o&&i.viewTo-o<20&&(o=Math.min(r,i.viewTo)),Is&&(s=bn(e.doc,s),o=xn(e.doc,o));var a=s!=i.viewFrom||o!=i.viewTo||i.lastWrapHeight!=t.wrapperHeight||i.lastWrapWidth!=t.wrapperWidth;Dt(e,s,o),i.viewOffset=ir(Gn(e.doc,i.viewFrom)),e.display.mover.style.top=i.viewOffset+"px";var l=Rt(e);if(!a&&0==l&&!t.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo))return!1;var c=Xr();return l>4&&(i.lineDiv.style.display="none"),I(e,i.updateLineNumbers,t.dims),l>4&&(i.lineDiv.style.display=""),i.renderedView=i.view,c&&Xr()!=c&&c.offsetHeight&&c.focus(),Fr(i.cursorDiv),Fr(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,a&&(i.lastWrapHeight=t.wrapperHeight,i.lastWrapWidth=t.wrapperWidth,Be(e,400)),i.updateLineNumbers=null,!0}function T(e,t){for(var i=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Ye(e)||(i&&null!=i.top&&(i={top:Math.min(e.doc.height+qe(e.display)-Ve(e),i.top)}),t.visible=x(e.display,e.doc,i),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&L(e,t);n=!1){N(e);var r=p(e);_e(e),P(e,r),y(e,r)}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function A(e,t){var i=new E(e,t);if(L(e,i)){N(e),T(e,i);var n=p(e);_e(e),P(e,n),y(e,n),i.finish()}}function P(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";var i=t.docHeight+e.display.barHeight;e.display.heightForcer.style.top=i+"px",e.display.gutters.style.height=Math.max(i+Ke(e),t.clientHeight)+"px"}function N(e){for(var t=e.display,i=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var r,s=t.view[n];if(!s.hidden){if(vs&&8>ys){var o=s.node.offsetTop+s.node.offsetHeight;r=o-i,i=o}else{var a=s.node.getBoundingClientRect();r=a.bottom-a.top}var l=s.line.height-r;if(2>r&&(r=vt(t)),(l>.001||-.001>l)&&(Jn(s.line,r),O(s.line),s.rest))for(var c=0;c<s.rest.length;c++)O(s.rest[c])}}}function O(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function _(e){for(var t=e.display,i={},n={},r=t.gutters.clientLeft,s=t.gutters.firstChild,o=0;s;s=s.nextSibling,++o)i[e.options.gutters[o]]=s.offsetLeft+s.clientLeft+r,n[e.options.gutters[o]]=s.clientWidth;return{fixedPos:S(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:i,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function I(e,t,i){function n(t){var i=t.nextSibling;return bs&&Ts&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var r=e.display,s=e.options.lineNumbers,o=r.lineDiv,a=o.firstChild,l=r.view,c=r.viewFrom,u=0;u<l.length;u++){var h=l[u];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;a!=h.node;)a=n(a);var d=s&&null!=t&&c>=t&&h.lineNumber;h.changes&&(Or(h.changes,"gutter")>-1&&(d=!1),j(e,h,c,i)),d&&(Fr(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(C(e.options,c)))),a=h.node.nextSibling}else{var f=q(e,h,c,i);o.insertBefore(f,a)}c+=h.size}for(;a;)a=n(a)}function j(e,t,i,n){for(var r=0;r<t.changes.length;r++){var s=t.changes[r];"text"==s?D(e,t):"gutter"==s?W(e,t,i,n):"class"==s?R(t):"widget"==s&&F(e,t,n)}t.changes=null}function z(e){return e.node==e.text&&(e.node=Wr("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),vs&&8>ys&&(e.node.style.zIndex=2)),e.node}function H(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var i=z(e);e.background=i.insertBefore(Wr("div",null,t),i.firstChild)}}function B(e,t){var i=e.display.externalMeasured;return i&&i.line==t.line?(e.display.externalMeasured=null,t.measure=i.measure,i.built):Hn(e,t)}function D(e,t){var i=t.text.className,n=B(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,R(t)):i&&(t.text.className=i)}function R(e){H(e),e.line.wrapClass?z(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function W(e,t,i,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=z(t);t.gutterBackground=Wr("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),r.insertBefore(t.gutterBackground,t.text)}var s=t.line.gutterMarkers;if(e.options.lineNumbers||s){var r=z(t),o=t.gutter=Wr("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(o),r.insertBefore(o,t.text),t.line.gutterClass&&(o.className+=" "+t.line.gutterClass),!e.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(t.lineNumber=o.appendChild(Wr("div",C(e.options,i),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),s)for(var a=0;a<e.options.gutters.length;++a){var l=e.options.gutters[a],c=s.hasOwnProperty(l)&&s[l];c&&o.appendChild(Wr("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function F(e,t,i){t.alignable&&(t.alignable=null);for(var n,r=t.node.firstChild;r;r=n){var n=r.nextSibling;"CodeMirror-linewidget"==r.className&&t.node.removeChild(r)}X(e,t,i)}function q(e,t,i,n){var r=B(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),R(t),W(e,t,i,n),X(e,t,n),t.node}function X(e,t,i){if(K(e,t.line,t,i,!0),t.rest)for(var n=0;n<t.rest.length;n++)K(e,t.rest[n],t,i,!1)}function K(e,t,i,n,r){if(t.widgets)for(var s=z(i),o=0,a=t.widgets;o<a.length;++o){var l=a[o],c=Wr("div",[l.node],"CodeMirror-linewidget");l.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),Y(l,c,i,n),e.display.input.setUneditable(c),r&&l.above?s.insertBefore(c,i.gutter||i.text):s.appendChild(c),Cr(l,"redraw")}}function Y(e,t,i,n){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var r=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(r-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function V(e){return js(e.line,e.ch)}function $(e,t){return zs(e,t)<0?t:e}function U(e,t){return zs(e,t)<0?e:t}function G(e){e.state.focused||(e.display.input.focus(),gi(e))}function Q(e){return e.options.readOnly||e.doc.cantEdit}function Z(e,t,i,n,r){var s=e.doc;e.display.shift=!1,n||(n=s.sel);var o=e.state.pasteIncoming||"paste"==r,a=s.splitLines(t),l=null;if(o&&n.ranges.length>1)if(Hs&&Hs.join("\n")==t){if(n.ranges.length%Hs.length==0){l=[];for(var c=0;c<Hs.length;c++)l.push(s.splitLines(Hs[c]))}}else a.length==n.ranges.length&&(l=_r(a,function(e){return[e]}));for(var c=n.ranges.length-1;c>=0;c--){var u=n.ranges[c],h=u.from(),d=u.to();u.empty()&&(i&&i>0?h=js(h.line,h.ch-i):e.state.overwrite&&!o&&(d=js(d.line,Math.min(Gn(s,d.line).text.length,d.ch+Nr(a).length))));var f=e.curOp.updateInput,p={from:h,to:d,text:l?l[c%l.length]:a,origin:r||(o?"paste":e.state.cutIncoming?"cut":"+input")};Si(e.doc,p),Cr(e,"inputRead",e,p)}t&&!o&&ee(e,t),zi(e),e.curOp.updateInput=f,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function J(e,t){var i=e.clipboardData&&e.clipboardData.getData("text/plain");return i?(e.preventDefault(),Q(t)||t.options.disableInput||Tt(t,function(){Z(t,i,0,null,"paste")}),!0):void 0}function ee(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var i=e.doc.sel,n=i.ranges.length-1;n>=0;n--){var r=i.ranges[n];if(!(r.head.ch>100||n&&i.ranges[n-1].head.line==r.head.line)){var s=e.getModeAt(r.head),o=!1;if(s.electricChars){for(var a=0;a<s.electricChars.length;a++)if(t.indexOf(s.electricChars.charAt(a))>-1){o=Bi(e,r.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(Gn(e.doc,r.head.line).text.slice(0,r.head.ch))&&(o=Bi(e,r.head.line,"smart"));o&&Cr(e,"electricInput",e,r.head.line)}}}function te(e){for(var t=[],i=[],n=0;n<e.doc.sel.ranges.length;n++){var r=e.doc.sel.ranges[n].head.line,s={anchor:js(r,0),head:js(r+1,0)};i.push(s),t.push(e.getRange(s.anchor,s.head))}return{text:t,ranges:i}}function ie(e){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck","false")}function ne(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Ar,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function re(){var e=Wr("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),t=Wr("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return bs?e.style.width="1000px":e.setAttribute("wrap","off"),Ms&&(e.style.border="1px solid black"),ie(e),t}function se(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ar,this.gracePeriod=!1}function oe(e,t){var i=Ze(e,t.line);if(!i||i.hidden)return null;var n=Gn(e.doc,t.line),r=Ue(i,n,t.line),s=nr(n),o="left";if(s){var a=ls(s,t.ch);o=a%2?"right":"left"}var l=tt(r.map,t.ch,o);return l.offset="right"==l.collapse?l.end:l.start,l}function ae(e,t){return t&&(e.bad=!0),e}function le(e,t,i){var n;if(t==e.display.lineDiv){if(n=e.display.lineDiv.childNodes[i],!n)return ae(e.clipPos(js(e.display.viewTo-1)),!0);t=null,i=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var s=e.display.view[r];if(s.node==n)return ce(s,t,i)}}function ce(e,t,i){function n(t,i,n){for(var r=-1;r<(u?u.length:0);r++)for(var s=0>r?c.map:u[r],o=0;o<s.length;o+=3){var a=s[o+2];if(a==t||a==i){var l=er(0>r?e.line:e.rest[r]),h=s[o]+n;return(0>n||a!=t)&&(h=s[o+(n?1:0)]),js(l,h)}}}var r=e.text.firstChild,s=!1;if(!t||!Yo(r,t))return ae(js(er(e.line),0),!0);if(t==r&&(s=!0,t=r.childNodes[i],i=0,!t)){var o=e.rest?Nr(e.rest):e.line;return ae(js(er(o),o.text.length),s)}var a=3==t.nodeType?t:null,l=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,i&&(i=a.nodeValue.length));l.parentNode!=r;)l=l.parentNode;var c=e.measure,u=c.maps,h=n(a,l,i);if(h)return ae(h,s);for(var d=l.nextSibling,f=a?a.nodeValue.length-i:0;d;d=d.nextSibling){if(h=n(d,d.firstChild,0))return ae(js(h.line,h.ch-f),s);f+=d.textContent.length}for(var p=l.previousSibling,f=i;p;p=p.previousSibling){if(h=n(p,p.firstChild,-1))return ae(js(h.line,h.ch+f),s);f+=d.textContent.length}}function ue(e,t,i,n,r){function s(e){return function(t){return t.id==e}}function o(t){if(1==t.nodeType){var i=t.getAttribute("cm-text");if(null!=i)return""==i&&(i=t.textContent.replace(/\u200b/g,"")),void(a+=i);var u,h=t.getAttribute("cm-marker");if(h){var d=e.findMarks(js(n,0),js(r+1,0),s(+h));return void(d.length&&(u=d[0].find())&&(a+=Qn(e.doc,u.from,u.to).join(c)))}if("false"==t.getAttribute("contenteditable"))return;for(var f=0;f<t.childNodes.length;f++)o(t.childNodes[f]);/^(pre|div|p)$/i.test(t.nodeName)&&(l=!0)}else if(3==t.nodeType){var p=t.nodeValue;if(!p)return;l&&(a+=c,l=!1),a+=p}}for(var a="",l=!1,c=e.doc.lineSeparator();o(t),t!=i;)t=t.nextSibling;return a}function he(e,t){this.ranges=e,this.primIndex=t}function de(e,t){this.anchor=e,this.head=t}function fe(e,t){var i=e[t];e.sort(function(e,t){return zs(e.from(),t.from())}),t=Or(e,i);for(var n=1;n<e.length;n++){var r=e[n],s=e[n-1];if(zs(s.to(),r.from())>=0){var o=U(s.from(),r.from()),a=$(s.to(),r.to()),l=s.empty()?r.from()==r.head:s.from()==s.head;t>=n&&--t,e.splice(--n,2,new de(l?a:o,l?o:a))}}return new he(e,t)}function pe(e,t){return new he([new de(e,t||e)],0)}function ge(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function me(e,t){if(t.line<e.first)return js(e.first,0);var i=e.first+e.size-1;return t.line>i?js(i,Gn(e,i).text.length):ve(t,Gn(e,t.line).text.length)}function ve(e,t){var i=e.ch;return null==i||i>t?js(e.line,t):0>i?js(e.line,0):e}function ye(e,t){return t>=e.first&&t<e.first+e.size}function be(e,t){for(var i=[],n=0;n<t.length;n++)i[n]=me(e,t[n]);return i}function xe(e,t,i,n){if(e.cm&&e.cm.display.shift||e.extend){var r=t.anchor;if(n){var s=zs(i,r)<0;s!=zs(n,r)<0?(r=i,i=n):s!=zs(i,n)<0&&(i=n)}return new de(r,i)}return new de(n||i,i)}function we(e,t,i,n){Le(e,new he([xe(e,e.sel.primary(),t,i)],0),n)}function ke(e,t,i){for(var n=[],r=0;r<e.sel.ranges.length;r++)n[r]=xe(e,e.sel.ranges[r],t[r],null);var s=fe(n,e.sel.primIndex);Le(e,s,i)}function Ce(e,t,i,n){var r=e.sel.ranges.slice(0);r[t]=i,Le(e,fe(r,e.sel.primIndex),n)}function Se(e,t,i,n){Le(e,pe(t,i),n)}function Ee(e,t){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var i=0;i<t.length;i++)this.ranges[i]=new de(me(e,t[i].anchor),me(e,t[i].head))}};return No(e,"beforeSelectionChange",e,i),e.cm&&No(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?fe(i.ranges,i.ranges.length-1):t}function Me(e,t,i){var n=e.history.done,r=Nr(n);r&&r.ranges?(n[n.length-1]=t,Te(e,t,i)):Le(e,t,i)}function Le(e,t,i){Te(e,t,i),ur(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)}function Te(e,t,i){(Lr(e,"beforeSelectionChange")||e.cm&&Lr(e.cm,"beforeSelectionChange"))&&(t=Ee(e,t));var n=i&&i.bias||(zs(t.primary().head,e.sel.primary().head)<0?-1:1);Ae(e,Ne(e,t,n,!0)),i&&i.scroll===!1||!e.cm||zi(e.cm)}function Ae(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,Mr(e.cm)),Cr(e,"cursorActivity",e))}function Pe(e){Ae(e,Ne(e,e.sel,null,!1),jo)}function Ne(e,t,i,n){for(var r,s=0;s<t.ranges.length;s++){var o=t.ranges[s],a=Oe(e,o.anchor,i,n),l=Oe(e,o.head,i,n);(r||a!=o.anchor||l!=o.head)&&(r||(r=t.ranges.slice(0,s)),r[s]=new de(a,l))}return r?fe(r,t.primIndex):t}function Oe(e,t,i,n){var r=!1,s=t,o=i||1;e.cantEdit=!1;e:for(;;){var a=Gn(e,s.line);if(a.markedSpans)for(var l=0;l<a.markedSpans.length;++l){var c=a.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=s.ch:c.from<s.ch))&&(null==c.to||(u.inclusiveRight?c.to>=s.ch:c.to>s.ch))){if(n&&(No(u,"beforeCursorEnter"),u.explicitlyCleared)){if(a.markedSpans){--l;continue}break}if(!u.atomic)continue;var h=u.find(0>o?-1:1);if(0==zs(h,s)&&(h.ch+=o,h.ch<0?h=h.line>e.first?me(e,js(h.line-1)):null:h.ch>a.text.length&&(h=h.line<e.first+e.size-1?js(h.line+1,0):null),!h)){if(r)return n?(e.cantEdit=!0,js(e.first,0)):Oe(e,t,i,!0);r=!0,h=t,o=-o}s=h;continue e}}return s}}function _e(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Ie(e,t){for(var i=e.doc,n={},r=n.cursors=document.createDocumentFragment(),s=n.selection=document.createDocumentFragment(),o=0;o<i.sel.ranges.length;o++)if(t!==!1||o!=i.sel.primIndex){var a=i.sel.ranges[o],l=a.empty();(l||e.options.showCursorWhenSelecting)&&je(e,a.head,r),l||ze(e,a,s)}return n}function je(e,t,i){var n=dt(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=i.appendChild(Wr("div"," ","CodeMirror-cursor"));if(r.style.left=n.left+"px",r.style.top=n.top+"px",r.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var s=i.appendChild(Wr("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=n.other.left+"px",s.style.top=n.other.top+"px",s.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function ze(e,t,i){function n(e,t,i,n){0>t&&(t=0),t=Math.round(t),n=Math.round(n),a.appendChild(Wr("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(null==i?u-e:i)+"px; height: "+(n-t)+"px"))}function r(t,i,r){function s(i,n){return ht(e,js(t,i),"div",h,n)}var a,l,h=Gn(o,t),d=h.text.length;return Jr(nr(h),i||0,null==r?d:r,function(e,t,o){var h,f,p,g=s(e,"left");if(e==t)h=g,f=p=g.left;else{if(h=s(t-1,"right"),"rtl"==o){var m=g;g=h,h=m}f=g.left,p=h.right}null==i&&0==e&&(f=c),h.top-g.top>3&&(n(f,g.top,null,g.bottom),
f=c,g.bottom<h.top&&n(f,g.bottom,null,h.top)),null==r&&t==d&&(p=u),(!a||g.top<a.top||g.top==a.top&&g.left<a.left)&&(a=g),(!l||h.bottom>l.bottom||h.bottom==l.bottom&&h.right>l.right)&&(l=h),c+1>f&&(f=c),n(f,h.top,p-f,h.bottom)}),{start:a,end:l}}var s=e.display,o=e.doc,a=document.createDocumentFragment(),l=Xe(e.display),c=l.left,u=Math.max(s.sizerWidth,Ye(e)-s.sizer.offsetLeft)-l.right,h=t.from(),d=t.to();if(h.line==d.line)r(h.line,h.ch,d.ch);else{var f=Gn(o,h.line),p=Gn(o,d.line),g=vn(f)==vn(p),m=r(h.line,h.ch,g?f.text.length+1:null).end,v=r(d.line,g?0:null,d.ch).start;g&&(m.top<v.top-2?(n(m.right,m.top,null,m.bottom),n(c,v.top,v.left,v.bottom)):n(m.right,m.top,v.left-m.right,m.bottom)),m.bottom<v.top&&n(c,m.bottom,null,v.top)}i.appendChild(a)}function He(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Be(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,Hr(De,e))}function De(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var i=+new Date+e.options.workTime,n=so(t.mode,We(e,t.frontier)),r=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(s){if(t.frontier>=e.display.viewFrom){var o=s.styles,a=s.text.length>e.options.maxHighlightLength,l=_n(e,s,a?so(t.mode,n):n,!0);s.styles=l.styles;var c=s.styleClasses,u=l.classes;u?s.styleClasses=u:c&&(s.styleClasses=null);for(var h=!o||o.length!=s.styles.length||c!=u&&(!c||!u||c.bgClass!=u.bgClass||c.textClass!=u.textClass),d=0;!h&&d<o.length;++d)h=o[d]!=s.styles[d];h&&r.push(t.frontier),s.stateAfter=a?n:so(t.mode,n)}else s.text.length<=e.options.maxHighlightLength&&jn(e,s.text,n),s.stateAfter=t.frontier%5==0?so(t.mode,n):null;return++t.frontier,+new Date>i?(Be(e,e.options.workDelay),!0):void 0}),r.length&&Tt(e,function(){for(var t=0;t<r.length;t++)jt(e,r[t],"text")})}}function Re(e,t,i){for(var n,r,s=e.doc,o=i?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>o;--a){if(a<=s.first)return s.first;var l=Gn(s,a-1);if(l.stateAfter&&(!i||a<=s.frontier))return a;var c=Bo(l.text,null,e.options.tabSize);(null==r||n>c)&&(r=a-1,n=c)}return r}function We(e,t,i){var n=e.doc,r=e.display;if(!n.mode.startState)return!0;var s=Re(e,t,i),o=s>n.first&&Gn(n,s-1).stateAfter;return o=o?so(n.mode,o):oo(n.mode),n.iter(s,t,function(i){jn(e,i.text,o);var a=s==t-1||s%5==0||s>=r.viewFrom&&s<r.viewTo;i.stateAfter=a?so(n.mode,o):null,++s}),i&&(n.frontier=s),o}function Fe(e){return e.lineSpace.offsetTop}function qe(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Xe(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=qr(e.measure,Wr("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Ke(e){return _o-e.display.nativeBarWidth}function Ye(e){return e.display.scroller.clientWidth-Ke(e)-e.display.barWidth}function Ve(e){return e.display.scroller.clientHeight-Ke(e)-e.display.barHeight}function $e(e,t,i){var n=e.options.lineWrapping,r=n&&Ye(e);if(!t.measure.heights||n&&t.measure.width!=r){var s=t.measure.heights=[];if(n){t.measure.width=r;for(var o=t.text.firstChild.getClientRects(),a=0;a<o.length-1;a++){var l=o[a],c=o[a+1];Math.abs(l.bottom-c.bottom)>2&&s.push((l.bottom+c.top)/2-i.top)}}s.push(i.bottom-i.top)}}function Ue(e,t,i){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var n=0;n<e.rest.length;n++)if(er(e.rest[n])>i)return{map:e.measure.maps[n],cache:e.measure.caches[n],before:!0}}function Ge(e,t){t=vn(t);var i=er(t),n=e.display.externalMeasured=new Ot(e.doc,t,i);n.lineN=i;var r=n.built=Hn(e,n);return n.text=r.pre,qr(e.display.lineMeasure,r.pre),n}function Qe(e,t,i,n){return et(e,Je(e,t),i,n)}function Ze(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Ht(e,t)];var i=e.display.externalMeasured;return i&&t>=i.lineN&&t<i.lineN+i.size?i:void 0}function Je(e,t){var i=er(t),n=Ze(e,i);n&&!n.text?n=null:n&&n.changes&&(j(e,n,i,_(e)),e.curOp.forceUpdate=!0),n||(n=Ge(e,t));var r=Ue(n,t,i);return{line:t,view:n,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function et(e,t,i,n,r){t.before&&(i=-1);var s,o=i+(n||"");return t.cache.hasOwnProperty(o)?s=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||($e(e,t.view,t.rect),t.hasHeights=!0),s=it(e,t,i,n),s.bogus||(t.cache[o]=s)),{left:s.left,right:s.right,top:r?s.rtop:s.top,bottom:r?s.rbottom:s.bottom}}function tt(e,t,i){for(var n,r,s,o,a=0;a<e.length;a+=3){var l=e[a],c=e[a+1];if(l>t?(r=0,s=1,o="left"):c>t?(r=t-l,s=r+1):(a==e.length-3||t==c&&e[a+3]>t)&&(s=c-l,r=s-1,t>=c&&(o="right")),null!=r){if(n=e[a+2],l==c&&i==(n.insertLeft?"left":"right")&&(o=i),"left"==i&&0==r)for(;a&&e[a-2]==e[a-3]&&e[a-1].insertLeft;)n=e[(a-=3)+2],o="left";if("right"==i&&r==c-l)for(;a<e.length-3&&e[a+3]==e[a+4]&&!e[a+5].insertLeft;)n=e[(a+=3)+2],o="right";break}}return{node:n,start:r,end:s,collapse:o,coverStart:l,coverEnd:c}}function it(e,t,i,n){var r,s=tt(t.map,i,n),o=s.node,a=s.start,l=s.end,c=s.collapse;if(3==o.nodeType){for(var u=0;4>u;u++){for(;a&&Rr(t.line.text.charAt(s.coverStart+a));)--a;for(;s.coverStart+l<s.coverEnd&&Rr(t.line.text.charAt(s.coverStart+l));)++l;if(vs&&9>ys&&0==a&&l==s.coverEnd-s.coverStart)r=o.parentNode.getBoundingClientRect();else if(vs&&e.options.lineWrapping){var h=Fo(o,a,l).getClientRects();r=h.length?h["right"==n?h.length-1:0]:Ws}else r=Fo(o,a,l).getBoundingClientRect()||Ws;if(r.left||r.right||0==a)break;l=a,a-=1,c="right"}vs&&11>ys&&(r=nt(e.display.measure,r))}else{a>0&&(c=n="right");var h;r=e.options.lineWrapping&&(h=o.getClientRects()).length>1?h["right"==n?h.length-1:0]:o.getBoundingClientRect()}if(vs&&9>ys&&!a&&(!r||!r.left&&!r.right)){var d=o.parentNode.getClientRects()[0];r=d?{left:d.left,right:d.left+yt(e.display),top:d.top,bottom:d.bottom}:Ws}for(var f=r.top-t.rect.top,p=r.bottom-t.rect.top,g=(f+p)/2,m=t.view.measure.heights,u=0;u<m.length-1&&!(g<m[u]);u++);var v=u?m[u-1]:0,y=m[u],b={left:("right"==c?r.right:r.left)-t.rect.left,right:("left"==c?r.left:r.right)-t.rect.left,top:v,bottom:y};return r.left||r.right||(b.bogus=!0),e.options.singleCursorHeightPerLine||(b.rtop=f,b.rbottom=p),b}function nt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Zr(e))return t;var i=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*n,bottom:t.bottom*n}}function rt(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function st(e){e.display.externalMeasure=null,Fr(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)rt(e.display.view[t])}function ot(e){st(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function at(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function lt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function ct(e,t,i,n){if(t.widgets)for(var r=0;r<t.widgets.length;++r)if(t.widgets[r].above){var s=Sn(t.widgets[r]);i.top+=s,i.bottom+=s}if("line"==n)return i;n||(n="local");var o=ir(t);if("local"==n?o+=Fe(e.display):o-=e.display.viewOffset,"page"==n||"window"==n){var a=e.display.lineSpace.getBoundingClientRect();o+=a.top+("window"==n?0:lt());var l=a.left+("window"==n?0:at());i.left+=l,i.right+=l}return i.top+=o,i.bottom+=o,i}function ut(e,t,i){if("div"==i)return t;var n=t.left,r=t.top;if("page"==i)n-=at(),r-=lt();else if("local"==i||!i){var s=e.display.sizer.getBoundingClientRect();n+=s.left,r+=s.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:n-o.left,top:r-o.top}}function ht(e,t,i,n,r){return n||(n=Gn(e.doc,t.line)),ct(e,n,Qe(e,n,t.ch,r),i)}function dt(e,t,i,n,r,s){function o(t,o){var a=et(e,r,t,o?"right":"left",s);return o?a.left=a.right:a.right=a.left,ct(e,n,a,i)}function a(e,t){var i=l[t],n=i.level%2;return e==es(i)&&t&&i.level<l[t-1].level?(i=l[--t],e=ts(i)-(i.level%2?0:1),n=!0):e==ts(i)&&t<l.length-1&&i.level<l[t+1].level&&(i=l[++t],e=es(i)-i.level%2,n=!1),n&&e==i.to&&e>i.from?o(e-1):o(e,n)}n=n||Gn(e.doc,t.line),r||(r=Je(e,n));var l=nr(n),c=t.ch;if(!l)return o(c);var u=ls(l,c),h=a(c,u);return null!=ra&&(h.other=a(c,ra)),h}function ft(e,t){var i=0,t=me(e.doc,t);e.options.lineWrapping||(i=yt(e.display)*t.ch);var n=Gn(e.doc,t.line),r=ir(n)+Fe(e.display);return{left:i,right:i,top:r,bottom:r+n.height}}function pt(e,t,i,n){var r=js(e,t);return r.xRel=n,i&&(r.outside=!0),r}function gt(e,t,i){var n=e.doc;if(i+=e.display.viewOffset,0>i)return pt(n.first,0,!0,-1);var r=tr(n,i),s=n.first+n.size-1;if(r>s)return pt(n.first+n.size-1,Gn(n,s).text.length,!0,1);0>t&&(t=0);for(var o=Gn(n,r);;){var a=mt(e,o,r,t,i),l=gn(o),c=l&&l.find(0,!0);if(!l||!(a.ch>c.from.ch||a.ch==c.from.ch&&a.xRel>0))return a;r=er(o=c.to.line)}}function mt(e,t,i,n,r){function s(n){var r=dt(e,js(i,n),"line",t,c);return a=!0,o>r.bottom?r.left-l:o<r.top?r.left+l:(a=!1,r.left)}var o=r-ir(t),a=!1,l=2*e.display.wrapper.clientWidth,c=Je(e,t),u=nr(t),h=t.text.length,d=is(t),f=ns(t),p=s(d),g=a,m=s(f),v=a;if(n>m)return pt(i,f,v,1);for(;;){if(u?f==d||f==us(t,d,1):1>=f-d){for(var y=p>n||m-n>=n-p?d:f,b=n-(y==d?p:m);Rr(t.text.charAt(y));)++y;var x=pt(i,y,y==d?g:v,-1>b?-1:b>1?1:0);return x}var w=Math.ceil(h/2),k=d+w;if(u){k=d;for(var C=0;w>C;++C)k=us(t,k,1)}var S=s(k);S>n?(f=k,m=S,(v=a)&&(m+=1e3),h=w):(d=k,p=S,g=a,h-=w)}}function vt(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Bs){Bs=Wr("pre");for(var t=0;49>t;++t)Bs.appendChild(document.createTextNode("x")),Bs.appendChild(Wr("br"));Bs.appendChild(document.createTextNode("x"))}qr(e.measure,Bs);var i=Bs.offsetHeight/50;return i>3&&(e.cachedTextHeight=i),Fr(e.measure),i||1}function yt(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=Wr("span","xxxxxxxxxx"),i=Wr("pre",[t]);qr(e.measure,i);var n=t.getBoundingClientRect(),r=(n.right-n.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function bt(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++qs},Fs?Fs.ops.push(e.curOp):e.curOp.ownsGroup=Fs={ops:[e.curOp],delayedCallbacks:[]}}function xt(e){var t=e.delayedCallbacks,i=0;do{for(;i<t.length;i++)t[i].call(null);for(var n=0;n<e.ops.length;n++){var r=e.ops[n];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(i<t.length)}function wt(e){var t=e.curOp,i=t.ownsGroup;if(i)try{xt(i)}finally{Fs=null;for(var n=0;n<i.ops.length;n++)i.ops[n].cm.curOp=null;kt(i)}}function kt(e){for(var t=e.ops,i=0;i<t.length;i++)Ct(t[i]);for(var i=0;i<t.length;i++)St(t[i]);for(var i=0;i<t.length;i++)Et(t[i]);for(var i=0;i<t.length;i++)Mt(t[i]);for(var i=0;i<t.length;i++)Lt(t[i])}function Ct(e){var t=e.cm,i=t.display;M(t),e.updateMaxLine&&d(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new E(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function St(e){e.updatedDisplay=e.mustUpdate&&L(e.cm,e.update)}function Et(e){var t=e.cm,i=t.display;e.updatedDisplay&&N(t),e.barMeasure=p(t),i.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Qe(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+Ke(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-Ye(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=i.input.prepareSelection())}function Mt(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&ni(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.preparedSelection&&t.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&P(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&y(t,e.barMeasure),e.selectionChanged&&He(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),!e.focus||e.focus!=Xr()||document.hasFocus&&!document.hasFocus()||G(e.cm)}function Lt(e){var t=e.cm,i=t.display,n=t.doc;if(e.updatedDisplay&&T(t,e.update),null==i.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(i.wheelStartX=i.wheelStartY=null),null==e.scrollTop||i.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(n.scrollTop=Math.max(0,Math.min(i.scroller.scrollHeight-i.scroller.clientHeight,e.scrollTop)),i.scrollbars.setScrollTop(n.scrollTop),i.scroller.scrollTop=n.scrollTop),null==e.scrollLeft||i.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(n.scrollLeft=Math.max(0,Math.min(i.scroller.scrollWidth-Ye(t),e.scrollLeft)),i.scrollbars.setScrollLeft(n.scrollLeft),i.scroller.scrollLeft=n.scrollLeft,w(t)),e.scrollToPos){var r=Oi(t,me(n,e.scrollToPos.from),me(n,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Ni(t,r)}var s=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(s)for(var a=0;a<s.length;++a)s[a].lines.length||No(s[a],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&No(o[a],"unhide");i.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&No(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Tt(e,t){if(e.curOp)return t();bt(e);try{return t()}finally{wt(e)}}function At(e,t){return function(){if(e.curOp)return t.apply(e,arguments);bt(e);try{return t.apply(e,arguments)}finally{wt(e)}}}function Pt(e){return function(){if(this.curOp)return e.apply(this,arguments);bt(this);try{return e.apply(this,arguments)}finally{wt(this)}}}function Nt(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);bt(t);try{return e.apply(this,arguments)}finally{wt(t)}}}function Ot(e,t,i){this.line=t,this.rest=yn(t),this.size=this.rest?er(Nr(this.rest))-i+1:1,this.node=this.text=null,this.hidden=wn(e,t)}function _t(e,t,i){for(var n,r=[],s=t;i>s;s=n){var o=new Ot(e.doc,Gn(e.doc,s),s);n=s+o.size,r.push(o)}return r}function It(e,t,i,n){null==t&&(t=e.doc.first),null==i&&(i=e.doc.first+e.doc.size),n||(n=0);var r=e.display;if(n&&i<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)Is&&bn(e.doc,t)<r.viewTo&&zt(e);else if(i<=r.viewFrom)Is&&xn(e.doc,i+n)>r.viewFrom?zt(e):(r.viewFrom+=n,r.viewTo+=n);else if(t<=r.viewFrom&&i>=r.viewTo)zt(e);else if(t<=r.viewFrom){var s=Bt(e,i,i+n,1);s?(r.view=r.view.slice(s.index),r.viewFrom=s.lineN,r.viewTo+=n):zt(e)}else if(i>=r.viewTo){var s=Bt(e,t,t,-1);s?(r.view=r.view.slice(0,s.index),r.viewTo=s.lineN):zt(e)}else{var o=Bt(e,t,t,-1),a=Bt(e,i,i+n,1);o&&a?(r.view=r.view.slice(0,o.index).concat(_t(e,o.lineN,a.lineN)).concat(r.view.slice(a.index)),r.viewTo+=n):zt(e)}var l=r.externalMeasured;l&&(i<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(r.externalMeasured=null))}function jt(e,t,i){e.curOp.viewChanged=!0;var n=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var s=n.view[Ht(e,t)];if(null!=s.node){var o=s.changes||(s.changes=[]);-1==Or(o,i)&&o.push(i)}}}function zt(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Ht(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,0>t)return null;for(var i=e.display.view,n=0;n<i.length;n++)if(t-=i[n].size,0>t)return n}function Bt(e,t,i,n){var r,s=Ht(e,t),o=e.display.view;if(!Is||i==e.doc.first+e.doc.size)return{index:s,lineN:i};for(var a=0,l=e.display.viewFrom;s>a;a++)l+=o[a].size;if(l!=t){if(n>0){if(s==o.length-1)return null;r=l+o[s].size-t,s++}else r=l-t;t+=r,i+=r}for(;bn(e.doc,i)!=i;){if(s==(0>n?0:o.length-1))return null;i+=n*o[s-(0>n?1:0)].size,s+=n}return{index:s,lineN:i}}function Dt(e,t,i){var n=e.display,r=n.view;0==r.length||t>=n.viewTo||i<=n.viewFrom?(n.view=_t(e,t,i),n.viewFrom=t):(n.viewFrom>t?n.view=_t(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(Ht(e,t))),n.viewFrom=t,n.viewTo<i?n.view=n.view.concat(_t(e,n.viewTo,i)):n.viewTo>i&&(n.view=n.view.slice(0,Ht(e,i)))),n.viewTo=i}function Rt(e){for(var t=e.display.view,i=0,n=0;n<t.length;n++){var r=t[n];r.hidden||r.node&&!r.changes||++i}return i}function Wt(e){function t(){r.activeTouch&&(s=setTimeout(function(){r.activeTouch=null},1e3),o=r.activeTouch,o.end=+new Date)}function i(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function n(e,t){if(null==t.left)return!0;var i=t.left-e.left,n=t.top-e.top;return i*i+n*n>400}var r=e.display;To(r.scroller,"mousedown",At(e,Yt)),vs&&11>ys?To(r.scroller,"dblclick",At(e,function(t){if(!Er(e,t)){var i=Kt(e,t);if(i&&!Qt(e,t)&&!Xt(e.display,t)){Eo(t);var n=e.findWordAt(i);we(e.doc,n.anchor,n.head)}}})):To(r.scroller,"dblclick",function(t){Er(e,t)||Eo(t)}),Os||To(r.scroller,"contextmenu",function(t){vi(e,t)});var s,o={end:0};To(r.scroller,"touchstart",function(e){if(!i(e)){clearTimeout(s);var t=+new Date;r.activeTouch={start:t,moved:!1,prev:t-o.end<=300?o:null},1==e.touches.length&&(r.activeTouch.left=e.touches[0].pageX,r.activeTouch.top=e.touches[0].pageY)}}),To(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),To(r.scroller,"touchend",function(i){var s=r.activeTouch;if(s&&!Xt(r,i)&&null!=s.left&&!s.moved&&new Date-s.start<300){var o,a=e.coordsChar(r.activeTouch,"page");o=!s.prev||n(s,s.prev)?new de(a,a):!s.prev.prev||n(s,s.prev.prev)?e.findWordAt(a):new de(js(a.line,0),me(e.doc,js(a.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),Eo(i)}t()}),To(r.scroller,"touchcancel",t),To(r.scroller,"scroll",function(){r.scroller.clientHeight&&(ii(e,r.scroller.scrollTop),ni(e,r.scroller.scrollLeft,!0),No(e,"scroll",e))}),To(r.scroller,"mousewheel",function(t){ri(e,t)}),To(r.scroller,"DOMMouseScroll",function(t){ri(e,t)}),To(r.wrapper,"scroll",function(){r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(t){Er(e,t)||Lo(t)},over:function(t){Er(e,t)||(ei(e,t),Lo(t))},start:function(t){Jt(e,t)},drop:At(e,Zt),leave:function(){ti(e)}};var a=r.input.getField();To(a,"keyup",function(t){di.call(e,t)}),To(a,"keydown",At(e,ui)),To(a,"keypress",At(e,fi)),To(a,"focus",Hr(gi,e)),To(a,"blur",Hr(mi,e))}function Ft(t,i,n){var r=n&&n!=e.Init;if(!i!=!r){var s=t.display.dragFunctions,o=i?To:Po;o(t.display.scroller,"dragstart",s.start),o(t.display.scroller,"dragenter",s.enter),o(t.display.scroller,"dragover",s.over),o(t.display.scroller,"dragleave",s.leave),o(t.display.scroller,"drop",s.drop)}}function qt(e){var t=e.display;(t.lastWrapHeight!=t.wrapper.clientHeight||t.lastWrapWidth!=t.wrapper.clientWidth)&&(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Xt(e,t){for(var i=xr(t);i!=e.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==e.sizer&&i!=e.mover)return!0}function Kt(e,t,i,n){var r=e.display;if(!i&&"true"==xr(t).getAttribute("cm-not-content"))return null;var s,o,a=r.lineSpace.getBoundingClientRect();try{s=t.clientX-a.left,o=t.clientY-a.top}catch(t){return null}var l,c=gt(e,s,o);if(n&&1==c.xRel&&(l=Gn(e.doc,c.line).text).length==c.ch){var u=Bo(l,l.length,e.options.tabSize)-l.length;c=js(c.line,Math.max(0,Math.round((s-Xe(e.display).left)/yt(e.display))-u))}return c}function Yt(e){var t=this,i=t.display;if(!(i.activeTouch&&i.input.supportsTouch()||Er(t,e))){if(i.shift=e.shiftKey,Xt(i,e))return void(bs||(i.scroller.draggable=!1,setTimeout(function(){i.scroller.draggable=!0},100)));if(!Qt(t,e)){var n=Kt(t,e);switch(window.focus(),wr(e)){case 1:t.state.selectingText?t.state.selectingText(e):n?Vt(t,e,n):xr(e)==i.scroller&&Eo(e);break;case 2:bs&&(t.state.lastMiddleDown=+new Date),n&&we(t.doc,n),setTimeout(function(){i.input.focus()},20),Eo(e);break;case 3:Os?vi(t,e):pi(t)}}}}function Vt(e,t,i){vs?setTimeout(Hr(G,e),0):e.curOp.focus=Xr();var n,r=+new Date;Rs&&Rs.time>r-400&&0==zs(Rs.pos,i)?n="triple":Ds&&Ds.time>r-400&&0==zs(Ds.pos,i)?(n="double",Rs={time:r,pos:i}):(n="single",Ds={time:r,pos:i});var s,o=e.doc.sel,a=Ts?t.metaKey:t.ctrlKey;e.options.dragDrop&&Zo&&!Q(e)&&"single"==n&&(s=o.contains(i))>-1&&(zs((s=o.ranges[s]).from(),i)<0||i.xRel>0)&&(zs(s.to(),i)>0||i.xRel<0)?$t(e,t,i,a):Ut(e,t,i,n,a)}function $t(e,t,i,n){var r=e.display,s=+new Date,o=At(e,function(a){bs&&(r.scroller.draggable=!1),e.state.draggingText=!1,Po(document,"mouseup",o),Po(r.scroller,"drop",o),Math.abs(t.clientX-a.clientX)+Math.abs(t.clientY-a.clientY)<10&&(Eo(a),!n&&+new Date-200<s&&we(e.doc,i),bs||vs&&9==ys?setTimeout(function(){document.body.focus(),r.input.focus()},20):r.input.focus())});bs&&(r.scroller.draggable=!0),e.state.draggingText=o,r.scroller.dragDrop&&r.scroller.dragDrop(),To(document,"mouseup",o),To(r.scroller,"drop",o)}function Ut(e,t,i,n,r){function s(t){if(0!=zs(m,t))if(m=t,"rect"==n){for(var r=[],s=e.options.tabSize,o=Bo(Gn(c,i.line).text,i.ch,s),a=Bo(Gn(c,t.line).text,t.ch,s),l=Math.min(o,a),f=Math.max(o,a),p=Math.min(i.line,t.line),g=Math.min(e.lastLine(),Math.max(i.line,t.line));g>=p;p++){var v=Gn(c,p).text,y=Do(v,l,s);l==f?r.push(new de(js(p,y),js(p,y))):v.length>y&&r.push(new de(js(p,y),js(p,Do(v,f,s))))}r.length||r.push(new de(i,i)),Le(c,fe(d.ranges.slice(0,h).concat(r),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=u,x=b.anchor,w=t;if("single"!=n){if("double"==n)var k=e.findWordAt(t);else var k=new de(js(t.line,0),me(c,js(t.line+1,0)));zs(k.anchor,x)>0?(w=k.head,x=U(b.from(),k.anchor)):(w=k.anchor,x=$(b.to(),k.head))}var r=d.ranges.slice(0);r[h]=new de(me(c,x),w),Le(c,fe(r,h),zo)}}function o(t){var i=++y,r=Kt(e,t,!0,"rect"==n);if(r)if(0!=zs(r,m)){e.curOp.focus=Xr(),s(r);var a=x(l,c);(r.line>=a.to||r.line<a.from)&&setTimeout(At(e,function(){y==i&&o(t)}),150)}else{var u=t.clientY<v.top?-20:t.clientY>v.bottom?20:0;u&&setTimeout(At(e,function(){y==i&&(l.scroller.scrollTop+=u,o(t))}),50)}}function a(t){e.state.selectingText=!1,y=1/0,Eo(t),l.input.focus(),Po(document,"mousemove",b),Po(document,"mouseup",w),c.history.lastSelOrigin=null}var l=e.display,c=e.doc;Eo(t);var u,h,d=c.sel,f=d.ranges;if(r&&!t.shiftKey?(h=c.sel.contains(i),u=h>-1?f[h]:new de(i,i)):(u=c.sel.primary(),h=c.sel.primIndex),t.altKey)n="rect",r||(u=new de(i,i)),i=Kt(e,t,!0,!0),h=-1;else if("double"==n){var p=e.findWordAt(i);u=e.display.shift||c.extend?xe(c,u,p.anchor,p.head):p}else if("triple"==n){var g=new de(js(i.line,0),me(c,js(i.line+1,0)));u=e.display.shift||c.extend?xe(c,u,g.anchor,g.head):g}else u=xe(c,u,i);r?-1==h?(h=f.length,Le(c,fe(f.concat([u]),h),{scroll:!1,origin:"*mouse"})):f.length>1&&f[h].empty()&&"single"==n&&!t.shiftKey?(Le(c,fe(f.slice(0,h).concat(f.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),d=c.sel):Ce(c,h,u,zo):(h=0,Le(c,new he([u],0),zo),d=c.sel);var m=i,v=l.wrapper.getBoundingClientRect(),y=0,b=At(e,function(e){wr(e)?o(e):a(e)}),w=At(e,a);e.state.selectingText=w,To(document,"mousemove",b),To(document,"mouseup",w)}function Gt(e,t,i,n){try{var r=t.clientX,s=t.clientY}catch(t){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&Eo(t);var o=e.display,a=o.lineDiv.getBoundingClientRect();if(s>a.bottom||!Lr(e,i))return br(t);s-=a.top-o.viewOffset;for(var l=0;l<e.options.gutters.length;++l){var c=o.gutters.childNodes[l];if(c&&c.getBoundingClientRect().right>=r){var u=tr(e.doc,s),h=e.options.gutters[l];return No(e,i,e,u,h,t),br(t)}}}function Qt(e,t){return Gt(e,t,"gutterClick",!0)}function Zt(e){var t=this;if(ti(t),!Er(t,e)&&!Xt(t.display,e)){Eo(e),vs&&(Xs=+new Date);var i=Kt(t,e,!0),n=e.dataTransfer.files;if(i&&!Q(t))if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,s=Array(r),o=0,a=function(e,n){if(!t.options.allowDropFileTypes||-1!=Or(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=At(t,function(){var e=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),s[n]=e,++o==r){i=me(t.doc,i);var l={from:i,to:i,text:t.doc.splitLines(s.join(t.doc.lineSeparator())),origin:"paste"};Si(t.doc,l),Me(t.doc,pe(i,Gs(l)))}}),a.readAsText(e)}},l=0;r>l;++l)a(n[l],l);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(e),void setTimeout(function(){t.display.input.focus()},20);try{var s=e.dataTransfer.getData("Text");if(s){if(t.state.draggingText&&!(Ts?e.altKey:e.ctrlKey))var c=t.listSelections();if(Te(t.doc,pe(i,i)),c)for(var l=0;l<c.length;++l)Pi(t.doc,"",c[l].anchor,c[l].head,"drag");t.replaceSelection(s,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Jt(e,t){if(vs&&(!e.state.draggingText||+new Date-Xs<100))return void Lo(t);if(!Er(e,t)&&!Xt(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.setDragImage&&!Cs)){var i=Wr("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ks&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),t.dataTransfer.setDragImage(i,0,0),ks&&i.parentNode.removeChild(i)}}function ei(e,t){var i=Kt(e,t);if(i){var n=document.createDocumentFragment();je(e,i,n),e.display.dragCursor||(e.display.dragCursor=Wr("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),qr(e.display.dragCursor,n)}}function ti(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ii(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,ps||A(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),ps&&A(e),Be(e,100))}function ni(e,t,i){(i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,w(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function ri(e,t){var i=Vs(t),n=i.x,r=i.y,s=e.display,o=s.scroller,a=o.scrollWidth>o.clientWidth,l=o.scrollHeight>o.clientHeight;if(n&&a||r&&l){if(r&&Ts&&bs)e:for(var c=t.target,u=s.view;c!=o;c=c.parentNode)for(var h=0;h<u.length;h++)if(u[h].node==c){e.display.currentWheelTarget=c;break e}if(n&&!ps&&!ks&&null!=Ys)return r&&l&&ii(e,Math.max(0,Math.min(o.scrollTop+r*Ys,o.scrollHeight-o.clientHeight))),ni(e,Math.max(0,Math.min(o.scrollLeft+n*Ys,o.scrollWidth-o.clientWidth))),(!r||r&&l)&&Eo(t),void(s.wheelStartX=null);if(r&&null!=Ys){var d=r*Ys,f=e.doc.scrollTop,p=f+s.wrapper.clientHeight;0>d?f=Math.max(0,f+d-50):p=Math.min(e.doc.height,p+d+50),A(e,{top:f,bottom:p})}20>Ks&&(null==s.wheelStartX?(s.wheelStartX=o.scrollLeft,s.wheelStartY=o.scrollTop,s.wheelDX=n,s.wheelDY=r,setTimeout(function(){if(null!=s.wheelStartX){var e=o.scrollLeft-s.wheelStartX,t=o.scrollTop-s.wheelStartY,i=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,i&&(Ys=(Ys*Ks+i)/(Ks+1),++Ks)}},200)):(s.wheelDX+=n,s.wheelDY+=r))}}function si(e,t,i){if("string"==typeof t&&(t=ao[t],!t))return!1;e.display.input.ensurePolled();var n=e.display.shift,r=!1;try{Q(e)&&(e.state.suppressEdits=!0),i&&(e.display.shift=!1),r=t(e)!=Io}finally{e.display.shift=n,e.state.suppressEdits=!1}return r}function oi(e,t,i){for(var n=0;n<e.state.keyMaps.length;n++){var r=co(t,e.state.keyMaps[n],i,e);if(r)return r}return e.options.extraKeys&&co(t,e.options.extraKeys,i,e)||co(t,e.options.keyMap,i,e)}function ai(e,t,i,n){var r=e.state.keySeq;if(r){if(uo(t))return"handled";$s.set(50,function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())}),t=r+" "+t}var s=oi(e,t,n);return"multi"==s&&(e.state.keySeq=t),"handled"==s&&Cr(e,"keyHandled",e,t,i),("handled"==s||"multi"==s)&&(Eo(i),He(e)),r&&!s&&/\'$/.test(t)?(Eo(i),!0):!!s}function li(e,t){var i=ho(t,!0);return i?t.shiftKey&&!e.state.keySeq?ai(e,"Shift-"+i,t,function(t){return si(e,t,!0)})||ai(e,i,t,function(t){return("string"==typeof t?/^go[A-Z]/.test(t):t.motion)?si(e,t):void 0}):ai(e,i,t,function(t){return si(e,t)}):!1}function ci(e,t,i){return ai(e,"'"+i+"'",t,function(t){return si(e,t,!0)})}function ui(e){var t=this;if(t.curOp.focus=Xr(),!Er(t,e)){vs&&11>ys&&27==e.keyCode&&(e.returnValue=!1);var i=e.keyCode;t.display.shift=16==i||e.shiftKey;var n=li(t,e);ks&&(Us=n?i:null,!n&&88==i&&!ta&&(Ts?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||hi(t)}}function hi(e){function t(e){18!=e.keyCode&&e.altKey||(Uo(i,"CodeMirror-crosshair"),Po(document,"keyup",t),Po(document,"mouseover",t))}var i=e.display.lineDiv;Go(i,"CodeMirror-crosshair"),To(document,"keyup",t),To(document,"mouseover",t)}function di(e){16==e.keyCode&&(this.doc.sel.shift=!1),Er(this,e)}function fi(e){var t=this;if(!(Xt(t.display,e)||Er(t,e)||e.ctrlKey&&!e.altKey||Ts&&e.metaKey)){var i=e.keyCode,n=e.charCode;if(ks&&i==Us)return Us=null,void Eo(e);if(!ks||e.which&&!(e.which<10)||!li(t,e)){var r=String.fromCharCode(null==n?i:n);ci(t,e,r)||t.display.input.onKeyPress(e)}}}function pi(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,mi(e))},100)}function gi(e){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(No(e,"focus",e),e.state.focused=!0,Go(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),bs&&setTimeout(function(){e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),He(e))}function mi(e){e.state.delayingBlurEvent||(e.state.focused&&(No(e,"blur",e),e.state.focused=!1,Uo(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function vi(e,t){Xt(e.display,t)||yi(e,t)||Er(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function yi(e,t){return Lr(e,"gutterContextMenu")?Gt(e,t,"gutterContextMenu",!1):!1}function bi(e,t){if(zs(e,t.from)<0)return e;if(zs(e,t.to)<=0)return Gs(t);var i=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Gs(t).ch-t.to.ch),js(i,n)}function xi(e,t){for(var i=[],n=0;n<e.sel.ranges.length;n++){var r=e.sel.ranges[n];i.push(new de(bi(r.anchor,t),bi(r.head,t)))}return fe(i,e.sel.primIndex)}function wi(e,t,i){return e.line==t.line?js(i.line,e.ch-t.ch+i.ch):js(i.line+(e.line-t.line),e.ch)}function ki(e,t,i){for(var n=[],r=js(e.first,0),s=r,o=0;o<t.length;o++){var a=t[o],l=wi(a.from,r,s),c=wi(Gs(a),r,s);if(r=a.to,s=c,"around"==i){var u=e.sel.ranges[o],h=zs(u.head,u.anchor)<0;n[o]=new de(h?c:l,h?l:c)}else n[o]=new de(l,l)}return new he(n,e.sel.primIndex)}function Ci(e,t,i){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return i&&(n.update=function(t,i,n,r){t&&(this.from=me(e,t)),i&&(this.to=me(e,i)),n&&(this.text=n),void 0!==r&&(this.origin=r)}),No(e,"beforeChange",e,n),e.cm&&No(e.cm,"beforeChange",e.cm,n),n.canceled?null:{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Si(e,t,i){if(e.cm){if(!e.cm.curOp)return At(e.cm,Si)(e,t,i);if(e.cm.state.suppressEdits)return}if(!(Lr(e,"beforeChange")||e.cm&&Lr(e.cm,"beforeChange"))||(t=Ci(e,t,!0))){var n=_s&&!i&&an(e,t.from,t.to);
if(n)for(var r=n.length-1;r>=0;--r)Ei(e,{from:n[r].from,to:n[r].to,text:r?[""]:t.text});else Ei(e,t)}}function Ei(e,t){if(1!=t.text.length||""!=t.text[0]||0!=zs(t.from,t.to)){var i=xi(e,t);lr(e,t,i,e.cm?e.cm.curOp.id:NaN),Ti(e,t,i,rn(e,t));var n=[];$n(e,function(e,i){i||-1!=Or(n,e.history)||(yr(e.history,t),n.push(e.history)),Ti(e,t,null,rn(e,t))})}}function Mi(e,t,i){if(!e.cm||!e.cm.state.suppressEdits){for(var n,r=e.history,s=e.sel,o="undo"==t?r.done:r.undone,a="undo"==t?r.undone:r.done,l=0;l<o.length&&(n=o[l],i?!n.ranges||n.equals(e.sel):n.ranges);l++);if(l!=o.length){for(r.lastOrigin=r.lastSelOrigin=null;n=o.pop(),n.ranges;){if(hr(n,a),i&&!n.equals(e.sel))return void Le(e,n,{clearRedo:!1});s=n}var c=[];hr(s,a),a.push({changes:c,generation:r.generation}),r.generation=n.generation||++r.maxGeneration;for(var u=Lr(e,"beforeChange")||e.cm&&Lr(e.cm,"beforeChange"),l=n.changes.length-1;l>=0;--l){var h=n.changes[l];if(h.origin=t,u&&!Ci(e,h,!1))return void(o.length=0);c.push(sr(e,h));var d=l?xi(e,h):Nr(o);Ti(e,h,d,on(e,h)),!l&&e.cm&&e.cm.scrollIntoView({from:h.from,to:Gs(h)});var f=[];$n(e,function(e,t){t||-1!=Or(f,e.history)||(yr(e.history,h),f.push(e.history)),Ti(e,h,null,on(e,h))})}}}}function Li(e,t){if(0!=t&&(e.first+=t,e.sel=new he(_r(e.sel.ranges,function(e){return new de(js(e.anchor.line+t,e.anchor.ch),js(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){It(e.cm,e.first,e.first-t,t);for(var i=e.cm.display,n=i.viewFrom;n<i.viewTo;n++)jt(e.cm,n,"gutter")}}function Ti(e,t,i,n){if(e.cm&&!e.cm.curOp)return At(e.cm,Ti)(e,t,i,n);if(t.to.line<e.first)return void Li(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);Li(e,r),t={from:js(e.first,0),to:js(t.to.line+r,t.to.ch),text:[Nr(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:js(s,Gn(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Qn(e,t.from,t.to),i||(i=xi(e,t)),e.cm?Ai(e.cm,t,n):Kn(e,t,n),Te(e,i,jo)}}function Ai(e,t,i){var n=e.doc,r=e.display,o=t.from,a=t.to,l=!1,c=o.line;e.options.lineWrapping||(c=er(vn(Gn(n,o.line))),n.iter(c,a.line+1,function(e){return e==r.maxLine?(l=!0,!0):void 0})),n.sel.contains(t.from,t.to)>-1&&Mr(e),Kn(n,t,i,s(e)),e.options.lineWrapping||(n.iter(c,o.line+t.text.length,function(e){var t=h(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),n.frontier=Math.min(n.frontier,o.line),Be(e,400);var u=t.text.length-(a.line-o.line)-1;t.full?It(e):o.line!=a.line||1!=t.text.length||Xn(e.doc,t)?It(e,o.line,a.line+1,u):jt(e,o.line,"text");var d=Lr(e,"changes"),f=Lr(e,"change");if(f||d){var p={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};f&&Cr(e,"change",e,p),d&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(p)}e.display.selForContextMenu=null}function Pi(e,t,i,n,r){if(n||(n=i),zs(n,i)<0){var s=n;n=i,i=s}"string"==typeof t&&(t=e.splitLines(t)),Si(e,{from:i,to:n,text:t,origin:r})}function Ni(e,t){if(!Er(e,"scrollCursorIntoView")){var i=e.display,n=i.sizer.getBoundingClientRect(),r=null;if(t.top+n.top<0?r=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!Es){var s=Wr("div","​",null,"position: absolute; top: "+(t.top-i.viewOffset-Fe(e.display))+"px; height: "+(t.bottom-t.top+Ke(e)+i.barHeight)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(r),e.display.lineSpace.removeChild(s)}}}function Oi(e,t,i,n){null==n&&(n=0);for(var r=0;5>r;r++){var s=!1,o=dt(e,t),a=i&&i!=t?dt(e,i):o,l=Ii(e,Math.min(o.left,a.left),Math.min(o.top,a.top)-n,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+n),c=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=l.scrollTop&&(ii(e,l.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(s=!0)),null!=l.scrollLeft&&(ni(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(s=!0)),!s)break}return o}function _i(e,t,i,n,r){var s=Ii(e,t,i,n,r);null!=s.scrollTop&&ii(e,s.scrollTop),null!=s.scrollLeft&&ni(e,s.scrollLeft)}function Ii(e,t,i,n,r){var s=e.display,o=vt(e.display);0>i&&(i=0);var a=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:s.scroller.scrollTop,l=Ve(e),c={};r-i>l&&(r=i+l);var u=e.doc.height+qe(s),h=o>i,d=r>u-o;if(a>i)c.scrollTop=h?0:i;else if(r>a+l){var f=Math.min(i,(d?u:r)-l);f!=a&&(c.scrollTop=f)}var p=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:s.scroller.scrollLeft,g=Ye(e)-(e.options.fixedGutter?s.gutters.offsetWidth:0),m=n-t>g;return m&&(n=t+g),10>t?c.scrollLeft=0:p>t?c.scrollLeft=Math.max(0,t-(m?0:10)):n>g+p-3&&(c.scrollLeft=n+(m?0:10)-g),c}function ji(e,t,i){(null!=t||null!=i)&&Hi(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=i&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+i)}function zi(e){Hi(e);var t=e.getCursor(),i=t,n=t;e.options.lineWrapping||(i=t.ch?js(t.line,t.ch-1):t,n=js(t.line,t.ch+1)),e.curOp.scrollToPos={from:i,to:n,margin:e.options.cursorScrollMargin,isCursor:!0}}function Hi(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=ft(e,t.from),n=ft(e,t.to),r=Ii(e,Math.min(i.left,n.left),Math.min(i.top,n.top)-t.margin,Math.max(i.right,n.right),Math.max(i.bottom,n.bottom)+t.margin);e.scrollTo(r.scrollLeft,r.scrollTop)}}function Bi(e,t,i,n){var r,s=e.doc;null==i&&(i="add"),"smart"==i&&(s.mode.indent?r=We(e,t):i="prev");var o=e.options.tabSize,a=Gn(s,t),l=Bo(a.text,null,o);a.stateAfter&&(a.stateAfter=null);var c,u=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==i&&(c=s.mode.indent(r,a.text.slice(u.length),a.text),c==Io||c>150)){if(!n)return;i="prev"}}else c=0,i="not";"prev"==i?c=t>s.first?Bo(Gn(s,t-1).text,null,o):0:"add"==i?c=l+e.options.indentUnit:"subtract"==i?c=l-e.options.indentUnit:"number"==typeof i&&(c=l+i),c=Math.max(0,c);var h="",d=0;if(e.options.indentWithTabs)for(var f=Math.floor(c/o);f;--f)d+=o,h+="	";if(c>d&&(h+=Pr(c-d)),h!=u)return Pi(s,h,js(t,0),js(t,u.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<s.sel.ranges.length;f++){var p=s.sel.ranges[f];if(p.head.line==t&&p.head.ch<u.length){var d=js(t,u.length);Ce(s,f,new de(d,d));break}}}function Di(e,t,i,n){var r=t,s=t;return"number"==typeof t?s=Gn(e,ge(e,t)):r=er(t),null==r?null:(n(s,r)&&e.cm&&jt(e.cm,r,i),s)}function Ri(e,t){for(var i=e.doc.sel.ranges,n=[],r=0;r<i.length;r++){for(var s=t(i[r]);n.length&&zs(s.from,Nr(n).to)<=0;){var o=n.pop();if(zs(o.from,s.from)<0){s.from=o.from;break}}n.push(s)}Tt(e,function(){for(var t=n.length-1;t>=0;t--)Pi(e.doc,"",n[t].from,n[t].to,"+delete");zi(e)})}function Wi(e,t,i,n,r){function s(){var t=a+i;return t<e.first||t>=e.first+e.size?h=!1:(a=t,u=Gn(e,t))}function o(e){var t=(r?us:hs)(u,l,i,!0);if(null==t){if(e||!s())return h=!1;l=r?(0>i?ns:is)(u):0>i?u.text.length:0}else l=t;return!0}var a=t.line,l=t.ch,c=i,u=Gn(e,a),h=!0;if("char"==n)o();else if("column"==n)o(!0);else if("word"==n||"group"==n)for(var d=null,f="group"==n,p=e.cm&&e.cm.getHelper(t,"wordChars"),g=!0;!(0>i)||o(!g);g=!1){var m=u.text.charAt(l)||"\n",v=Br(m,p)?"w":f&&"\n"==m?"n":!f||/\s/.test(m)?null:"p";if(!f||g||v||(v="s"),d&&d!=v){0>i&&(i=1,o());break}if(v&&(d=v),i>0&&!o(!g))break}var y=Oe(e,js(a,l),c,!0);return h||(y.hitSide=!0),y}function Fi(e,t,i,n){var r,s=e.doc,o=t.left;if("page"==n){var a=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);r=t.top+i*(a-(0>i?1.5:.5)*vt(e.display))}else"line"==n&&(r=i>0?t.bottom+3:t.top-3);for(;;){var l=gt(e,o,r);if(!l.outside)break;if(0>i?0>=r:r>=s.height){l.hitSide=!0;break}r+=5*i}return l}function qi(t,i,n,r){e.defaults[t]=i,n&&(Zs[t]=r?function(e,t,i){i!=Js&&n(e,t,i)}:n)}function Xi(e){for(var t,i,n,r,s=e.split(/-(?!$)/),e=s[s.length-1],o=0;o<s.length-1;o++){var a=s[o];if(/^(cmd|meta|m)$/i.test(a))r=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else{if(!/^s(hift)$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return t&&(e="Alt-"+e),i&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function Ki(e){return"string"==typeof e?lo[e]:e}function Yi(e,t,i,n,r){if(n&&n.shared)return Vi(e,t,i,n,r);if(e.cm&&!e.cm.curOp)return At(e.cm,Yi)(e,t,i,n,r);var s=new go(e,r),o=zs(t,i);if(n&&zr(n,s,!1),o>0||0==o&&s.clearWhenEmpty!==!1)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=Wr("span",[s.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(mn(e,t.line,t,i,s)||t.line!=i.line&&mn(e,i.line,t,i,s))throw new Error("Inserting collapsed marker partially overlapping an existing one");Is=!0}s.addToHistory&&lr(e,{from:t,to:i,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,i.line+1,function(e){c&&s.collapsed&&!c.options.lineWrapping&&vn(e)==c.display.maxLine&&(a=!0),s.collapsed&&l!=t.line&&Jn(e,0),en(e,new Qi(s,l==t.line?t.ch:null,l==i.line?i.ch:null)),++l}),s.collapsed&&e.iter(t.line,i.line+1,function(t){wn(e,t)&&Jn(t,0)}),s.clearOnEnter&&To(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(_s=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++po,s.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),s.collapsed)It(c,t.line,i.line+1);else if(s.className||s.title||s.startStyle||s.endStyle||s.css)for(var u=t.line;u<=i.line;u++)jt(c,u,"text");s.atomic&&Pe(c.doc),Cr(c,"markerAdded",c,s)}return s}function Vi(e,t,i,n,r){n=zr(n),n.shared=!1;var s=[Yi(e,t,i,n,r)],o=s[0],a=n.widgetNode;return $n(e,function(e){a&&(n.widgetNode=a.cloneNode(!0)),s.push(Yi(e,me(e,t),me(e,i),n,r));for(var l=0;l<e.linked.length;++l)if(e.linked[l].isParent)return;o=Nr(s)}),new mo(s,o)}function $i(e){return e.findMarks(js(e.first,0),e.clipPos(js(e.lastLine())),function(e){return e.parent})}function Ui(e,t){for(var i=0;i<t.length;i++){var n=t[i],r=n.find(),s=e.clipPos(r.from),o=e.clipPos(r.to);if(zs(s,o)){var a=Yi(e,s,o,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function Gi(e){for(var t=0;t<e.length;t++){var i=e[t],n=[i.primary.doc];$n(i.primary.doc,function(e){n.push(e)});for(var r=0;r<i.markers.length;r++){var s=i.markers[r];-1==Or(n,s.doc)&&(s.parent=null,i.markers.splice(r--,1))}}}function Qi(e,t,i){this.marker=e,this.from=t,this.to=i}function Zi(e,t){if(e)for(var i=0;i<e.length;++i){var n=e[i];if(n.marker==t)return n}}function Ji(e,t){for(var i,n=0;n<e.length;++n)e[n]!=t&&(i||(i=[])).push(e[n]);return i}function en(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function tn(e,t,i){if(e)for(var n,r=0;r<e.length;++r){var s=e[r],o=s.marker,a=null==s.from||(o.inclusiveLeft?s.from<=t:s.from<t);if(a||s.from==t&&"bookmark"==o.type&&(!i||!s.marker.insertLeft)){var l=null==s.to||(o.inclusiveRight?s.to>=t:s.to>t);(n||(n=[])).push(new Qi(o,s.from,l?null:s.to))}}return n}function nn(e,t,i){if(e)for(var n,r=0;r<e.length;++r){var s=e[r],o=s.marker,a=null==s.to||(o.inclusiveRight?s.to>=t:s.to>t);if(a||s.from==t&&"bookmark"==o.type&&(!i||s.marker.insertLeft)){var l=null==s.from||(o.inclusiveLeft?s.from<=t:s.from<t);(n||(n=[])).push(new Qi(o,l?null:s.from-t,null==s.to?null:s.to-t))}}return n}function rn(e,t){if(t.full)return null;var i=ye(e,t.from.line)&&Gn(e,t.from.line).markedSpans,n=ye(e,t.to.line)&&Gn(e,t.to.line).markedSpans;if(!i&&!n)return null;var r=t.from.ch,s=t.to.ch,o=0==zs(t.from,t.to),a=tn(i,r,o),l=nn(n,s,o),c=1==t.text.length,u=Nr(t.text).length+(c?r:0);if(a)for(var h=0;h<a.length;++h){var d=a[h];if(null==d.to){var f=Zi(l,d.marker);f?c&&(d.to=null==f.to?null:f.to+u):d.to=r}}if(l)for(var h=0;h<l.length;++h){var d=l[h];if(null!=d.to&&(d.to+=u),null==d.from){var f=Zi(a,d.marker);f||(d.from=u,c&&(a||(a=[])).push(d))}else d.from+=u,c&&(a||(a=[])).push(d)}a&&(a=sn(a)),l&&l!=a&&(l=sn(l));var p=[a];if(!c){var g,m=t.text.length-2;if(m>0&&a)for(var h=0;h<a.length;++h)null==a[h].to&&(g||(g=[])).push(new Qi(a[h].marker,null,null));for(var h=0;m>h;++h)p.push(g);p.push(l)}return p}function sn(e){for(var t=0;t<e.length;++t){var i=e[t];null!=i.from&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function on(e,t){var i=pr(e,t),n=rn(e,t);if(!i)return n;if(!n)return i;for(var r=0;r<i.length;++r){var s=i[r],o=n[r];if(s&&o)e:for(var a=0;a<o.length;++a){for(var l=o[a],c=0;c<s.length;++c)if(s[c].marker==l.marker)continue e;s.push(l)}else o&&(i[r]=o)}return i}function an(e,t,i){var n=null;if(e.iter(t.line,i.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var i=e.markedSpans[t].marker;!i.readOnly||n&&-1!=Or(n,i)||(n||(n=[])).push(i)}}),!n)return null;for(var r=[{from:t,to:i}],s=0;s<n.length;++s)for(var o=n[s],a=o.find(0),l=0;l<r.length;++l){var c=r[l];if(!(zs(c.to,a.from)<0||zs(c.from,a.to)>0)){var u=[l,1],h=zs(c.from,a.from),d=zs(c.to,a.to);(0>h||!o.inclusiveLeft&&!h)&&u.push({from:c.from,to:a.from}),(d>0||!o.inclusiveRight&&!d)&&u.push({from:a.to,to:c.to}),r.splice.apply(r,u),l+=u.length-1}}return r}function ln(e){var t=e.markedSpans;if(t){for(var i=0;i<t.length;++i)t[i].marker.detachLine(e);e.markedSpans=null}}function cn(e,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(e);e.markedSpans=t}}function un(e){return e.inclusiveLeft?-1:0}function hn(e){return e.inclusiveRight?1:0}function dn(e,t){var i=e.lines.length-t.lines.length;if(0!=i)return i;var n=e.find(),r=t.find(),s=zs(n.from,r.from)||un(e)-un(t);if(s)return-s;var o=zs(n.to,r.to)||hn(e)-hn(t);return o?o:t.id-e.id}function fn(e,t){var i,n=Is&&e.markedSpans;if(n)for(var r,s=0;s<n.length;++s)r=n[s],r.marker.collapsed&&null==(t?r.from:r.to)&&(!i||dn(i,r.marker)<0)&&(i=r.marker);return i}function pn(e){return fn(e,!0)}function gn(e){return fn(e,!1)}function mn(e,t,i,n,r){var s=Gn(e,t),o=Is&&s.markedSpans;if(o)for(var a=0;a<o.length;++a){var l=o[a];if(l.marker.collapsed){var c=l.marker.find(0),u=zs(c.from,i)||un(l.marker)-un(r),h=zs(c.to,n)||hn(l.marker)-hn(r);if(!(u>=0&&0>=h||0>=u&&h>=0)&&(0>=u&&(zs(c.to,i)>0||l.marker.inclusiveRight&&r.inclusiveLeft)||u>=0&&(zs(c.from,n)<0||l.marker.inclusiveLeft&&r.inclusiveRight)))return!0}}}function vn(e){for(var t;t=pn(e);)e=t.find(-1,!0).line;return e}function yn(e){for(var t,i;t=gn(e);)e=t.find(1,!0).line,(i||(i=[])).push(e);return i}function bn(e,t){var i=Gn(e,t),n=vn(i);return i==n?t:er(n)}function xn(e,t){if(t>e.lastLine())return t;var i,n=Gn(e,t);if(!wn(e,n))return t;for(;i=gn(n);)n=i.find(1,!0).line;return er(n)+1}function wn(e,t){var i=Is&&t.markedSpans;if(i)for(var n,r=0;r<i.length;++r)if(n=i[r],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&kn(e,t,n))return!0}}function kn(e,t,i){if(null==i.to){var n=i.marker.find(1,!0);return kn(e,n.line,Zi(n.line.markedSpans,i.marker))}if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(var r,s=0;s<t.markedSpans.length;++s)if(r=t.markedSpans[s],r.marker.collapsed&&!r.marker.widgetNode&&r.from==i.to&&(null==r.to||r.to!=i.from)&&(r.marker.inclusiveLeft||i.marker.inclusiveRight)&&kn(e,t,r))return!0}function Cn(e,t,i){ir(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ji(e,null,i)}function Sn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!Yo(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),qr(t.display.measure,Wr("div",[e.node],null,i))}return e.height=e.node.offsetHeight}function En(e,t,i,n){var r=new vo(e,i,n),s=e.cm;return s&&r.noHScroll&&(s.display.alignWidgets=!0),Di(e,t,"widget",function(t){var i=t.widgets||(t.widgets=[]);if(null==r.insertAt?i.push(r):i.splice(Math.min(i.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,s&&!wn(e,t)){var n=ir(t)<e.scrollTop;Jn(t,t.height+Sn(r)),n&&ji(s,null,r.height),s.curOp.forceUpdate=!0}return!0}),r}function Mn(e,t,i,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),ln(e),cn(e,i);var r=n?n(e):1;r!=e.height&&Jn(e,r)}function Ln(e){e.parent=null,ln(e)}function Tn(e,t){if(e)for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i)break;e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var n=i[1]?"bgClass":"textClass";null==t[n]?t[n]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+i[2])}return e}function An(t,i){if(t.blankLine)return t.blankLine(i);if(t.innerMode){var n=e.innerMode(t,i);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function Pn(t,i,n,r){for(var s=0;10>s;s++){r&&(r[0]=e.innerMode(t,n).mode);var o=t.token(i,n);if(i.pos>i.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}function Nn(e,t,i,n){function r(e){return{start:h.start,end:h.pos,string:h.current(),type:s||null,state:e?so(o.mode,u):u}}var s,o=e.doc,a=o.mode;t=me(o,t);var l,c=Gn(o,t.line),u=We(e,t.line,i),h=new fo(c.text,e.options.tabSize);for(n&&(l=[]);(n||h.pos<t.ch)&&!h.eol();)h.start=h.pos,s=Pn(a,h,u),n&&l.push(r(!0));return n?l:r()}function On(e,t,i,n,r,s,o){var a=i.flattenSpans;null==a&&(a=e.options.flattenSpans);var l,c=0,u=null,h=new fo(t,e.options.tabSize),d=e.options.addModeClass&&[null];for(""==t&&Tn(An(i,n),s);!h.eol();){if(h.pos>e.options.maxHighlightLength?(a=!1,o&&jn(e,t,n,h.pos),h.pos=t.length,l=null):l=Tn(Pn(i,h,n,d),s),d){var f=d[0].name;f&&(l="m-"+(l?f+" "+l:f))}if(!a||u!=l){for(;c<h.start;)c=Math.min(h.start,c+5e4),r(c,u);u=l}h.start=h.pos}for(;c<h.pos;){var p=Math.min(h.pos,c+5e4);r(p,u),c=p}}function _n(e,t,i,n){var r=[e.state.modeGen],s={};On(e,t.text,e.doc.mode,i,function(e,t){r.push(e,t)},s,n);for(var o=0;o<e.state.overlays.length;++o){var a=e.state.overlays[o],l=1,c=0;On(e,t.text,a.mode,!0,function(e,t){for(var i=l;e>c;){var n=r[l];n>e&&r.splice(l,1,e,r[l+1],n),l+=2,c=Math.min(e,n)}if(t)if(a.opaque)r.splice(i,l-i,e,"cm-overlay "+t),l=i+2;else for(;l>i;i+=2){var s=r[i+1];r[i+1]=(s?s+" ":"")+"cm-overlay "+t}},s)}return{styles:r,classes:s.bgClass||s.textClass?s:null}}function In(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=We(e,er(t)),r=_n(e,t,t.text.length>e.options.maxHighlightLength?so(e.doc.mode,n):n);t.stateAfter=n,t.styles=r.styles,r.classes?t.styleClasses=r.classes:t.styleClasses&&(t.styleClasses=null),i===e.doc.frontier&&e.doc.frontier++}return t.styles}function jn(e,t,i,n){var r=e.doc.mode,s=new fo(t,e.options.tabSize);for(s.start=s.pos=n||0,""==t&&An(r,i);!s.eol();)Pn(r,s,i),s.start=s.pos}function zn(e,t){if(!e||/^\s*$/.test(e))return null;var i=t.addModeClass?xo:bo;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))}function Hn(e,t){var i=Wr("span",null,null,bs?"padding-right: .1px":null),n={pre:Wr("pre",[i],"CodeMirror-line"),content:i,col:0,pos:0,cm:e,splitSpaces:(vs||bs)&&e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var s,o=r?t.rest[r-1]:t.line;n.pos=0,n.addToken=Dn,Qr(e.display.measure)&&(s=nr(o))&&(n.addToken=Wn(n.addToken,s)),n.map=[];var a=t!=e.display.externalMeasured&&er(o);qn(o,n,In(e,o,a)),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=Yr(o.styleClasses.bgClass,n.bgClass||"")),o.styleClasses.textClass&&(n.textClass=Yr(o.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Gr(e.display.measure))),0==r?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return bs&&/\bcm-tab\b/.test(n.content.lastChild.className)&&(n.content.className="cm-tab-wrap-hack"),No(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=Yr(n.pre.className,n.textClass||"")),n}function Bn(e){var t=Wr("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Dn(e,t,i,n,r,s,o){if(t){var a=e.splitSpaces?t.replace(/ {3,}/g,Rn):t,l=e.cm.state.specialChars,c=!1;if(l.test(t))for(var u=document.createDocumentFragment(),h=0;;){l.lastIndex=h;var d=l.exec(t),f=d?d.index-h:t.length-h;if(f){var p=document.createTextNode(a.slice(h,h+f));vs&&9>ys?u.appendChild(Wr("span",[p])):u.appendChild(p),e.map.push(e.pos,e.pos+f,p),e.col+=f,e.pos+=f}if(!d)break;if(h+=f+1,"	"==d[0]){var g=e.cm.options.tabSize,m=g-e.col%g,p=u.appendChild(Wr("span",Pr(m),"cm-tab"));p.setAttribute("role","presentation"),p.setAttribute("cm-text","	"),e.col+=m}else if("\r"==d[0]||"\n"==d[0]){var p=u.appendChild(Wr("span","\r"==d[0]?"␍":"␤","cm-invalidchar"));p.setAttribute("cm-text",d[0]),e.col+=1}else{var p=e.cm.options.specialCharPlaceholder(d[0]);p.setAttribute("cm-text",d[0]),vs&&9>ys?u.appendChild(Wr("span",[p])):u.appendChild(p),e.col+=1}e.map.push(e.pos,e.pos+1,p),e.pos++}else{e.col+=t.length;var u=document.createTextNode(a);e.map.push(e.pos,e.pos+t.length,u),vs&&9>ys&&(c=!0),e.pos+=t.length}if(i||n||r||c||o){var v=i||"";n&&(v+=n),r&&(v+=r);var y=Wr("span",[u],v,o);return s&&(y.title=s),e.content.appendChild(y)}e.content.appendChild(u)}}function Rn(e){for(var t=" ",i=0;i<e.length-2;++i)t+=i%2?" ":" ";return t+=" "}function Wn(e,t){return function(i,n,r,s,o,a,l){r=r?r+" cm-force-border":"cm-force-border";for(var c=i.pos,u=c+n.length;;){for(var h=0;h<t.length;h++){var d=t[h];if(d.to>c&&d.from<=c)break}if(d.to>=u)return e(i,n,r,s,o,a,l);e(i,n.slice(0,d.to-c),r,s,null,a,l),s=null,n=n.slice(d.to-c),c=d.to}}}function Fn(e,t,i,n){var r=!n&&i.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!n&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",i.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t}function qn(e,t,i){var n=e.markedSpans,r=e.text,s=0;if(n)for(var o,a,l,c,u,h,d,f=r.length,p=0,g=1,m="",v=0;;){if(v==p){l=c=u=h=a="",d=null,v=1/0;for(var y=[],b=0;b<n.length;++b){var x=n[b],w=x.marker;"bookmark"==w.type&&x.from==p&&w.widgetNode?y.push(w):x.from<=p&&(null==x.to||x.to>p||w.collapsed&&x.to==p&&x.from==p)?(null!=x.to&&x.to!=p&&v>x.to&&(v=x.to,c=""),w.className&&(l+=" "+w.className),w.css&&(a=(a?a+";":"")+w.css),w.startStyle&&x.from==p&&(u+=" "+w.startStyle),w.endStyle&&x.to==v&&(c+=" "+w.endStyle),w.title&&!h&&(h=w.title),w.collapsed&&(!d||dn(d.marker,w)<0)&&(d=x)):x.from>p&&v>x.from&&(v=x.from)}if(d&&(d.from||0)==p){if(Fn(t,(null==d.to?f+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}if(!d&&y.length)for(var b=0;b<y.length;++b)Fn(t,0,y[b])}if(p>=f)break;for(var k=Math.min(f,v);;){if(m){var C=p+m.length;if(!d){var S=C>k?m.slice(0,k-p):m;t.addToken(t,S,o?o+l:l,u,p+S.length==v?c:"",h,a)}if(C>=k){m=m.slice(k-p),p=k;break}p=C,u=""}m=r.slice(s,s=i[g++]),o=zn(i[g++],t.cm.options)}}else for(var g=1;g<i.length;g+=2)t.addToken(t,r.slice(s,s=i[g]),zn(i[g+1],t.cm.options))}function Xn(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Nr(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Kn(e,t,i,n){function r(e){return i?i[e]:null}function s(e,i,r){Mn(e,i,r,n),Cr(e,"change",e,t)}function o(e,t){for(var i=e,s=[];t>i;++i)s.push(new yo(c[i],r(i),n));return s}var a=t.from,l=t.to,c=t.text,u=Gn(e,a.line),h=Gn(e,l.line),d=Nr(c),f=r(c.length-1),p=l.line-a.line;if(t.full)e.insert(0,o(0,c.length)),e.remove(c.length,e.size-c.length);else if(Xn(e,t)){var g=o(0,c.length-1);s(h,h.text,f),p&&e.remove(a.line,p),g.length&&e.insert(a.line,g)}else if(u==h)if(1==c.length)s(u,u.text.slice(0,a.ch)+d+u.text.slice(l.ch),f);else{var g=o(1,c.length-1);g.push(new yo(d+u.text.slice(l.ch),f,n)),s(u,u.text.slice(0,a.ch)+c[0],r(0)),e.insert(a.line+1,g)}else if(1==c.length)s(u,u.text.slice(0,a.ch)+c[0]+h.text.slice(l.ch),r(0)),e.remove(a.line+1,p);else{s(u,u.text.slice(0,a.ch)+c[0],r(0)),s(h,d+h.text.slice(l.ch),f);var g=o(1,c.length-1);p>1&&e.remove(a.line+1,p-1),e.insert(a.line+1,g)}Cr(e,"change",e,t)}function Yn(e){this.lines=e,this.parent=null;for(var t=0,i=0;t<e.length;++t)e[t].parent=this,i+=e[t].height;this.height=i}function Vn(e){this.children=e;for(var t=0,i=0,n=0;n<e.length;++n){var r=e[n];t+=r.chunkSize(),i+=r.height,r.parent=this}this.size=t,this.height=i,this.parent=null}function $n(e,t,i){function n(e,r,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var a=e.linked[o];if(a.doc!=r){var l=s&&a.sharedHist;(!i||l)&&(t(a.doc,l),n(a.doc,e,l))}}}n(e,null,!0)}function Un(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,o(e),i(e),e.options.lineWrapping||d(e),e.options.mode=t.modeOption,It(e)}function Gn(e,t){if(t-=e.first,0>t||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var i=e;!i.lines;)for(var n=0;;++n){var r=i.children[n],s=r.chunkSize();if(s>t){i=r;break}t-=s}return i.lines[t]}function Qn(e,t,i){var n=[],r=t.line;return e.iter(t.line,i.line+1,function(e){var s=e.text;r==i.line&&(s=s.slice(0,i.ch)),r==t.line&&(s=s.slice(t.ch)),n.push(s),++r}),n}function Zn(e,t,i){var n=[];return e.iter(t,i,function(e){n.push(e.text)}),n}function Jn(e,t){var i=t-e.height;if(i)for(var n=e;n;n=n.parent)n.height+=i}function er(e){if(null==e.parent)return null;for(var t=e.parent,i=Or(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var r=0;n.children[r]!=t;++r)i+=n.children[r].chunkSize();return i+t.first}function tr(e,t){var i=e.first;e:do{for(var n=0;n<e.children.length;++n){var r=e.children[n],s=r.height;if(s>t){e=r;continue e}t-=s,i+=r.chunkSize()}return i}while(!e.lines);for(var n=0;n<e.lines.length;++n){var o=e.lines[n],a=o.height;if(a>t)break;t-=a}return i+n}function ir(e){e=vn(e);for(var t=0,i=e.parent,n=0;n<i.lines.length;++n){var r=i.lines[n];if(r==e)break;t+=r.height}for(var s=i.parent;s;i=s,s=i.parent)for(var n=0;n<s.children.length;++n){var o=s.children[n];if(o==i)break;t+=o.height}return t}function nr(e){var t=e.order;return null==t&&(t=e.order=sa(e.text)),t}function rr(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function sr(e,t){var i={from:V(t.from),to:Gs(t),text:Qn(e,t.from,t.to)};return dr(e,i,t.from.line,t.to.line+1),$n(e,function(e){dr(e,i,t.from.line,t.to.line+1)},!0),i}function or(e){for(;e.length;){var t=Nr(e);if(!t.ranges)break;e.pop()}}function ar(e,t){return t?(or(e.done),Nr(e.done)):e.done.length&&!Nr(e.done).ranges?Nr(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Nr(e.done)):void 0}function lr(e,t,i,n){var r=e.history;r.undone.length=0;var s,o=+new Date;if((r.lastOp==n||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&r.lastModTime>o-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(s=ar(r,r.lastOp==n))){var a=Nr(s.changes);0==zs(t.from,t.to)&&0==zs(t.from,a.to)?a.to=Gs(t):s.changes.push(sr(e,t))}else{var l=Nr(r.done);for(l&&l.ranges||hr(e.sel,r.done),s={changes:[sr(e,t)],generation:r.generation},r.done.push(s);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(i),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=o,r.lastOp=r.lastSelOp=n,r.lastOrigin=r.lastSelOrigin=t.origin,a||No(e,"historyAdded")}function cr(e,t,i,n){var r=t.charAt(0);return"*"==r||"+"==r&&i.ranges.length==n.ranges.length&&i.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function ur(e,t,i,n){var r=e.history,s=n&&n.origin;i==r.lastSelOp||s&&r.lastSelOrigin==s&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==s||cr(e,s,Nr(r.done),t))?r.done[r.done.length-1]=t:hr(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=s,r.lastSelOp=i,n&&n.clearRedo!==!1&&or(r.undone)}function hr(e,t){var i=Nr(t);i&&i.ranges&&i.equals(e)||t.push(e)}function dr(e,t,i,n){var r=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,n),function(i){i.markedSpans&&((r||(r=t["spans_"+e.id]={}))[s]=i.markedSpans),++s})}function fr(e){if(!e)return null;for(var t,i=0;i<e.length;++i)e[i].marker.explicitlyCleared?t||(t=e.slice(0,i)):t&&t.push(e[i]);return t?t.length?t:null:e}function pr(e,t){var i=t["spans_"+e.id];if(!i)return null;for(var n=0,r=[];n<t.text.length;++n)r.push(fr(i[n]));return r}function gr(e,t,i){for(var n=0,r=[];n<e.length;++n){var s=e[n];if(s.ranges)r.push(i?he.prototype.deepCopy.call(s):s);else{var o=s.changes,a=[];r.push({changes:a});for(var l=0;l<o.length;++l){var c,u=o[l];if(a.push({from:u.from,to:u.to,text:u.text}),t)for(var h in u)(c=h.match(/^spans_(\d+)$/))&&Or(t,Number(c[1]))>-1&&(Nr(a)[h]=u[h],delete u[h])}}}return r}function mr(e,t,i,n){i<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function vr(e,t,i,n){for(var r=0;r<e.length;++r){var s=e[r],o=!0;if(s.ranges){s.copied||(s=e[r]=s.deepCopy(),s.copied=!0);for(var a=0;a<s.ranges.length;a++)mr(s.ranges[a].anchor,t,i,n),mr(s.ranges[a].head,t,i,n)}else{for(var a=0;a<s.changes.length;++a){var l=s.changes[a];if(i<l.from.line)l.from=js(l.from.line+n,l.from.ch),l.to=js(l.to.line+n,l.to.ch);else if(t<=l.to.line){o=!1;break}}o||(e.splice(0,r+1),r=0)}}}function yr(e,t){var i=t.from.line,n=t.to.line,r=t.text.length-(n-i)-1;vr(e.done,i,n,r),vr(e.undone,i,n,r)}function br(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function xr(e){return e.target||e.srcElement}function wr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Ts&&e.ctrlKey&&1==t&&(t=3),t}function kr(e,t,i){var n=e._handlers&&e._handlers[t];return i?n&&n.length>0?n.slice():Ao:n||Ao}function Cr(e,t){function i(e){return function(){e.apply(null,s)}}var n=kr(e,t,!1);if(n.length){var r,s=Array.prototype.slice.call(arguments,2);Fs?r=Fs.delayedCallbacks:Oo?r=Oo:(r=Oo=[],setTimeout(Sr,0));for(var o=0;o<n.length;++o)r.push(i(n[o]))}}function Sr(){var e=Oo;Oo=null;for(var t=0;t<e.length;++t)e[t]()}function Er(e,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),No(e,i||t.type,e,t),br(t)||t.codemirrorIgnore}function Mr(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var i=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==Or(i,t[n])&&i.push(t[n])}function Lr(e,t){return kr(e,t).length>0}function Tr(e){e.prototype.on=function(e,t){To(this,e,t)},e.prototype.off=function(e,t){Po(this,e,t)}}function Ar(){this.id=null}function Pr(e){for(;Ro.length<=e;)Ro.push(Nr(Ro)+" ");return Ro[e]}function Nr(e){return e[e.length-1]}function Or(e,t){for(var i=0;i<e.length;++i)if(e[i]==t)return i;return-1}function _r(e,t){for(var i=[],n=0;n<e.length;n++)i[n]=t(e[n],n);return i}function Ir(){}function jr(e,t){var i;return Object.create?i=Object.create(e):(Ir.prototype=e,i=new Ir),t&&zr(t,i),i}function zr(e,t,i){t||(t={});for(var n in e)!e.hasOwnProperty(n)||i===!1&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function Hr(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Br(e,t){return t?t.source.indexOf("\\w")>-1&&Xo(e)?!0:t.test(e):Xo(e)}function Dr(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Rr(e){return e.charCodeAt(0)>=768&&Ko.test(e)}function Wr(e,t,i,n){var r=document.createElement(e);if(i&&(r.className=i),n&&(r.style.cssText=n),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)r.appendChild(t[s]);return r}function Fr(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function qr(e,t){return Fr(e).appendChild(t)}function Xr(){for(var e=document.activeElement;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function Kr(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function Yr(e,t){for(var i=e.split(" "),n=0;n<i.length;n++)i[n]&&!Kr(i[n]).test(t)&&(t+=" "+i[n]);return t}function Vr(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),i=0;i<t.length;i++){var n=t[i].CodeMirror;n&&e(n)}}function $r(){Qo||(Ur(),Qo=!0)}function Ur(){var e;To(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Vr(qt)},100))}),To(window,"blur",function(){Vr(mi)})}function Gr(e){if(null==Vo){var t=Wr("span","​");qr(e,Wr("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Vo=t.offsetWidth<=1&&t.offsetHeight>2&&!(vs&&8>ys));
}var i=Vo?Wr("span","​"):Wr("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Qr(e){if(null!=$o)return $o;var t=qr(e,document.createTextNode("AخA")),i=Fo(t,0,1).getBoundingClientRect();if(!i||i.left==i.right)return!1;var n=Fo(t,1,2).getBoundingClientRect();return $o=n.right-i.right<3}function Zr(e){if(null!=ia)return ia;var t=qr(e,Wr("span","x")),i=t.getBoundingClientRect(),n=Fo(t,0,1).getBoundingClientRect();return ia=Math.abs(i.left-n.left)>1}function Jr(e,t,i,n){if(!e)return n(t,i,"ltr");for(var r=!1,s=0;s<e.length;++s){var o=e[s];(o.from<i&&o.to>t||t==i&&o.to==t)&&(n(Math.max(o.from,t),Math.min(o.to,i),1==o.level?"rtl":"ltr"),r=!0)}r||n(t,i,"ltr")}function es(e){return e.level%2?e.to:e.from}function ts(e){return e.level%2?e.from:e.to}function is(e){var t=nr(e);return t?es(t[0]):0}function ns(e){var t=nr(e);return t?ts(Nr(t)):e.text.length}function rs(e,t){var i=Gn(e.doc,t),n=vn(i);n!=i&&(t=er(n));var r=nr(n),s=r?r[0].level%2?ns(n):is(n):0;return js(t,s)}function ss(e,t){for(var i,n=Gn(e.doc,t);i=gn(n);)n=i.find(1,!0).line,t=null;var r=nr(n),s=r?r[0].level%2?is(n):ns(n):n.text.length;return js(null==t?er(n):t,s)}function os(e,t){var i=rs(e,t.line),n=Gn(e.doc,i.line),r=nr(n);if(!r||0==r[0].level){var s=Math.max(0,n.text.search(/\S/)),o=t.line==i.line&&t.ch<=s&&t.ch;return js(i.line,o?0:s)}return i}function as(e,t,i){var n=e[0].level;return t==n?!0:i==n?!1:i>t}function ls(e,t){ra=null;for(var i,n=0;n<e.length;++n){var r=e[n];if(r.from<t&&r.to>t)return n;if(r.from==t||r.to==t){if(null!=i)return as(e,r.level,e[i].level)?(r.from!=r.to&&(ra=i),n):(r.from!=r.to&&(ra=n),i);i=n}}return i}function cs(e,t,i,n){if(!n)return t+i;do t+=i;while(t>0&&Rr(e.text.charAt(t)));return t}function us(e,t,i,n){var r=nr(e);if(!r)return hs(e,t,i,n);for(var s=ls(r,t),o=r[s],a=cs(e,t,o.level%2?-i:i,n);;){if(a>o.from&&a<o.to)return a;if(a==o.from||a==o.to)return ls(r,a)==s?a:(o=r[s+=i],i>0==o.level%2?o.to:o.from);if(o=r[s+=i],!o)return null;a=i>0==o.level%2?cs(e,o.to,-1,n):cs(e,o.from,1,n)}}function hs(e,t,i,n){var r=t+i;if(n)for(;r>0&&Rr(e.text.charAt(r));)r+=i;return 0>r||r>e.text.length?null:r}var ds=navigator.userAgent,fs=navigator.platform,ps=/gecko\/\d/i.test(ds),gs=/MSIE \d/.test(ds),ms=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ds),vs=gs||ms,ys=vs&&(gs?document.documentMode||6:ms[1]),bs=/WebKit\//.test(ds),xs=bs&&/Qt\/\d+\.\d+/.test(ds),ws=/Chrome\//.test(ds),ks=/Opera\//.test(ds),Cs=/Apple Computer/.test(navigator.vendor),Ss=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ds),Es=/PhantomJS/.test(ds),Ms=/AppleWebKit/.test(ds)&&/Mobile\/\w+/.test(ds),Ls=Ms||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ds),Ts=Ms||/Mac/.test(fs),As=/win/i.test(fs),Ps=ks&&ds.match(/Version\/(\d*\.\d*)/);Ps&&(Ps=Number(Ps[1])),Ps&&Ps>=15&&(ks=!1,bs=!0);var Ns=Ts&&(xs||ks&&(null==Ps||12.11>Ps)),Os=ps||vs&&ys>=9,_s=!1,Is=!1;g.prototype=zr({update:function(e){var t=e.scrollWidth>e.clientWidth+1,i=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(i){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var r=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=i?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var s=e.viewWidth-e.barLeft-(i?n:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+s+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:i?n:0,bottom:t?n:0}},setScrollLeft:function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var e=Ts&&!Ss?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ar,this.disableVert=new Ar},enableZeroWidthBar:function(e,t){function i(){var n=e.getBoundingClientRect(),r=document.elementFromPoint(n.left+1,n.bottom-1);r!=e?e.style.pointerEvents="none":t.set(1e3,i)}e.style.pointerEvents="auto",t.set(1e3,i)},clear:function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)}},g.prototype),m.prototype=zr({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},m.prototype),e.scrollbarModel={"native":g,"null":m},E.prototype.signal=function(e,t){Lr(e,t)&&this.events.push(arguments)},E.prototype.finish=function(){for(var e=0;e<this.events.length;e++)No.apply(null,this.events[e])};var js=e.Pos=function(e,t){return this instanceof js?(this.line=e,void(this.ch=t)):new js(e,t)},zs=e.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch},Hs=null;ne.prototype=zr({init:function(e){function t(e){if(n.somethingSelected())Hs=n.getSelections(),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,s.value=Hs.join("\n"),Wo(s));else{if(!n.options.lineWiseCopyCut)return;var t=te(n);Hs=t.text,"cut"==e.type?n.setSelections(t.ranges,null,jo):(i.prevInput="",s.value=t.text.join("\n"),Wo(s))}"cut"==e.type&&(n.state.cutIncoming=!0)}var i=this,n=this.cm,r=this.wrapper=re(),s=this.textarea=r.firstChild;e.wrapper.insertBefore(r,e.wrapper.firstChild),Ms&&(s.style.width="0px"),To(s,"input",function(){vs&&ys>=9&&i.hasSelection&&(i.hasSelection=null),i.poll()}),To(s,"paste",function(e){return J(e,n)?!0:(n.state.pasteIncoming=!0,void i.fastPoll())}),To(s,"cut",t),To(s,"copy",t),To(e.scroller,"paste",function(t){Xt(e,t)||(n.state.pasteIncoming=!0,i.focus())}),To(e.lineSpace,"selectstart",function(t){Xt(e,t)||Eo(t)}),To(s,"compositionstart",function(){var e=n.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}}),To(s,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})},prepareSelection:function(){var e=this.cm,t=e.display,i=e.doc,n=Ie(e);if(e.options.moveInputWithCursor){var r=dt(e,i.sel.primary().head,"div"),s=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+o.top-s.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+o.left-s.left))}return n},showSelection:function(e){var t=this.cm,i=t.display;qr(i.cursorDiv,e.cursors),qr(i.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},reset:function(e){if(!this.contextMenuPending){var t,i,n=this.cm,r=n.doc;if(n.somethingSelected()){this.prevInput="";var s=r.sel.primary();t=ta&&(s.to().line-s.from().line>100||(i=n.getSelection()).length>1e3);var o=t?"-":i||n.getSelection();this.textarea.value=o,n.state.focused&&Wo(this.textarea),vs&&ys>=9&&(this.hasSelection=o)}else e||(this.prevInput=this.textarea.value="",vs&&ys>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Ls||Xr()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var e=this;e.pollingFast||e.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},fastPoll:function(){function e(){var n=i.poll();n||t?(i.pollingFast=!1,i.slowPoll()):(t=!0,i.polling.set(60,e))}var t=!1,i=this;i.pollingFast=!0,i.polling.set(20,e)},poll:function(){var e=this.cm,t=this.textarea,i=this.prevInput;if(this.contextMenuPending||!e.state.focused||ea(t)&&!i&&!this.composing||Q(e)||e.options.disableInput||e.state.keySeq)return!1;var n=t.value;if(n==i&&!e.somethingSelected())return!1;if(vs&&ys>=9&&this.hasSelection===n||Ts&&/[\uf700-\uf7ff]/.test(n))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var r=n.charCodeAt(0);if(8203!=r||i||(i="​"),8666==r)return this.reset(),this.cm.execCommand("undo")}for(var s=0,o=Math.min(i.length,n.length);o>s&&i.charCodeAt(s)==n.charCodeAt(s);)++s;var a=this;return Tt(e,function(){Z(e,n.slice(s),i.length-s,null,a.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?t.value=a.prevInput="":a.prevInput=n,a.composing&&(a.composing.range.clear(),a.composing.range=e.markText(a.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){vs&&ys>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){function t(){if(null!=o.selectionStart){var e=r.somethingSelected(),t="​"+(e?o.value:"");o.value="⇚",o.value=t,n.prevInput=e?"":"​",o.selectionStart=1,o.selectionEnd=t.length,s.selForContextMenu=r.doc.sel}}function i(){if(n.contextMenuPending=!1,n.wrapper.style.position="relative",o.style.cssText=u,vs&&9>ys&&s.scrollbars.setScrollTop(s.scroller.scrollTop=l),null!=o.selectionStart){(!vs||vs&&9>ys)&&t();var e=0,i=function(){s.selForContextMenu==r.doc.sel&&0==o.selectionStart&&o.selectionEnd>0&&"​"==n.prevInput?At(r,ao.selectAll)(r):e++<10?s.detectingSelectAll=setTimeout(i,500):s.input.reset()};s.detectingSelectAll=setTimeout(i,200)}}var n=this,r=n.cm,s=r.display,o=n.textarea,a=Kt(r,e),l=s.scroller.scrollTop;if(a&&!ks){var c=r.options.resetSelectionOnContextMenu;c&&-1==r.doc.sel.contains(a)&&At(r,Le)(r.doc,pe(a),jo);var u=o.style.cssText;if(n.wrapper.style.position="absolute",o.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(vs?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",bs)var h=window.scrollY;if(s.input.focus(),bs&&window.scrollTo(null,h),s.input.reset(),r.somethingSelected()||(o.value=n.prevInput=" "),n.contextMenuPending=!0,s.selForContextMenu=r.doc.sel,clearTimeout(s.detectingSelectAll),vs&&ys>=9&&t(),Os){Lo(e);var d=function(){Po(window,"mouseup",d),setTimeout(i,20)};To(window,"mouseup",d)}else setTimeout(i,50)}},readOnlyChanged:function(e){e||this.reset()},setUneditable:Ir,needsContentAttribute:!1},ne.prototype),se.prototype=zr({init:function(e){function t(e){if(n.somethingSelected())Hs=n.getSelections(),"cut"==e.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var t=te(n);Hs=t.text,"cut"==e.type&&n.operation(function(){n.setSelections(t.ranges,0,jo),n.replaceSelection("",null,"cut")})}if(e.clipboardData&&!Ms)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",Hs.join("\n"));else{var i=re(),r=i.firstChild;n.display.lineSpace.insertBefore(i,n.display.lineSpace.firstChild),r.value=Hs.join("\n");var s=document.activeElement;Wo(r),setTimeout(function(){n.display.lineSpace.removeChild(i),s.focus()},50)}}var i=this,n=i.cm,r=i.div=e.lineDiv;ie(r),To(r,"paste",function(e){J(e,n)}),To(r,"compositionstart",function(e){var t=e.data;if(i.composing={sel:n.doc.sel,data:t,startData:t},t){var r=n.doc.sel.primary(),s=n.getLine(r.head.line),o=s.indexOf(t,Math.max(0,r.head.ch-t.length));o>-1&&o<=r.head.ch&&(i.composing.sel=pe(js(r.head.line,o),js(r.head.line,o+t.length)))}}),To(r,"compositionupdate",function(e){i.composing.data=e.data}),To(r,"compositionend",function(e){var t=i.composing;t&&(e.data==t.startData||/\u200b/.test(e.data)||(t.data=e.data),setTimeout(function(){t.handled||i.applyComposition(t),i.composing==t&&(i.composing=null)},50))}),To(r,"touchstart",function(){i.forceCompositionEnd()}),To(r,"input",function(){i.composing||(Q(n)||!i.pollContent())&&Tt(i.cm,function(){It(n)})}),To(r,"copy",t),To(r,"cut",t)},prepareSelection:function(){var e=Ie(this.cm,!1);return e.focus=this.cm.state.focused,e},showSelection:function(e){e&&this.cm.display.view.length&&(e.focus&&this.showPrimarySelection(),this.showMultipleSelections(e))},showPrimarySelection:function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),i=le(this.cm,e.anchorNode,e.anchorOffset),n=le(this.cm,e.focusNode,e.focusOffset);if(!i||i.bad||!n||n.bad||0!=zs(U(i,n),t.from())||0!=zs($(i,n),t.to())){var r=oe(this.cm,t.from()),s=oe(this.cm,t.to());if(r||s){var o=this.cm.display.view,a=e.rangeCount&&e.getRangeAt(0);if(r){if(!s){var l=o[o.length-1].measure,c=l.maps?l.maps[l.maps.length-1]:l.map;s={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}}else r={node:o[0].measure.map[2],offset:0};try{var u=Fo(r.node,r.offset,s.offset,s.node)}catch(h){}u&&(e.removeAllRanges(),e.addRange(u),a&&null==e.anchorNode?e.addRange(a):ps&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){e.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(e){qr(this.cm.display.cursorDiv,e.cursors),qr(this.cm.display.selectionDiv,e.selection)},rememberSelection:function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},selectionInEditor:function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return Yo(this.div,t)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():Tt(this.cm,function(){t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},selectionChanged:function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var i=le(t,e.anchorNode,e.anchorOffset),n=le(t,e.focusNode,e.focusOffset);i&&n&&Tt(t,function(){Le(t.doc,pe(i,n),jo),(i.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}},pollContent:function(){var e=this.cm,t=e.display,i=e.doc.sel.primary(),n=i.from(),r=i.to();if(n.line<t.viewFrom||r.line>t.viewTo-1)return!1;var s;if(n.line==t.viewFrom||0==(s=Ht(e,n.line)))var o=er(t.view[0].line),a=t.view[0].node;else var o=er(t.view[s].line),a=t.view[s-1].node.nextSibling;var l=Ht(e,r.line);if(l==t.view.length-1)var c=t.viewTo-1,u=t.lineDiv.lastChild;else var c=er(t.view[l+1].line)-1,u=t.view[l+1].node.previousSibling;for(var h=e.doc.splitLines(ue(e,a,u,o,c)),d=Qn(e.doc,js(o,0),js(c,Gn(e.doc,c).text.length));h.length>1&&d.length>1;)if(Nr(h)==Nr(d))h.pop(),d.pop(),c--;else{if(h[0]!=d[0])break;h.shift(),d.shift(),o++}for(var f=0,p=0,g=h[0],m=d[0],v=Math.min(g.length,m.length);v>f&&g.charCodeAt(f)==m.charCodeAt(f);)++f;for(var y=Nr(h),b=Nr(d),x=Math.min(y.length-(1==h.length?f:0),b.length-(1==d.length?f:0));x>p&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;h[h.length-1]=y.slice(0,y.length-p),h[0]=h[0].slice(f);var w=js(o,f),k=js(c,d.length?Nr(d).length-p:0);return h.length>1||h[0]||zs(w,k)?(Pi(e.doc,h,w,k,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(e){Q(this.cm)?At(this.cm,It)(this.cm):e.data&&e.data!=e.startData&&At(this.cm,Z)(this.cm,e.data,0,e.sel)},setUneditable:function(e){e.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),Q(this.cm)||At(this.cm,Z)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(e){this.div.contentEditable=String("nocursor"!=e)},onContextMenu:Ir,resetPosition:Ir,needsContentAttribute:!0},se.prototype),e.inputStyles={textarea:ne,contenteditable:se},he.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],n=e.ranges[t];if(0!=zs(i.anchor,n.anchor)||0!=zs(i.head,n.head))return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new de(V(this.ranges[t].anchor),V(this.ranges[t].head));return new he(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var i=0;i<this.ranges.length;i++){var n=this.ranges[i];if(zs(t,n.from())>=0&&zs(e,n.to())<=0)return i}return-1}},de.prototype={from:function(){return U(this.anchor,this.head)},to:function(){return $(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Bs,Ds,Rs,Ws={left:0,right:0,top:0,bottom:0},Fs=null,qs=0,Xs=0,Ks=0,Ys=null;vs?Ys=-.53:ps?Ys=15:ws?Ys=-.7:Cs&&(Ys=-1/3);var Vs=function(e){var t=e.wheelDeltaX,i=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==i&&e.detail&&e.axis==e.VERTICAL_AXIS?i=e.detail:null==i&&(i=e.wheelDelta),{x:t,y:i}};e.wheelEventPixels=function(e){var t=Vs(e);return t.x*=Ys,t.y*=Ys,t};var $s=new Ar,Us=null,Gs=e.changeEnd=function(e){return e.text?js(e.from.line+e.text.length-1,Nr(e.text).length+(1==e.text.length?e.from.ch:0)):e.to};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,t){var i=this.options,n=i[e];(i[e]!=t||"mode"==e)&&(i[e]=t,Zs.hasOwnProperty(e)&&At(this,Zs[e])(this,t,n))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ki(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,i=0;i<t.length;++i)if(t[i]==e||t[i].name==e)return t.splice(i,1),!0},addOverlay:Pt(function(t,i){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:t,opaque:i&&i.opaque}),this.state.modeGen++,It(this)}),removeOverlay:Pt(function(e){for(var t=this.state.overlays,i=0;i<t.length;++i){var n=t[i].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(i,1),this.state.modeGen++,void It(this)}}),indentLine:Pt(function(e,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),ye(this.doc,e)&&Bi(this,e,t,i)}),indentSelection:Pt(function(e){for(var t=this.doc.sel.ranges,i=-1,n=0;n<t.length;n++){var r=t[n];if(r.empty())r.head.line>i&&(Bi(this,r.head.line,e,!0),i=r.head.line,n==this.doc.sel.primIndex&&zi(this));else{var s=r.from(),o=r.to(),a=Math.max(i,s.line);i=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var l=a;i>l;++l)Bi(this,l,e);var c=this.doc.sel.ranges;0==s.ch&&t.length==c.length&&c[n].from().ch>0&&Ce(this.doc,n,new de(s,c[n].to()),jo)}}}),getTokenAt:function(e,t){return Nn(this,e,t)},getLineTokens:function(e,t){return Nn(this,js(e),t,!0)},getTokenTypeAt:function(e){e=me(this.doc,e);var t,i=In(this,Gn(this.doc,e.line)),n=0,r=(i.length-1)/2,s=e.ch;if(0==s)t=i[2];else for(;;){var o=n+r>>1;if((o?i[2*o-1]:0)>=s)r=o;else{if(!(i[2*o+1]<s)){t=i[2*o+2];break}n=o+1}}var a=t?t.indexOf("cm-overlay "):-1;return 0>a?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var i=this.doc.mode;return i.innerMode?e.innerMode(i,this.getTokenAt(t).state).mode:i},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!ro.hasOwnProperty(t))return i;var n=ro[t],r=this.getModeAt(e);if("string"==typeof r[t])n[r[t]]&&i.push(n[r[t]]);else if(r[t])for(var s=0;s<r[t].length;s++){var o=n[r[t][s]];o&&i.push(o)}else r.helperType&&n[r.helperType]?i.push(n[r.helperType]):n[r.name]&&i.push(n[r.name]);for(var s=0;s<n._global.length;s++){var a=n._global[s];a.pred(r,this)&&-1==Or(i,a.val)&&i.push(a.val)}return i},getStateAfter:function(e,t){var i=this.doc;return e=ge(i,null==e?i.first+i.size-1:e),We(this,e+1,t)},cursorCoords:function(e,t){var i,n=this.doc.sel.primary();return i=null==e?n.head:"object"==typeof e?me(this.doc,e):e?n.from():n.to(),dt(this,i,t||"page")},charCoords:function(e,t){return ht(this,me(this.doc,e),t||"page")},coordsChar:function(e,t){return e=ut(this,e,t||"page"),gt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=ut(this,{top:e,left:0},t||"page").top,tr(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var i,n=!1;if("number"==typeof e){var r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0),i=Gn(this.doc,e)}else i=e;return ct(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-ir(i):0)},defaultTextHeight:function(){return vt(this.display)},defaultCharWidth:function(){return yt(this.display)},setGutterMarker:Pt(function(e,t,i){return Di(this.doc,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=i,!i&&Dr(n)&&(e.gutterMarkers=null),!0})}),clearGutter:Pt(function(e){var t=this,i=t.doc,n=i.first;i.iter(function(i){i.gutterMarkers&&i.gutterMarkers[e]&&(i.gutterMarkers[e]=null,jt(t,n,"gutter"),Dr(i.gutterMarkers)&&(i.gutterMarkers=null)),++n})}),lineInfo:function(e){if("number"==typeof e){if(!ye(this.doc,e))return null;var t=e;if(e=Gn(this.doc,e),!e)return null}else{var t=er(e);if(null==t)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,n,r){var s=this.display;e=dt(this,me(this.doc,e));var o=e.bottom,a=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==n)o=e.top;else if("above"==n||"near"==n){var l=Math.max(s.wrapper.clientHeight,this.doc.height),c=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>l)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=l&&(o=e.bottom),a+t.offsetWidth>c&&(a=c-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==r?(a=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?a=0:"middle"==r&&(a=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=a+"px"),i&&_i(this,a,o,a+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:Pt(ui),triggerOnKeyPress:Pt(fi),triggerOnKeyUp:di,execCommand:function(e){return ao.hasOwnProperty(e)?ao[e].call(null,this):void 0},triggerElectric:Pt(function(e){ee(this,e)}),findPosH:function(e,t,i,n){var r=1;0>t&&(r=-1,t=-t);for(var s=0,o=me(this.doc,e);t>s&&(o=Wi(this.doc,o,r,i,n),!o.hitSide);++s);return o},moveH:Pt(function(e,t){var i=this;i.extendSelectionsBy(function(n){return i.display.shift||i.doc.extend||n.empty()?Wi(i.doc,n.head,e,t,i.options.rtlMoveVisually):0>e?n.from():n.to()},Ho)}),deleteH:Pt(function(e,t){var i=this.doc.sel,n=this.doc;i.somethingSelected()?n.replaceSelection("",null,"+delete"):Ri(this,function(i){var r=Wi(n,i.head,e,t,!1);return 0>e?{from:r,to:i.head}:{from:i.head,to:r}})}),findPosV:function(e,t,i,n){var r=1,s=n;0>t&&(r=-1,t=-t);for(var o=0,a=me(this.doc,e);t>o;++o){var l=dt(this,a,"div");if(null==s?s=l.left:l.left=s,a=Fi(this,l,r,i),a.hitSide)break}return a},moveV:Pt(function(e,t){var i=this,n=this.doc,r=[],s=!i.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(o){if(s)return 0>e?o.from():o.to();var a=dt(i,o.head,"div");null!=o.goalColumn&&(a.left=o.goalColumn),r.push(a.left);var l=Fi(i,a,e,t);return"page"==t&&o==n.sel.primary()&&ji(i,null,ht(i,l,"div").top-a.top),l},Ho),r.length)for(var o=0;o<n.sel.ranges.length;o++)n.sel.ranges[o].goalColumn=r[o]}),findWordAt:function(e){var t=this.doc,i=Gn(t,e.line).text,n=e.ch,r=e.ch;if(i){var s=this.getHelper(e,"wordChars");(e.xRel<0||r==i.length)&&n?--n:++r;for(var o=i.charAt(n),a=Br(o,s)?function(e){return Br(e,s)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Br(e)};n>0&&a(i.charAt(n-1));)--n;for(;r<i.length&&a(i.charAt(r));)++r}return new de(js(e.line,n),js(e.line,r))},toggleOverwrite:function(e){(null==e||e!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?Go(this.display.cursorDiv,"CodeMirror-overwrite"):Uo(this.display.cursorDiv,"CodeMirror-overwrite"),No(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Xr()},scrollTo:Pt(function(e,t){(null!=e||null!=t)&&Hi(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Ke(this)-this.display.barHeight,width:e.scrollWidth-Ke(this)-this.display.barWidth,clientHeight:Ve(this),clientWidth:Ye(this)}},scrollIntoView:Pt(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:js(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)Hi(this),this.curOp.scrollToPos=e;else{var i=Ii(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(i.scrollLeft,i.scrollTop)}}),setSize:Pt(function(e,t){function i(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e}var n=this;null!=e&&(n.display.wrapper.style.width=i(e)),null!=t&&(n.display.wrapper.style.height=i(t)),n.options.lineWrapping&&st(this);var r=n.display.viewFrom;n.doc.iter(r,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){jt(n,r,"widget");break}++r}),n.curOp.forceUpdate=!0,No(n,"refresh",this)}),operation:function(e){return Tt(this,e)},refresh:Pt(function(){var e=this.display.cachedTextHeight;It(this),this.curOp.forceUpdate=!0,ot(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),u(this),(null==e||Math.abs(e-vt(this.display))>.5)&&o(this),No(this,"refresh",this)}),swapDoc:Pt(function(e){var t=this.doc;return t.cm=null,Un(this,e),ot(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Cr(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Tr(e);var Qs=e.defaults={},Zs=e.optionHandlers={},Js=e.Init={toString:function(){return"CodeMirror.Init"}};qi("value","",function(e,t){e.setValue(t)},!0),qi("mode",null,function(e,t){e.doc.modeOption=t,i(e)},!0),qi("indentUnit",2,i,!0),qi("indentWithTabs",!1),qi("smartIndent",!0),qi("tabSize",4,function(e){n(e),ot(e),It(e)},!0),qi("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var i=[],n=e.doc.first;e.doc.iter(function(e){for(var r=0;;){var s=e.text.indexOf(t,r);if(-1==s)break;r=s+t.length,i.push(js(n,s))}n++});for(var r=i.length-1;r>=0;r--)Pi(e.doc,t,i[r],js(i[r].line,i[r].ch+t.length))}}),qi("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,i,n){t.state.specialChars=new RegExp(i.source+(i.test("	")?"":"|	"),"g"),n!=e.Init&&t.refresh()}),qi("specialCharPlaceholder",Bn,function(e){e.refresh()},!0),qi("electricChars",!0),qi("inputStyle",Ls?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),qi("rtlMoveVisually",!As),qi("wholeLineUpdateBefore",!0),qi("theme","default",function(e){a(e),l(e)},!0),qi("keyMap","default",function(t,i,n){var r=Ki(i),s=n!=e.Init&&Ki(n);s&&s.detach&&s.detach(t,r),r.attach&&r.attach(t,s||null)}),qi("extraKeys",null),qi("lineWrapping",!1,r,!0),qi("gutters",[],function(e){f(e.options),l(e)},!0),qi("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?S(e.display)+"px":"0",e.refresh()},!0),qi("coverGutterNextToScrollbar",!1,function(e){y(e)},!0),qi("scrollbarStyle","native",function(e){v(e),y(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),qi("lineNumbers",!1,function(e){f(e.options),l(e)},!0),qi("firstLineNumber",1,l,!0),qi("lineNumberFormatter",function(e){return e},l,!0),qi("showCursorWhenSelecting",!1,_e,!0),qi("resetSelectionOnContextMenu",!0),qi("lineWiseCopyCut",!0),qi("readOnly",!1,function(e,t){"nocursor"==t?(mi(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),qi("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),qi("dragDrop",!0,Ft),qi("allowDropFileTypes",null),qi("cursorBlinkRate",530),qi("cursorScrollMargin",0),qi("cursorHeight",1,_e,!0),qi("singleCursorHeightPerLine",!0,_e,!0),qi("workTime",100),qi("workDelay",100),qi("flattenSpans",!0,n,!0),qi("addModeClass",!1,n,!0),qi("pollInterval",100),qi("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),qi("historyEventDelay",1250),qi("viewportMargin",10,function(e){e.refresh()},!0),qi("maxHighlightLength",1e4,n,!0),qi("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),qi("tabindex",null,function(e,t){e.display.input.getField().tabIndex=t||""}),qi("autofocus",null);var eo=e.modes={},to=e.mimeModes={};e.defineMode=function(t,i){e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2&&(i.dependencies=Array.prototype.slice.call(arguments,2)),eo[t]=i},e.defineMIME=function(e,t){to[e]=t},e.resolveMode=function(t){if("string"==typeof t&&to.hasOwnProperty(t))t=to[t];else if(t&&"string"==typeof t.name&&to.hasOwnProperty(t.name)){var i=to[t.name];"string"==typeof i&&(i={name:i}),t=jr(i,t),t.name=i.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,i){var i=e.resolveMode(i),n=eo[i.name];if(!n)return e.getMode(t,"text/plain");var r=n(t,i);if(io.hasOwnProperty(i.name)){var s=io[i.name];for(var o in s)s.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=s[o])}if(r.name=i.name,i.helperType&&(r.helperType=i.helperType),i.modeProps)for(var o in i.modeProps)r[o]=i.modeProps[o];return r},e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var io=e.modeExtensions={};e.extendMode=function(e,t){var i=io.hasOwnProperty(e)?io[e]:io[e]={};zr(t,i)},e.defineExtension=function(t,i){e.prototype[t]=i},e.defineDocExtension=function(e,t){ko.prototype[e]=t},e.defineOption=qi;var no=[];e.defineInitHook=function(e){no.push(e)};var ro=e.helpers={};e.registerHelper=function(t,i,n){ro.hasOwnProperty(t)||(ro[t]=e[t]={_global:[]}),ro[t][i]=n},e.registerGlobalHelper=function(t,i,n,r){e.registerHelper(t,i,r),ro[t]._global.push({pred:n,val:r})};var so=e.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var i={};for(var n in t){var r=t[n];r instanceof Array&&(r=r.concat([])),i[n]=r}return i},oo=e.startState=function(e,t,i){return e.startState?e.startState(t,i):!0};e.innerMode=function(e,t){for(;e.innerMode;){var i=e.innerMode(t);if(!i||i.mode==e)break;t=i.state,e=i.mode}return i||{mode:e,state:t}};var ao=e.commands={selectAll:function(e){e.setSelection(js(e.firstLine(),0),js(e.lastLine()),jo);
},singleSelection:function(e){e.setSelection(e.getCursor("anchor"),e.getCursor("head"),jo)},killLine:function(e){Ri(e,function(t){if(t.empty()){var i=Gn(e.doc,t.head.line).text.length;return t.head.ch==i&&t.head.line<e.lastLine()?{from:t.head,to:js(t.head.line+1,0)}:{from:t.head,to:js(t.head.line,i)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){Ri(e,function(t){return{from:js(t.from().line,0),to:me(e.doc,js(t.to().line+1,0))}})},delLineLeft:function(e){Ri(e,function(e){return{from:js(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){Ri(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){Ri(e,function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:n}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection(js(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(js(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return rs(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return os(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return ss(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},Ho)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},Ho)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var i=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:i},"div");return n.ch<e.getLine(n.line).search(/\S/)?os(e,t.head):n},Ho)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],i=e.listSelections(),n=e.options.tabSize,r=0;r<i.length;r++){var s=i[r].from(),o=Bo(e.getLine(s.line),s.ch,n);t.push(new Array(n-o%n+1).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){Tt(e,function(){for(var t=e.listSelections(),i=[],n=0;n<t.length;n++){var r=t[n].head,s=Gn(e.doc,r.line).text;if(s)if(r.ch==s.length&&(r=new js(r.line,r.ch-1)),r.ch>0)r=new js(r.line,r.ch+1),e.replaceRange(s.charAt(r.ch-1)+s.charAt(r.ch-2),js(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var o=Gn(e.doc,r.line-1).text;o&&e.replaceRange(s.charAt(0)+e.doc.lineSeparator()+o.charAt(o.length-1),js(r.line-1,o.length-1),js(r.line,1),"+transpose")}i.push(new de(r,r))}e.setSelections(i)})},newlineAndIndent:function(e){Tt(e,function(){for(var t=e.listSelections().length,i=0;t>i;i++){var n=e.listSelections()[i];e.replaceRange(e.doc.lineSeparator(),n.anchor,n.head,"+input"),e.indentLine(n.from().line+1,null,!0)}zi(e)})},toggleOverwrite:function(e){e.toggleOverwrite()}},lo=e.keyMap={};lo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},lo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},lo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},lo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},lo["default"]=Ts?lo.macDefault:lo.pcDefault,e.normalizeKeyMap=function(e){var t={};for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];if(/^(name|fallthrough|(de|at)tach)$/.test(i))continue;if("..."==n){delete e[i];continue}for(var r=_r(i.split(" "),Xi),s=0;s<r.length;s++){var o,a;s==r.length-1?(a=r.join(" "),o=n):(a=r.slice(0,s+1).join(" "),o="...");var l=t[a];if(l){if(l!=o)throw new Error("Inconsistent bindings for "+a)}else t[a]=o}delete e[i]}for(var c in t)e[c]=t[c];return e};var co=e.lookupKey=function(e,t,i,n){t=Ki(t);var r=t.call?t.call(e,n):t[e];if(r===!1)return"nothing";if("..."===r)return"multi";if(null!=r&&i(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return co(e,t.fallthrough,i,n);for(var s=0;s<t.fallthrough.length;s++){var o=co(e,t.fallthrough[s],i,n);if(o)return o}}},uo=e.isModifierKey=function(e){var t="string"==typeof e?e:na[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t},ho=e.keyName=function(e,t){if(ks&&34==e.keyCode&&e["char"])return!1;var i=na[e.keyCode],n=i;return null==n||e.altGraphKey?!1:(e.altKey&&"Alt"!=i&&(n="Alt-"+n),(Ns?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(n="Ctrl-"+n),(Ns?e.ctrlKey:e.metaKey)&&"Cmd"!=i&&(n="Cmd-"+n),!t&&e.shiftKey&&"Shift"!=i&&(n="Shift-"+n),n)};e.fromTextArea=function(t,i){function n(){t.value=c.getValue()}if(i=i?zr(i):{},i.value=t.value,!i.tabindex&&t.tabIndex&&(i.tabindex=t.tabIndex),!i.placeholder&&t.placeholder&&(i.placeholder=t.placeholder),null==i.autofocus){var r=Xr();i.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}if(t.form&&(To(t.form,"submit",n),!i.leaveSubmitMethodAlone)){var s=t.form,o=s.submit;try{var a=s.submit=function(){n(),s.submit=o,s.submit(),s.submit=a}}catch(l){}}i.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Po(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=o))}},t.style.display="none";var c=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},i);return c};var fo=e.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};fo.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var i=t==e;else var i=t&&(e.test?e.test(t):e(t));return i?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Bo(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Bo(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Bo(this.string,null,this.tabSize)-(this.lineStart?Bo(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,i){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var r=function(e){return i?e.toLowerCase():e},s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var po=0,go=e.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++po};Tr(go),go.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&bt(e),Lr(this,"clear")){var i=this.find();i&&Cr(this,"clear",i.from,i.to)}for(var n=null,r=null,s=0;s<this.lines.length;++s){var o=this.lines[s],a=Zi(o.markedSpans,this);e&&!this.collapsed?jt(e,er(o),"text"):e&&(null!=a.to&&(r=er(o)),null!=a.from&&(n=er(o))),o.markedSpans=Ji(o.markedSpans,a),null==a.from&&this.collapsed&&!wn(this.doc,o)&&e&&Jn(o,vt(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var l=vn(this.lines[s]),c=h(l);c>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&It(e,n,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Pe(e.doc)),e&&Cr(e,"markerCleared",e,this),t&&wt(e),this.parent&&this.parent.clear()}},go.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var i,n,r=0;r<this.lines.length;++r){var s=this.lines[r],o=Zi(s.markedSpans,this);if(null!=o.from&&(i=js(t?s:er(s),o.from),-1==e))return i;if(null!=o.to&&(n=js(t?s:er(s),o.to),1==e))return n}return i&&{from:i,to:n}},go.prototype.changed=function(){var e=this.find(-1,!0),t=this,i=this.doc.cm;e&&i&&Tt(i,function(){var n=e.line,r=er(e.line),s=Ze(i,r);if(s&&(rt(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!wn(t.doc,n)&&null!=t.height){var o=t.height;t.height=null;var a=Sn(t)-o;a&&Jn(n,n.height+a)}})},go.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=Or(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},go.prototype.detachLine=function(e){if(this.lines.splice(Or(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var po=0,mo=e.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var i=0;i<e.length;++i)e[i].parent=this};Tr(mo),mo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Cr(this,"clear")}},mo.prototype.find=function(e,t){return this.primary.find(e,t)};var vo=e.LineWidget=function(e,t,i){if(i)for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);this.doc=e,this.node=t};Tr(vo),vo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,n=er(i);if(null!=n&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(i.widgets=null);var s=Sn(this);Jn(i,Math.max(0,i.height-s)),e&&Tt(e,function(){Cn(e,i,-s),jt(e,n,"widget")})}},vo.prototype.changed=function(){var e=this.height,t=this.doc.cm,i=this.line;this.height=null;var n=Sn(this)-e;n&&(Jn(i,i.height+n),t&&Tt(t,function(){t.curOp.forceUpdate=!0,Cn(t,i,n)}))};var yo=e.Line=function(e,t,i){this.text=e,cn(this,t),this.height=i?i(this):1};Tr(yo),yo.prototype.lineNo=function(){return er(this)};var bo={},xo={};Yn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var i=e,n=e+t;n>i;++i){var r=this.lines[i];this.height-=r.height,Ln(r),Cr(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,i){for(var n=e+t;n>e;++e)if(i(this.lines[e]))return!0}},Vn.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var i=0;i<this.children.length;++i){var n=this.children[i],r=n.chunkSize();if(r>e){var s=Math.min(t,r-e),o=n.height;if(n.removeInner(e,s),this.height-=o-n.height,r==s&&(this.children.splice(i--,1),n.parent=null),0==(t-=s))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Yn))){var a=[];this.collapse(a),this.children=[new Yn(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,i){this.size+=t.length,this.height+=i;for(var n=0;n<this.children.length;++n){var r=this.children[n],s=r.chunkSize();if(s>=e){if(r.insertInner(e,t,i),r.lines&&r.lines.length>50){for(;r.lines.length>50;){var o=r.lines.splice(r.lines.length-25,25),a=new Yn(o);r.height-=a.height,this.children.splice(n+1,0,a),a.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),i=new Vn(t);if(e.parent){e.size-=i.size,e.height-=i.height;var n=Or(e.parent.children,e);e.parent.children.splice(n+1,0,i)}else{var r=new Vn(e.children);r.parent=e,e.children=[r,i],e=r}i.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var r=this.children[n],s=r.chunkSize();if(s>e){var o=Math.min(t,s-e);if(r.iterN(e,o,i))return!0;if(0==(t-=o))break;e=0}else e-=s}}};var wo=0,ko=e.Doc=function(e,t,i,n){if(!(this instanceof ko))return new ko(e,t,i,n);null==i&&(i=0),Vn.call(this,[new Yn([new yo("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=i;var r=js(i,0);this.sel=pe(r),this.history=new rr(null),this.id=++wo,this.modeOption=t,this.lineSep=n,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Kn(this,{from:r,to:r,text:e}),Le(this,pe(r),jo)};ko.prototype=jr(Vn.prototype,{constructor:ko,iter:function(e,t,i){i?this.iterN(e-this.first,t-e,i):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var i=0,n=0;n<t.length;++n)i+=t[n].height;this.insertInner(e-this.first,t,i)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Zn(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:Nt(function(e){var t=js(this.first,0),i=this.first+this.size-1;Si(this,{from:t,to:js(i,Gn(this,i).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),Le(this,pe(t))}),replaceRange:function(e,t,i,n){t=me(this,t),i=i?me(this,i):t,Pi(this,e,t,i,n)},getRange:function(e,t,i){var n=Qn(this,me(this,e),me(this,t));return i===!1?n:n.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){return ye(this,e)?Gn(this,e):void 0},getLineNumber:function(e){return er(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Gn(this,e)),vn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return me(this,e)},getCursor:function(e){var t,i=this.sel.primary();return t=null==e||"head"==e?i.head:"anchor"==e?i.anchor:"end"==e||"to"==e||e===!1?i.to():i.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Nt(function(e,t,i){Se(this,me(this,"number"==typeof e?js(e,t||0):e),null,i)}),setSelection:Nt(function(e,t,i){Se(this,me(this,e),me(this,t||e),i)}),extendSelection:Nt(function(e,t,i){we(this,me(this,e),t&&me(this,t),i)}),extendSelections:Nt(function(e,t){ke(this,be(this,e,t))}),extendSelectionsBy:Nt(function(e,t){ke(this,_r(this.sel.ranges,e),t)}),setSelections:Nt(function(e,t,i){if(e.length){for(var n=0,r=[];n<e.length;n++)r[n]=new de(me(this,e[n].anchor),me(this,e[n].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Le(this,fe(r,t),i)}}),addSelection:Nt(function(e,t,i){var n=this.sel.ranges.slice(0);n.push(new de(me(this,e),me(this,t||e))),Le(this,fe(n,n.length-1),i)}),getSelection:function(e){for(var t,i=this.sel.ranges,n=0;n<i.length;n++){var r=Qn(this,i[n].from(),i[n].to());t=t?t.concat(r):r}return e===!1?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],i=this.sel.ranges,n=0;n<i.length;n++){var r=Qn(this,i[n].from(),i[n].to());e!==!1&&(r=r.join(e||this.lineSeparator())),t[n]=r}return t},replaceSelection:function(e,t,i){for(var n=[],r=0;r<this.sel.ranges.length;r++)n[r]=e;this.replaceSelections(n,t,i||"+input")},replaceSelections:Nt(function(e,t,i){for(var n=[],r=this.sel,s=0;s<r.ranges.length;s++){var o=r.ranges[s];n[s]={from:o.from(),to:o.to(),text:this.splitLines(e[s]),origin:i}}for(var a=t&&"end"!=t&&ki(this,n,t),s=n.length-1;s>=0;s--)Si(this,n[s]);a?Me(this,a):this.cm&&zi(this.cm)}),undo:Nt(function(){Mi(this,"undo")}),redo:Nt(function(){Mi(this,"redo")}),undoSelection:Nt(function(){Mi(this,"undo",!0)}),redoSelection:Nt(function(){Mi(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,i=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var n=0;n<e.undone.length;n++)e.undone[n].ranges||++i;return{undo:t,redo:i}},clearHistory:function(){this.history=new rr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:gr(this.history.done),undone:gr(this.history.undone)}},setHistory:function(e){var t=this.history=new rr(this.history.maxGeneration);t.done=gr(e.done.slice(0),null,!0),t.undone=gr(e.undone.slice(0),null,!0)},addLineClass:Nt(function(e,t,i){return Di(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(Kr(i).test(e[n]))return!1;e[n]+=" "+i}else e[n]=i;return!0})}),removeLineClass:Nt(function(e,t,i){return Di(this,e,"gutter"==t?"gutter":"class",function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[n];if(!r)return!1;if(null==i)e[n]=null;else{var s=r.match(Kr(i));if(!s)return!1;var o=s.index+s[0].length;e[n]=r.slice(0,s.index)+(s.index&&o!=r.length?" ":"")+r.slice(o)||null}return!0})}),addLineWidget:Nt(function(e,t,i){return En(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return Yi(this,me(this,e),me(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=me(this,e),Yi(this,e,e,i,"bookmark")},findMarksAt:function(e){e=me(this,e);var t=[],i=Gn(this,e.line).markedSpans;if(i)for(var n=0;n<i.length;++n){var r=i[n];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,i){e=me(this,e),t=me(this,t);var n=[],r=e.line;return this.iter(e.line,t.line+1,function(s){var o=s.markedSpans;if(o)for(var a=0;a<o.length;a++){var l=o[a];r==e.line&&e.ch>l.to||null==l.from&&r!=e.line||r==t.line&&l.from>t.ch||i&&!i(l.marker)||n.push(l.marker.parent||l.marker)}++r}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var i=t.markedSpans;if(i)for(var n=0;n<i.length;++n)null!=i[n].from&&e.push(i[n].marker)}),e},posFromIndex:function(e){var t,i=this.first;return this.iter(function(n){var r=n.text.length+1;return r>e?(t=e,!0):(e-=r,void++i)}),me(this,js(i,t))},indexFromPos:function(e){e=me(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new ko(Zn(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,i=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<i&&(i=e.to);var n=new ko(Zn(this,t,i),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Ui(n,$i(this)),n},unlinkDoc:function(t){if(t instanceof e&&(t=t.doc),this.linked)for(var i=0;i<this.linked.length;++i){var n=this.linked[i];if(n.doc==t){this.linked.splice(i,1),t.unlinkDoc(this),Gi($i(this));break}}if(t.history==this.history){var r=[t.id];$n(t,function(e){r.push(e.id)},!0),t.history=new rr(null),t.history.done=gr(this.history.done,r),t.history.undone=gr(this.history.undone,r)}},iterLinkedDocs:function(e){$n(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Jo(e)},lineSeparator:function(){return this.lineSep||"\n"}}),ko.prototype.eachLine=ko.prototype.iter;var Co="iter insert remove copy getEditor constructor".split(" ");for(var So in ko.prototype)ko.prototype.hasOwnProperty(So)&&Or(Co,So)<0&&(e.prototype[So]=function(e){return function(){return e.apply(this.doc,arguments)}}(ko.prototype[So]));Tr(ko);var Eo=e.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Mo=e.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},Lo=e.e_stop=function(e){Eo(e),Mo(e)},To=e.on=function(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else if(e.attachEvent)e.attachEvent("on"+t,i);else{var n=e._handlers||(e._handlers={}),r=n[t]||(n[t]=[]);r.push(i)}},Ao=[],Po=e.off=function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else if(e.detachEvent)e.detachEvent("on"+t,i);else for(var n=kr(e,t,!1),r=0;r<n.length;++r)if(n[r]==i){n.splice(r,1);break}},No=e.signal=function(e,t){var i=kr(e,t,!0);if(i.length)for(var n=Array.prototype.slice.call(arguments,2),r=0;r<i.length;++r)i[r].apply(null,n)},Oo=null,_o=30,Io=e.Pass={toString:function(){return"CodeMirror.Pass"}},jo={scroll:!1},zo={origin:"*mouse"},Ho={origin:"+move"};Ar.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Bo=e.countColumn=function(e,t,i,n,r){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var s=n||0,o=r||0;;){var a=e.indexOf("	",s);if(0>a||a>=t)return o+(t-s);o+=a-s,o+=i-o%i,s=a+1}},Do=e.findColumn=function(e,t,i){for(var n=0,r=0;;){var s=e.indexOf("	",n);-1==s&&(s=e.length);var o=s-n;if(s==e.length||r+o>=t)return n+Math.min(o,t-r);if(r+=s-n,r+=i-r%i,n=s+1,r>=t)return n}},Ro=[""],Wo=function(e){e.select()};Ms?Wo=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:vs&&(Wo=function(e){try{e.select()}catch(t){}});var Fo,qo=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Xo=e.isWordChar=function(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||qo.test(e))},Ko=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;Fo=document.createRange?function(e,t,i,n){var r=document.createRange();return r.setEnd(n||e,i),r.setStart(e,t),r}:function(e,t,i){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(r){return n}return n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",t),n};var Yo=e.contains=function(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)};vs&&11>ys&&(Xr=function(){try{return document.activeElement}catch(e){return document.body}});var Vo,$o,Uo=e.rmClass=function(e,t){var i=e.className,n=Kr(t).exec(i);if(n){var r=i.slice(n.index+n[0].length);e.className=i.slice(0,n.index)+(r?n[1]+r:"")}},Go=e.addClass=function(e,t){var i=e.className;Kr(t).test(i)||(e.className+=(i?" ":"")+t)},Qo=!1,Zo=function(){if(vs&&9>ys)return!1;var e=Wr("div");return"draggable"in e||"dragDrop"in e}(),Jo=e.splitLines=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,i=[],n=e.length;n>=t;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var s=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),o=s.indexOf("\r");-1!=o?(i.push(s.slice(0,o)),t+=o+1):(i.push(s),t=r+1)}return i}:function(e){return e.split(/\r\n?|\n/)},ea=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(i){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1},ta=function(){var e=Wr("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),ia=null,na=e.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var e=0;10>e;e++)na[e+48]=na[e+96]=String(e);for(var e=65;90>=e;e++)na[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)na[e+111]=na[e+63235]="F"+e}();var ra,sa=function(){function e(e){return 247>=e?i.charAt(e):e>=1424&&1524>=e?"R":e>=1536&&1773>=e?n.charAt(e-1536):e>=1774&&2220>=e?"r":e>=8192&&8203>=e?"w":8204==e?"b":"L"}function t(e,t,i){this.level=e,this.from=t,this.to=i}var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,s=/[stwN]/,o=/[LRr]/,a=/[Lb1n]/,l=/[1n]/,c="L";return function(i){if(!r.test(i))return!1;for(var n,u=i.length,h=[],d=0;u>d;++d)h.push(n=e(i.charCodeAt(d)));for(var d=0,f=c;u>d;++d){var n=h[d];"m"==n?h[d]=f:f=n}for(var d=0,p=c;u>d;++d){var n=h[d];"1"==n&&"r"==p?h[d]="n":o.test(n)&&(p=n,"r"==n&&(h[d]="R"))}for(var d=1,f=h[0];u-1>d;++d){var n=h[d];"+"==n&&"1"==f&&"1"==h[d+1]?h[d]="1":","!=n||f!=h[d+1]||"1"!=f&&"n"!=f||(h[d]=f),f=n}for(var d=0;u>d;++d){var n=h[d];if(","==n)h[d]="N";else if("%"==n){for(var g=d+1;u>g&&"%"==h[g];++g);for(var m=d&&"!"==h[d-1]||u>g&&"1"==h[g]?"1":"N",v=d;g>v;++v)h[v]=m;d=g-1}}for(var d=0,p=c;u>d;++d){var n=h[d];"L"==p&&"1"==n?h[d]="L":o.test(n)&&(p=n)}for(var d=0;u>d;++d)if(s.test(h[d])){for(var g=d+1;u>g&&s.test(h[g]);++g);for(var y="L"==(d?h[d-1]:c),b="L"==(u>g?h[g]:c),m=y||b?"L":"R",v=d;g>v;++v)h[v]=m;d=g-1}for(var x,w=[],d=0;u>d;)if(a.test(h[d])){var k=d;for(++d;u>d&&a.test(h[d]);++d);w.push(new t(0,k,d))}else{var C=d,S=w.length;for(++d;u>d&&"L"!=h[d];++d);for(var v=C;d>v;)if(l.test(h[v])){v>C&&w.splice(S,0,new t(1,C,v));var E=v;for(++v;d>v&&l.test(h[v]);++v);w.splice(S,0,new t(2,E,v)),C=v}else++v;d>C&&w.splice(S,0,new t(1,C,d))}return 1==w[0].level&&(x=i.match(/^\s+/))&&(w[0].from=x[0].length,w.unshift(new t(0,0,x[0].length))),1==Nr(w).level&&(x=i.match(/\s+$/))&&(Nr(w).to-=x[0].length,w.push(new t(0,u-x[0].length,u))),2==w[0].level&&w.unshift(new t(1,w[0].to,w[0].to)),w[0].level!=Nr(w).level&&w.push(new t(w[0].level,u,u)),w}}();return e.version="5.9.0",e}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var t=function(e){return new RegExp("^(?:"+e.join("|")+")$","i")};e.defineMode("cypher",function(i){
var n,r=function(e){var t=e.next();if('"'===t||"'"===t)return e.match(/.+?["']/),"string";if(/[{}\(\),\.;\[\]]/.test(t))return n=t,"node";if("/"===t&&e.eat("/"))return e.skipToEnd(),"comment";if(h.test(t))return e.eatWhile(h),null;if(e.eatWhile(/[_\w\d]/),e.eat(":"))return e.eatWhile(/[\w\d_\-]/),"atom";var i=e.current();return l.test(i)?"builtin":c.test(i)?"def":u.test(i)?"keyword":"variable"},s=function(e,t,i){return e.context={prev:e.context,indent:e.indent,col:i,type:t}},o=function(e){return e.indent=e.context.indent,e.context=e.context.prev},a=i.indentUnit,l=t(["abs","acos","allShortestPaths","asin","atan","atan2","avg","ceil","coalesce","collect","cos","cot","count","degrees","e","endnode","exp","extract","filter","floor","haversin","head","id","keys","labels","last","left","length","log","log10","lower","ltrim","max","min","node","nodes","percentileCont","percentileDisc","pi","radians","rand","range","reduce","rel","relationship","relationships","replace","reverse","right","round","rtrim","shortestPath","sign","sin","size","split","sqrt","startnode","stdev","stdevp","str","substring","sum","tail","tan","timestamp","toFloat","toInt","toString","trim","type","upper"]),c=t(["all","and","any","contains","exists","has","in","none","not","or","single","xor"]),u=t(["as","asc","ascending","assert","by","case","commit","constraint","create","csv","cypher","delete","desc","descending","detach","distinct","drop","else","end","ends","explain","false","fieldterminator","foreach","from","headers","in","index","is","join","limit","load","match","merge","null","on","optional","order","periodic","profile","remove","return","scan","set","skip","start","starts","then","true","union","unique","unwind","using","when","where","with"]),h=/[*+\-<>=&|~%^]/;return{startState:function(){return{tokenize:r,context:null,indent:0,col:0}},token:function(e,t){if(e.sol()&&(t.context&&null==t.context.align&&(t.context.align=!1),t.indent=e.indentation()),e.eatSpace())return null;var i=t.tokenize(e,t);if("comment"!==i&&t.context&&null==t.context.align&&"pattern"!==t.context.type&&(t.context.align=!0),"("===n)s(t,")",e.column());else if("["===n)s(t,"]",e.column());else if("{"===n)s(t,"}",e.column());else if(/[\]\}\)]/.test(n)){for(;t.context&&"pattern"===t.context.type;)o(t);t.context&&n===t.context.type&&o(t)}else"."===n&&t.context&&"pattern"===t.context.type?o(t):/atom|string|variable/.test(i)&&t.context&&(/[\}\]]/.test(t.context.type)?s(t,"pattern",e.column()):"pattern"!==t.context.type||t.context.align||(t.context.align=!0,t.context.col=e.column()));return i},indent:function(t,i){var n=i&&i.charAt(0),r=t.context;if(/[\]\}]/.test(n))for(;r&&"pattern"===r.type;)r=r.prev;var s=r&&n===r.type;return r?"keywords"===r.type?e.commands.newlineAndIndent:r.align?r.col+(s?0:1):r.indent+(s?0:a):0}}}),e.modeExtensions.cypher={autoFormatLineBreaks:function(e){for(var t,i,n,i=e.split("\n"),n=/\s+\b(return|where|order by|match|with|skip|limit|create|delete|set)\b\s/g,t=0;t<i.length;t++)i[t]=i[t].replace(n," \n$1 ").trim();return i.join("\n")}},e.defineMIME("application/x-cypher-query","cypher")}),this.templates=this.templates||{},this.templates.tank=this.templates.tank||{},this.templates.tank.plugins=this.templates.tank.plugins||{},this.templates.tank.plugins.config=this.templates.tank.plugins.config||{},this.templates.tank.plugins.config.panel=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,s,o=t.helperMissing,a="function",l=this.escapeExpression,c=this.lambda;return'<fieldset>\n    <legend>Neo4j</legend>\n    <form class="form-horizontal">\n        <div class="form-group">\n            <label class="col-sm-4 control-label" for="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-neo4j.url">Server URL</label>\n            <div class="col-sm-8">\n                <input id="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-neo4j.url" type="url" class="form-control '+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-field form-control" placeholder="http://localhost:7474" value="'+l(c(null!=(r=null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.neo4j:r)?r.url:r,e))+'">\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-4 control-label" for="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-neo4j.login">Login</label>\n            <div class="col-sm-8">\n                <input id="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-neo4j.login" type="text" class="form-control '+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-field form-control" placeholder="http://localhost:7474" value="'+l(c(null!=(r=null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.neo4j:r)?r.user:r,e))+'">\n            </div>\n        </div>\n\n        <div class="form-group">\n            <label class="col-sm-4 control-label" for="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-neo4j.password">Password</label>\n            <div class="col-sm-8">\n                <input id="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-neo4j.password" type="password" class="form-control '+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-field form-control" placeholder="http://localhost:7474" value="'+l(c(null!=(r=null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.neo4j:r)?r.password:r,e))+'">\n            </div>\n        </div>\n    </form>\n</fieldset>\n\n<fieldset>\n    <legend>Sigmajs</legend>\n    <form class="form-horizontal">\n        <div class="form-group">\n            <label class="col-sm-4 control-label" for="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-forceAtlas2Time">Force Atlas</label>\n            <div class="col-sm-8">\n                <input id="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-forceAtlas2Time" type="range" class="form-control '+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-field form-control" min="1000" max="60000" step="1000" value="'+l(c(null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.forceAtlas2Time:r,e))+'">\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-4 control-label" for="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-sigmajs.drawLabels">Display node label ?</label>\n            <div class="col-sm-8">\n                <select id="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-sigmajs.drawLabels" class="form-control '+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-field form-control">\n                    <option '+l((t.selected||e&&e.selected||o).call(e,null!=(r=null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.sigmajs:r)?r.drawLabels:r,!0,{name:"selected",hash:{},data:n}))+" >true</option>\n                    <option "+l((t.selected||e&&e.selected||o).call(e,null!=(r=null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.sigmajs:r)?r.drawLabels:r,!1,{name:"selected",hash:{},data:n}))+' >false</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-4 control-label" for="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-sigmajs.drawEdgeLabels">Display edge label ?</label>\n            <div class="col-sm-8">\n                <select id="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-sigmajs.drawEdgeLabels" class="form-control '+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-field form-control">\n                    <option '+l((t.selected||e&&e.selected||o).call(e,null!=(r=null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.sigmajs:r)?r.drawEdgeLabels:r,!0,{name:"selected",hash:{},data:n}))+" >true</option>\n                    <option "+l((t.selected||e&&e.selected||o).call(e,null!=(r=null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.sigmajs:r)?r.drawEdgeLabels:r,!1,{name:"selected",hash:{},data:n}))+' >false</option>\n                </select>\n            </div>\n        </div>\n        <div class="form-group">\n            <label class="col-sm-4 control-label" for="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-node_relative_size">Node relative size ?</label>\n            <div class="col-sm-8">\n                <select id="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-node_relative_size" class="form-control '+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-field form-control">\n                    <option '+l((t.selected||e&&e.selected||o).call(e,null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.node_relative_size:r,!0,{name:"selected",hash:{},data:n}))+" >true</option>\n                    <option "+l((t.selected||e&&e.selected||o).call(e,null!=(r=null!=(r=null!=e?e.tank:e)?r.settings:r)?r.node_relative_size:r,!1,{name:"selected",hash:{},data:n}))+" >false</option>\n                </select>\n            </div>\n        </div>\n    </form>\n</fieldset>\n"},useData:!0}),this.templates.tank.plugins.data=this.templates.tank.plugins.data||{},this.templates.tank.plugins.data.edge=Handlebars.template({1:function(e,t,i,n){var r,s=this.escapeExpression;return'<div class="data container-fluid">\n    <div class="col-sm-4 field">'+s((r=null!=(r=t.key||n&&n.key)?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"key",hash:{},data:n}):r))+'</div>\n    <div class="col-sm-8 value">'+s(this.lambda(e,e))+"</div>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,s=this.lambda,o=this.escapeExpression;return'<div class="data container-fluid">\n    <div class="col-sm-4 field">ID</div>\n    <div class="col-sm-8 value">'+o(s(null!=(r=null!=e?e.edge:e)?r.id:r,e))+'</div>\n</div>\n\n<div class="data container-fluid">\n    <div class="col-sm-4 field">Type</div>\n    <div class="col-sm-8 value">'+o(s(null!=(r=null!=e?e.edge:e)?r.neo4j_type:r,e))+"</div>\n</div>\n\n"+(null!=(r=t.each.call(e,null!=(r=null!=e?e.edge:e)?r.neo4j_data:r,{name:"each",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?r:"")},useData:!0}),this.templates.tank.plugins.data.node=Handlebars.template({1:function(e,t,i,n){return this.escapeExpression(this.lambda(e,e))+" "},3:function(e,t,i,n){var r,s=this.escapeExpression;return'    <div class="data container-fluid">\n        <div class="col-sm-4 field">'+s((r=null!=(r=t.key||n&&n.key)?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"key",hash:{},data:n}):r))+'</div>\n        <div class="col-sm-8 value">'+s(this.lambda(e,e))+"</div>\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,s=this.lambda;return'<div class="data container-fluid">\n    <div class="col-sm-4 field">ID</div>\n    <div class="col-sm-8 value">'+this.escapeExpression(s(null!=(r=null!=e?e.node:e)?r.id:r,e))+'</div>\n</div>\n\n<div class="data container-fluid">\n    <div class="col-sm-4 field">Labels</div>\n    <div class="col-sm-8 value">'+(null!=(r=t.blockHelperMissing.call(e,s(null!=(r=null!=e?e.node:e)?r.neo4j_labels:r,e),{name:"node.neo4j_labels",hash:{},fn:this.program(1,n,0),inverse:this.noop,data:n}))?r:"")+"</div>\n</div>\n\n"+(null!=(r=t.each.call(e,null!=(r=null!=e?e.node:e)?r.neo4j_data:r,{name:"each",hash:{},fn:this.program(3,n,0),inverse:this.noop,data:n}))?r:"")},useData:!0}),this.templates.tank.plugins.favorite=this.templates.tank.plugins.favorite||{},this.templates.tank.plugins.favorite.button=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r;return'<button id="'+this.escapeExpression((r=null!=(r=t.id||(null!=e?e.id:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"id",hash:{},data:n}):r))+'-save" class="btn btn-default">\n    <i class="fa fa-star fa-3"></i>\n</button>'},useData:!0}),this.templates.tank.plugins.favorite.panel=Handlebars.template({1:function(e,t,i,n,r,s){var o,a,l=this.escapeExpression,c=t.helperMissing,u="function";return'            <li>\n                <a href="#" class="'+l(this.lambda(null!=s[1]?s[1].id:s[1],e))+'-link CodeMirror" data-id="'+l((a=null!=(a=t.index||n&&n.index)?a:c,typeof a===u?a.call(e,{name:"index",hash:{},data:n}):a))+'">\n                    '+(null!=(a=null!=(a=t.title||(null!=e?e.title:e))?a:c,o=typeof a===u?a.call(e,{name:"title",hash:{},data:n}):a)?o:"")+"\n                </a>\n            </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n,r,s){var o,a;return'<fieldset>\n    <legend>Favorite</legend>\n\n    <ul id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"id",hash:{},data:n}):a))+'-list" class="list-unstyled cm-s-neo tank-favorite">\n'+(null!=(o=t.blockHelperMissing.call(e,this.lambda(null!=(o=null!=e?e.tank:e)?o.favorites:o,e),{name:"tank.favorites",hash:{},fn:this.program(1,n,0,r,s),inverse:this.noop,data:n}))?o:"")+"    </ul>\n</fieldset>\n"},useData:!0,useDepths:!0}),this.templates.tank.plugins.graphtools=this.templates.tank.plugins.graphtools||{},this.templates.tank.plugins.graphtools.panel=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,s=t.helperMissing,o="function",a=this.escapeExpression;return'<!-- fullscreen -->\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-fullscreen" href="#" title="Fullscreen">\n    <i class="fa fa-arrows-alt"></i>\n</a>\n<hr />\n\n<!-- Resize graph to see it full -->\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-view" href="#" title="Resize graph to see all">\n    <i class="fa fa-bullseye"></i>\n</a>\n<hr />\n\n<!-- Zoom in / out-->\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-zoom-in" href="#" title="Zoom in">\n    <i class="fa fa-plus"></i>\n</a>\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-zoom-out" href="#" title="Zoom out">\n    <i class="fa fa-minus"></i>\n</a>\n<hr />\n\n<!-- Rotate -->\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-rotate-right" href="#" title="Right rotation">\n    <i class="fa fa-undo"></i>\n</a>\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-rotate-left" href="#" title="Left rotation">\n    <i class="fa fa-repeat"></i>\n</a>\n<hr />\n\n<!-- Force atlas -->\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-forceatlas-start" href="#" title="Force atlas start">\n    <i class="fa fa-play"></i>\n</a>\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-forceatlas-stop" href="#" title="Force atlas start">\n    <i class="fa fa-stop"></i>\n</a>\n<hr />\n\n<!-- Take a picture -->\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-window" href="#" title="Take a screenshot">\n    <i class="fa fa-camera"></i>\n</a>\n<a id="'+a((r=null!=(r=t.id||(null!=e?e.id:e))?r:s,typeof r===o?r.call(e,{name:"id",hash:{},data:n}):r))+'-graph" href="" title="Export the graph">\n    <i class="fa fa-picture-o"></i>\n</a>'},useData:!0}),this.templates.tank.plugins.history=this.templates.tank.plugins.history||{},this.templates.tank.plugins.history.panel=Handlebars.template({1:function(e,t,i,n,r,s){var o,a,l=t.helperMissing,c=this.escapeExpression,u="function";return'        <li>\n            <div class="time-ago">'+c((t.timeAgo||e&&e.timeAgo||l).call(e,null!=e?e.date:e,{name:"timeAgo",hash:{},data:n}))+'</div>\n            <a href="#" class="'+c(this.lambda(null!=s[1]?s[1].id:s[1],e))+'-link CodeMirror" data-id="'+c((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===u?a.call(e,{name:"index",hash:{},data:n}):a))+'">\n                '+(null!=(a=null!=(a=t.title||(null!=e?e.title:e))?a:l,o=typeof a===u?a.call(e,{name:"title",hash:{},data:n}):a)?o:"")+"\n            </a>\n        </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n,r,s){var o,a;return'<fieldset>\n    <legend>History</legend>\n\n    <ul id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"id",hash:{},data:n}):a))+'-list" class="list-unstyled cm-s-neo tank-history">\n'+(null!=(o=t.blockHelperMissing.call(e,this.lambda(null!=(o=null!=e?e.tank:e)?o.history:o,e),{name:"tank.history",hash:{},fn:this.program(1,n,0,r,s),inverse:this.noop,data:n}))?o:"")+"    </ul>\n\n</fieldset>\n"},useData:!0,useDepths:!0}),this.templates.tank.plugins.query=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n){var r,s,o=t.helperMissing,a="function",l=this.escapeExpression;return'<textarea id="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-value">'+l(this.lambda(null!=(r=null!=(r=null!=e?e.tank:e)?r.query:r)?r.query:r,e))+'</textarea>\n\n<div class="action">\n    <button id="'+l((s=null!=(s=t.id||(null!=e?e.id:e))?s:o,typeof s===a?s.call(e,{name:"id",hash:{},data:n}):s))+'-run" class="btn btn-default">\n        <i class="fa fa-play fa-3"></i>\n    </button>\n</div>'},useData:!0}),this.templates.tank.plugins.stats=this.templates.tank.plugins.stats||{},this.templates.tank.plugins.stats.panel=Handlebars.template({1:function(e,t,i,n,r,s){var o,a,l=t.helperMissing,c="function",u=this.escapeExpression,h=this.lambda;return"            <li>\n                <span>"+u((a=null!=(a=t.name||(null!=e?e.name:e))?a:l,typeof a===c?a.call(e,{name:"name",hash:{},data:n}):a))+" ("+u((a=null!=(a=t.count||(null!=e?e.count:e))?a:l,typeof a===c?a.call(e,{name:"count",hash:{},data:n}):a))+')</span>\n\n                <div class="demo" style="'+u((t.circleStyle||e&&e.circleStyle||l).call(e,null!=e?e.color:e,1,null!=e?e.size:e,{name:"circleStyle",hash:{},data:n}))+'">\n                </div>\n\n                <a href="#"\n                   class="'+u(h(null!=s[1]?s[1].id:s[1],e))+'-modify pull-right"\n                   data-id="'+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                   data-type="labels">\n                    <i class="fa fa-pencil"></i>\n                </a>\n                <form class="form-horizontal" '+(null!=(o=t["if"].call(e,null!=e?e.open:e,{name:"if",hash:{},fn:this.program(2,n,0,r,s),inverse:this.noop,data:n}))?o:"")+'>\n\n                    <div class="form-group">\n                        <label class="col-sm-4 control-label" for="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-color-label-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'">Color</label>\n                        <div class="col-sm-8">\n\n                            <input id="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-color-label-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                   class="'+u(h(null!=s[1]?s[1].id:s[1],e))+' color labels form-control"\n                                   data-id="'+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                   data-type="labels"\n                                   value="'+u((a=null!=(a=t.color||(null!=e?e.color:e))?a:l,typeof a===c?a.call(e,{name:"color",hash:{},data:n}):a))+'" />\n\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="col-sm-4 control-label" for="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-size-label-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'">Size</label>\n                        <div class="col-sm-8">\n\n                            <input id="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-size-label-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                   type="range" min="0.5" max="10" step="0.5"\n                                   class="'+u(h(null!=s[1]?s[1].id:s[1],e))+' form-control labels size"\n                                   data-id="'+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                   data-type="labels"\n                                   value="'+u((a=null!=(a=t.size||(null!=e?e.size:e))?a:l,typeof a===c?a.call(e,{name:"size",hash:{},data:n}):a))+'" />\n\n                        </div>\n                    </div>\n\n                </form>\n            </li>\n'},2:function(e,t,i,n){return' style="display:block;" '},4:function(e,t,i,n,r,s){var o,a,l=t.helperMissing,c="function",u=this.escapeExpression,h=this.lambda;return"            <li>\n                <span>"+u((a=null!=(a=t.name||(null!=e?e.name:e))?a:l,typeof a===c?a.call(e,{name:"name",hash:{},data:n}):a))+" ("+u((a=null!=(a=t.count||(null!=e?e.count:e))?a:l,typeof a===c?a.call(e,{name:"count",hash:{},data:n}):a))+')</span>\n                <div class="demo" style="'+u((t.circleStyle||e&&e.circleStyle||l).call(e,null!=e?e.color:e,15,null!=e?e.size:e,{name:"circleStyle",hash:{},data:n}))+'">\n                    <a href="#" title="'+u((a=null!=(a=t.shape||(null!=e?e.shape:e))?a:l,typeof a===c?a.call(e,{name:"shape",hash:{},data:n}):a))+'">'+u((t.firstLetter||e&&e.firstLetter||l).call(e,null!=e?e.shape:e,{name:"firstLetter",hash:{},data:n}))+'</a>\n                </div>\n                <a href="#"\n                   class="'+u(h(null!=s[1]?s[1].id:s[1],e))+'-modify pull-right"\n                   data-id="'+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                   data-type="types">\n                    <i class="fa fa-pencil"></i>\n                </a>\n                <form class="form-horizontal" '+(null!=(o=t["if"].call(e,null!=e?e.open:e,{name:"if",hash:{},fn:this.program(2,n,0,r,s),inverse:this.noop,data:n}))?o:"")+'>\n\n                    <div class="form-group">\n                        <label class="col-sm-4 control-label" for="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-color-type-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'">Color</label>\n                        <div class="col-sm-8">\n                            <input id="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-color-type-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                   class="'+u(h(null!=s[1]?s[1].id:s[1],e))+' color types form-control"\n                                   data-id="'+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                   data-type="types"\n                                   value="'+u((a=null!=(a=t.color||(null!=e?e.color:e))?a:l,typeof a===c?a.call(e,{name:"color",hash:{},data:n}):a))+'" />\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="col-sm-4 control-label" for="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-size-type-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'">Size</label>\n                        <div class="col-sm-8">\n                            <input id="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-size-type-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                   type="range" min="0.1" max="5" step="0.2"\n                                   class="'+u(h(null!=s[1]?s[1].id:s[1],e))+' form-control size types"\n                                   data-id="'+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                   data-type="types"\n                                   value="'+u((a=null!=(a=t.size||(null!=e?e.size:e))?a:l,typeof a===c?a.call(e,{name:"size",hash:{},data:n}):a))+'" />\n                        </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label class="col-sm-4 control-label" for="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-shape-type-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'">Type</label>\n                        <div class="col-sm-8">\n                            <select id="'+u(h(null!=s[1]?s[1].id:s[1],e))+"-shape-type-"+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                    class="'+u(h(null!=s[1]?s[1].id:s[1],e))+' form-control types shape"\n                                    data-id="'+u((a=null!=(a=t.index||n&&n.index)?a:l,typeof a===c?a.call(e,{name:"index",hash:{},data:n}):a))+'"\n                                    data-type="types">\n                                <option '+u((t.selected||e&&e.selected||l).call(e,null!=e?e.shape:e,"curve",{name:"selected",hash:{},data:n}))+" >curve</option>\n                                <option "+u((t.selected||e&&e.selected||l).call(e,null!=e?e.shape:e,"arrow",{name:"selected",hash:{},data:n}))+" >arrow</option>\n                                <option "+u((t.selected||e&&e.selected||l).call(e,null!=e?e.shape:e,"curvedArrow",{name:"selected",hash:{},data:n}))+" >curvedArrow</option>\n                                <option "+u((t.selected||e&&e.selected||l).call(e,null!=e?e.shape:e,"dashed",{name:"selected",hash:{},data:n}))+" >dashed</option>\n                                <option "+u((t.selected||e&&e.selected||l).call(e,null!=e?e.shape:e,"dotted",{name:"selected",hash:{},data:n}))+" >dotted</option>\n                                <option "+u((t.selected||e&&e.selected||l).call(e,null!=e?e.shape:e,"parallel",{name:"selected",hash:{},data:n}))+" >parallel</option>\n                                <option "+u((t.selected||e&&e.selected||l).call(e,null!=e?e.shape:e,"tapered",{name:"selected",hash:{},data:n}))+" >tapered</option>\n                            </select>\n                        </div>\n                    </div>\n\n                </form>\n            </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,n,r,s){var o,a,l=t.helperMissing,c="function",u=this.escapeExpression,h=this.lambda,d=t.blockHelperMissing;return'<fieldset>\n    <legend>Statistiques</legend>\n    <ul>\n        <li><span id="numberOfNode">'+u((a=null!=(a=t.node_count||(null!=e?e.node_count:e))?a:l,typeof a===c?a.call(e,{name:"node_count",hash:{},data:n}):a))+'</span> nodes</li>\n        <li><span id="numberOfEdge">'+u((a=null!=(a=t.edge_count||(null!=e?e.edge_count:e))?a:l,typeof a===c?a.call(e,{name:"edge_count",hash:{},data:n}):a))+'</span> eges</li>\n    </ul>\n</fieldset>\n<fieldset>\n    <legend>Node Labels</legend>\n    <ul id="labels">\n'+(null!=(o=d.call(e,h(null!=(o=null!=e?e.tank:e)?o.labels:o,e),{name:"tank.labels",hash:{},fn:this.program(1,n,0,r,s),inverse:this.noop,data:n}))?o:"")+'    </ul>\n</fieldset>\n<fieldset>\n    <legend>Edge Types</legend>\n    <ul id="types">\n'+(null!=(o=d.call(e,h(null!=(o=null!=e?e.tank:e)?o.types:o,e),{name:"tank.types",hash:{},fn:this.program(4,n,0,r,s),inverse:this.noop,data:n}))?o:"")+"    </ul>\n</fieldset>"},useData:!0,useDepths:!0}),function(e){"use strict";var t={},i=function(e){var n,r=this,s=e||{};this.settings=i.utils.extend(i.settings,s),this.query=this.settings.query,this.id=this.settings.id,t[this.id]=this,Object.defineProperty(this,"plugins",{value:[],configurable:!0}),Object.defineProperty(this,"labels",{value:this.settings.labels,configurable:!0}),Object.defineProperty(this,"types",{value:this.settings.types,configurable:!0}),document.getElementById(this.id)||(document.getElementById(this.id).innerHTML='<div id="'+this.id+'" class="tank-container"><i id="'+this.id+'-spinner"class="fa fa-spinner fa-pulse fa-3x"></i></div>'),this.initPlugins=function(){for(n=0;n<this.settings.plugins.length;n++){var e=this.settings.plugins[n];this.plugins[e]=new i.classes.plugins[e](r)}},this.refreshPlugins=function(){for(var e in this.plugins)this.plugins[e].refresh()},this.initSigmajs=function(){var e=this.id+"-graph";document.getElementById(e)||(document.getElementById(this.id).innerHTML='<div id="'+e+'"></div>'),this.sigmajs=new sigma({renderer:{container:document.getElementById(e),type:"canvas"},settings:this.settings.sigmajs})},this.updateGraphNode=function(){var e,t,i,n,r,s,o=this.sigmajs;_.each(o.graph.nodes(),function(e){e.colors=[]});for(e in o.graph.nodes()){n=o.graph.nodes()[e];for(t in this.labels){s=this.labels[t];for(i in n.neo4j_labels)n.neo4j_labels[i]===s.name&&(delete n.color,n.colors?n.colors.push(s.color):n.colors=[s.color],n.size=s.size)}for(t in this.settings.field_named)if(r=this.settings.field_named[t],n.neo4j_data[r]){n.label=n.neo4j_data[r];break}if(this.settings.node_relative_size){var a=this.sigmajs.graph.degree(n.id);n.size=n.size*(1+Math.log(a))}}},this.updateGraphEdge=function(){var e,t,i,n,r,s=this.sigmajs;for(e in s.graph.edges()){i=s.graph.edges()[e];for(t in this.types)r=this.types[t],i.neo4j_type===r.name&&(i.color=r.color,i.size=r.size,i.type=r.shape);for(t in this.settings.field_named)if(n=this.settings.field_named[t],i.neo4j_data[n]){i.label=i.neo4j_data[n];break}}},this.onGraphDataLoaded=function(e){return function(t){var n=i.instance(e);n.refreshPlugins(),n.updateGraphNode(),n.updateGraphEdge(),t.startForceAtlas2(n.settings.forceAtlas2),window.setTimeout(function(){t.stopForceAtlas2()},n.settings.forceAtlas2Time,t),n.spinnerStop()}},this.spinnerStart=function(){document.getElementById(this.id+"-spinner")&&(document.getElementById(this.id+"-spinner").style.display="block")},this.spinnerStop=function(){document.getElementById(this.id+"-spinner")&&(document.getElementById(this.id+"-spinner").style.display="none")},this.initSigmajs(),this.initPlugins(),this.refresh(),this.spinnerStop()};if(i.prototype.refresh=function(){this.spinnerStart(),this.sigmajs.kill(),this.initSigmajs(),this.query&&this.query.query&&sigma.neo4j.cypher({url:this.settings.neo4j.url,user:this.settings.neo4j.user,password:this.settings.neo4j.password},this.query.query,this.sigmajs,this.onGraphDataLoaded(this.id))},i.prototype.findTypeByName=function(e){return _.findWhere(this.types,{name:e})},i.prototype.findLabelByName=function(e){return _.findWhere(this.labels,{name:e})},i.instance=function(e){return arguments.length?t[e]:sigma.utils.extend({},t)},"undefined"!=typeof this.tank)throw"An object called tank is already in the global scope.";this.tank=i}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.settings");var t={id:"tank-container",query:{title:"Get some data",query:"MATCH (n) OPTIONAL MATCH (n)-[r]->(m) RETURN n,r,m LIMIT 1"},labels:[],types:[],plugins:["query","codemirror","favorite","history","config","stats","data","graphtools","sigma_dragnode","discoverGraph"],neo4j:{url:"http://localhost:7474",user:"neo4j",
password:"admin"},favorites:[],field_named:["title","name","label"],node_relative_size:!1,default_node_size:5,default_edge_size:2,default_edge_shape:"tapered",sigmajs:{minNodeSize:0,maxNodeSize:10,minEdgeSize:.1,maxEdgeSize:5,defaultEdgeType:"tapered",enableEdgeHovering:!0,edgeHoverSizeRatio:1,edgeHoverExtremities:!0,drawLabels:!0,drawEdgeLabels:!1,doubleClickEnabled:!1},forceAtlas2Time:5e3,forceAtlas2:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!0,barnesHutTheta:.5,startingIterations:1,iterationsPerRender:1},graphtools:{ratioCoef:1.5,rotateStep:.05,animationDuration:150}};tank.settings=sigma.utils.extend(tank.settings||{},t)}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.utils"),tank.utils.extend=function(){var e,t,i=arguments[0],n=arguments.length;for(e=n-1;e>=0;e--)for(t in arguments[e])i[t]&&"[object Object]"==arguments[e][t].toString()?i[t]=tank.utils.extend(i[t],arguments[e][t]):i[t]=arguments[e][t];return i}}.call(this),function(e){"use strict";Handlebars.registerHelper("timeAgo",function(e){return tank.utils.timeago(e)}),Handlebars.registerHelper("randomcolor",function(){return tank.utils.randomcolor()}),Handlebars.registerHelper("selected",function(e,t){return e===t?" selected":""}),Handlebars.registerHelper("firstLetter",function(e){return e.charAt(0)}),Handlebars.registerHelper("circleStyle",function(e,t,i){var n=Number.parseFloat(t)+5*Number.parseFloat(i),r="";return r+="background-color:"+e+";",r+="width:"+n+"px; height:"+n+"px;",r+="line-height:"+n+"px;"})}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.utils"),tank.utils.randomcolor=function(){for(var e="0123456789ABCDEF".split(""),t="#",i=0;6>i;i++)t+=e[Math.floor(16*Math.random())];return t},Handlebars.registerHelper("randomcolor",function(){return tank.utils.randomcolor()})}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.utils"),tank.utils.timeago=function(e){var t={seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" "};if(e instanceof Date){var i=new Date-e,n=Math.abs(i)/1e3,r=n/60,s=r/60,o=s/24,a=o/365,l=45>n&&t.seconds.replace("/%d/i",Math.round(n))||90>n&&t.minute.replace("/%d/i",1)||45>r&&t.minutes.replace("/%d/i",Math.round(r))||90>r&&t.hour.replace("/%d/i",1)||24>s&&t.hours.replace("/%d/i",Math.round(s))||42>s&&t.day.replace("/%d/i",1)||30>o&&t.days.replace("/%d/i",Math.round(o))||45>o&&t.month.replace("/%d/i",1)||365>o&&t.months.replace("/%d/i",Math.round(o/30))||1.5>a&&t.year.replace("/%d/i",1)||t.years.replace("/%d/i",Math.round(a));return l}return e}}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.codemirror"),tank.classes.plugins.codemirror=function(e){var t=e,i=this;this.updateQuery=function(e,i){console.log("[tank.plugins.codemirror] => updateQuery : "+e.getValue()),t.query={query:e.getValue(),title:e.getWrapperElement().getElementsByClassName("CodeMirror-code")[0].innerHTML}},this.runQuery=function(){console.log("[tank.plugins.codemirror] => runQuery"),t.refresh()},this.render=function(){i.editor=CodeMirror.fromTextArea(document.getElementById(e.id+"-query-value"),{lineNumbers:!0,indentWithTabs:!0,smartIndent:!0,mode:"cypher",theme:"neo",lineWrapping:!0}),i.editor.on("change",this.updateQuery),i.editor.addKeyMap({"Ctrl-Enter":this.runQuery,"Alt-Enter":this.runQuery},!1),i.editor.setValue(t.query.query)}},tank.classes.plugins.codemirror.prototype.refresh=function(){this.render()}}.call(this),function(undefined){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.config"),tank.classes.plugins.config=function(tank){var _self=this,_t=tank;if(this.id=_t.id+"-config",!document.getElementById(this.id)){var domQueryContainer=document.createElement("div");domQueryContainer.setAttribute("id",this.id),document.getElementById(_t.id).appendChild(domQueryContainer)}this.eventChangeConfig=function(){console.log("[tank.plugins.config] => eventChangeConfig");var param=this.getAttribute("id").replace(_self.id+"-",""),value=this.value;"true"===value||"false"===value?eval("_t.settings."+param+" = "+value):eval("_t.settings."+param+" = '"+value+"'"),_t.refresh()},this.render=function(){var e=templates.tank.plugins.config.panel({id:this.id,tank:_t});document.getElementById(this.id).innerHTML=e;for(var t=0;t<document.getElementsByClassName(this.id+"-field").length;t++)document.getElementsByClassName(this.id+"-field")[t].addEventListener("change",this.eventChangeConfig,!1)},_self.refresh()},tank.classes.plugins.config.prototype.refresh=function(){this.render()}}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.data"),tank.classes.plugins.data=function(e){var t=this,i=e;if(this.id=i.id+"-data",!document.getElementById(this.id)){var n=document.createElement("div");n.setAttribute("id",this.id),n.setAttribute("class","tank-container-data"),document.getElementById(i.id).appendChild(n)}this.hidePanel=function(){document.getElementById(t.id).style.display="none"},this.displayNodePanel=function(e){var n=templates.tank.plugins.data.node({id:t.id,tank:i,node:e});document.getElementById(t.id).innerHTML=n,document.getElementById(t.id).style.display="block"},this.displayEdgePanel=function(e){var n=templates.tank.plugins.data.edge({id:t.id,tank:i,edge:e});document.getElementById(t.id).innerHTML=n,document.getElementById(t.id).style.display="block"},this.registerSigmaBind=function(){e.sigmajs.bind("overNode",function(e){t.displayNodePanel(e.data.node)}),e.sigmajs.bind("overEdge",function(e){t.displayEdgePanel(e.data.edge)}),e.sigmajs.bind("outNode outEdge",function(e){t.hidePanel()})}},tank.classes.plugins.data.prototype.refresh=function(){this.registerSigmaBind()}}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.discoverGraph"),tank.classes.plugins.discoverGraph=function(t){var i=this,n=t,r="MATCH (n)-[r]-(m)WHERE id(n)=@id@ RETURN n,r,m";this.mergeData=function(t){return function(i,r){_.each(i.nodes,function(r,s){_.findWhere(n.sigmajs.graph.nodes(),{id:r.id})===e&&(r.x=t.x+Math.cos(2*Math.PI*s/i.nodes.length-Math.PI/2),r.y=t.y+Math.sin(2*Math.PI*s/i.nodes.length-Math.PI/2),n.sigmajs.graph.addNode(r))}),_.each(i.edges,function(t){_.findWhere(n.sigmajs.graph.edges(),{id:t.id})===e&&n.sigmajs.graph.addEdge(t)}),n.refreshPlugins(),n.updateGraphNode(),n.updateGraphEdge(),n.sigmajs.refresh(),n.spinnerStop()}},this.registerSigmaBind=function(){t.sigmajs.bind("doubleClickNode",function(t){n.spinnerStart();var s=r.replace("@id@",t.data.node.id);sigma.neo4j.cypher({url:n.settings.neo4j.url,user:n.settings.neo4j.user,password:n.settings.neo4j.password},s,e,i.mergeData(t.data.node))})}},tank.classes.plugins.discoverGraph.prototype.refresh=function(){this.registerSigmaBind()}}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.favorite"),tank.prototype.favorites=[],tank.classes.plugins.favorite=function(t){var i=this,n=t;if(this.id=n.id+"-favorite",n.favorites=n.settings.favorites,!document.getElementById(this.id)){var r=document.createElement("div");r.setAttribute("id",this.id),document.getElementById(n.id).appendChild(r)}this.eventRunFavorite=function(){console.log("[tank.plugins.favorite] => eventRunFavorite");var e=this.getAttribute("data-id");n.query=n.favorites[e],n.refresh()},this.eventSaveFavorite=function(){console.log("[tank.plugins.favorite] => eventSaveFavorite"),_.findWhere(n.favorites,{query:n.query.query})===e&&n.favorites.push(n.query),i.render()},this.eventRemoveFavorite=function(){console.log("[tank.plugins.favorite] => eventRemoveFavorite");var e=this.getAttribute("data-id");n.favorites.remove(e),i.render()},this.render=function(){var e=templates.tank.plugins.favorite.panel({id:this.id,tank:n});document.getElementById(this.id).innerHTML=e,!document.getElementById(this.id+"-save")&&n.plugins.query&&(e=templates.tank.plugins.favorite.button({id:this.id,tank:n}),document.getElementById(n.plugins.query.id+"-run").insertAdjacentHTML("beforebegin",e));for(var t=0;t<document.getElementsByClassName(this.id+"-link").length;t++)document.getElementsByClassName(this.id+"-link")[t].addEventListener("click",this.eventRunFavorite,!1);for(t=0;t<document.getElementsByClassName(this.id+"-remove").length;t++)document.getElementsByClassName(this.id+"-remove")[t].addEventListener("click",this.eventRemoveFavorite,!1);n.plugins.query&&document.getElementById(this.id+"-save").addEventListener("click",this.eventSaveFavorite,!1)},i.refresh()},tank.classes.plugins.favorite.prototype.refresh=function(){this.render()}}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.graphtools"),tank.classes.plugins.graphtools=function(e){var t=this,i=e;if(this.id=i.id+"-graphtools",!document.getElementById(this.id)){var n=document.createElement("div");n.setAttribute("id",this.id),n.setAttribute("class","tank-container-graphtools"),document.getElementById(i.id).appendChild(n)}this.eventOnClicZoomIn=function(){sigma.misc.animation.camera(i.sigmajs.cameras[0],{ratio:i.sigmajs.cameras[0].ratio/i.settings.graphtools.ratioCoef},{duration:i.settings.graphtools.animationDuration})},this.eventOnClicZoomOut=function(){sigma.misc.animation.camera(i.sigmajs.cameras[0],{ratio:i.sigmajs.cameras[0].ratio*i.settings.graphtools.ratioCoef},{duration:i.settings.graphtools.animationDuration})},this.eventOnClickView=function(){sigma.misc.animation.camera(i.sigmajs.cameras[0],{x:0,y:0,angle:i.sigmajs.cameras[0].angle,ratio:1.2},{duration:i.settings.graphtools.animationDuration})},this.eventOnClickRotateRight=function(){sigma.misc.animation.camera(i.sigmajs.cameras[0],{angle:i.sigmajs.cameras[0].angle+i.settings.graphtools.rotateStep},{duration:i.settings.graphtools.animationDuration})},this.eventOnClickRotateLeft=function(){sigma.misc.animation.camera(i.sigmajs.cameras[0],{angle:i.sigmajs.cameras[0].angle-i.settings.graphtools.rotateStep},{duration:i.settings.graphtools.animationDuration})},this.eventOnClickStartForceAtlas=function(){i.sigmajs.startForceAtlas2(i.settings.forceAtlas2)},this.eventOnClickStopForceAtlas=function(){i.sigmajs.stopForceAtlas2()},this.eventOnClickFullscreen=function(){var e=document.getElementById(i.id+"-graph").parentNode;e.classList.contains("fullscreen")?e.classList.remove("fullscreen"):e.classList.add("fullscreen"),i.sigmajs.refresh()},this.generate=function(e){sigma.plugins.image(i.sigmajs,i.sigmajs.renderers[0],{download:!0,size:0,margin:50,background:"#FFFFFF",clip:e,zoomRatio:1,labels:i.settings.sigmajs.drawLabels})},this.eventOnClickWindow=function(){t.generate(!0)},this.eventOnClickGraph=function(){t.generate(!1)},this.render=function(){var e=templates.tank.plugins.graphtools.panel({id:this.id,tank:i});document.getElementById(this.id).innerHTML=e,document.getElementById(this.id+"-view").addEventListener("click",this.eventOnClickView,!1),document.getElementById(this.id+"-zoom-in").addEventListener("click",this.eventOnClicZoomIn,!1),document.getElementById(this.id+"-zoom-out").addEventListener("click",this.eventOnClicZoomOut,!1),document.getElementById(this.id+"-forceatlas-start").addEventListener("click",this.eventOnClickStartForceAtlas,!1),document.getElementById(this.id+"-forceatlas-stop").addEventListener("click",this.eventOnClickStopForceAtlas,!1),document.getElementById(this.id+"-window").addEventListener("click",this.eventOnClickWindow,!1),document.getElementById(this.id+"-graph").addEventListener("click",this.eventOnClickGraph,!1),document.getElementById(this.id+"-rotate-right").addEventListener("click",this.eventOnClickRotateRight,!1),document.getElementById(this.id+"-rotate-left").addEventListener("click",this.eventOnClickRotateLeft,!1),document.getElementById(this.id+"-fullscreen").addEventListener("click",this.eventOnClickFullscreen,!1)},t.render()},tank.classes.plugins.graphtools.prototype.refresh=function(){this.render()}}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.history"),tank.prototype.history=[],tank.classes.plugins.history=function(e){var t=this,i=e;if(this.id=i.id+"-history",!document.getElementById(this.id)){var n=document.createElement("div");n.setAttribute("id",this.id),document.getElementById(i.id).appendChild(n)}this.eventRunHistory=function(){console.log("[tank.plugins.history] => eventRunHistory");var e=this.getAttribute("data-id");i.query=i.history[e],i.refresh()},this.saveIntoHistory=function(){console.log("[tank.plugins.history] => saveIntoHistory"),i.history.push({query:i.query.query,title:i.query.title,date:new Date})},this.render=function(){var e=templates.tank.plugins.history.panel({id:this.id,tank:i});document.getElementById(this.id).innerHTML=e;for(var t=0;t<document.getElementsByClassName(this.id+"-link").length;t++)document.getElementsByClassName(this.id+"-link")[t].addEventListener("click",this.eventRunHistory,!1)},t.render()},tank.classes.plugins.history.prototype.refresh=function(){this.saveIntoHistory(),this.render()}}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.query"),tank.classes.plugins.query=function(e){var t=this,i=e;if(this.id=i.id+"-query",!document.getElementById(this.id)){var n=document.createElement("div");n.setAttribute("id",this.id),document.getElementById(i.id).appendChild(n)}this.eventUpdateQuery=function(){console.log("[tank.plugins.query] => updateQuery"),i.query.query=document.getElementById(this.id+"-value").innerText},this.eventRunQuery=function(){console.log("[tank.plugins.query] => runQuery"),i.refresh()},this.render=function(){var e=templates.tank.plugins.query({id:this.id,tank:i});document.getElementById(this.id).innerHTML=e,document.getElementById(this.id+"-run").addEventListener("click",this.eventRunQuery,!1),document.getElementById(this.id+"-value").addEventListener("change",this.eventUpdateQuery,!1)},t.refresh()},tank.classes.plugins.query.prototype.refresh=function(){this.render()}}.call(this),function(e){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.sigma_dragnode"),tank.classes.plugins.sigma_dragnode=function(e){var t=this,i=e;this.render=function(){sigma.plugins.dragNodes(i.sigmajs,i.sigmajs.renderers[0])},t.render()},tank.classes.plugins.sigma_dragnode.prototype.refresh=function(){this.render()}}.call(this),function(undefined){"use strict";if("undefined"==typeof tank)throw"tank is not declared";sigma.utils.pkg("tank.classes.plugins.stats"),tank.classes.plugins.stats=function(t){var _self=this,_t=t;if(this.id=_t.id+"-stats",this.jscolor=jscolor,jscolor.dir="./assets/jscolor/",jscolor.getElementPos=function(e){var t=e,i=0,n=0;if(t.offsetParent)do i+=t.offsetParent.offsetLeft+85,n+=t.offsetParent.offsetTop+64;while(t==t.offsetParent);return[i,n]},!document.getElementById(this.id)){var domQueryContainer=document.createElement("div");domQueryContainer.setAttribute("id",this.id),document.getElementById(_t.id).appendChild(domQueryContainer)}this.redraw=function(){_t.updateGraphNode(),_t.updateGraphEdge(),_t.sigmajs.refresh(),this.render()},this.eventToggleModifyForm=function(){var id=this.getAttribute("data-id"),type=this.getAttribute("data-type"),form=this.nextElementSibling,display=!1;"block"==form.style.display?form.style.display="none":(form.style.display="block",display=!0),eval("_t."+type+"["+id+"].open = "+display)},this.eventOnChangeColor=function(){var e=this.getAttribute("data-id"),t=this.getAttribute("data-type");"types"===t?_t.types[e].color="#"+this.value:_t.labels[e].color="#"+this.value,_self.redraw()},this.eventOnChangeSize=function(){var e=this.getAttribute("data-id"),t=this.getAttribute("data-type");"types"===t?_t.types[e].size=this.value:_t.labels[e].size=this.value,_self.redraw()},this.eventOnChangeShape=function(){var e=this.getAttribute("data-id"),t=this.getAttribute("data-type");"types"===t&&(_t.types[e].shape=this.value),_self.redraw()},this.calculateLabelEdgeFromSigma=function(){var e,t,i,n,r,s,o;_.each(_t.types,function(e){e.count=0}),_.each(_t.labels,function(e){e.count=0}),r=_t.sigmajs.graph.edges();for(e in r)s=r[e],_t.findTypeByName(s.neo4j_type)?_t.findTypeByName(s.neo4j_type).count+=1:_t.types.push({name:s.neo4j_type,color:tank.utils.randomcolor(),size:tank.settings.default_edge_size,shape:tank.settings.default_edge_shape,count:1});i=_t.sigmajs.graph.nodes();for(e in i){n=i[e];for(t in n.neo4j_labels)o=n.neo4j_labels[t],_t.findLabelByName(o)?_t.findLabelByName(o).count+=1:_t.labels.push({name:o,color:tank.utils.randomcolor(),size:tank.settings.default_node_size,count:1});_t.sigmajs.graph.nodes()[e]=n}},this.render=function(){var e;_t.updateGraphEdge(),_t.updateGraphEdge();var t;for(t=_t.sigmajs.graph?templates.tank.plugins.stats.panel({id:this.id,tank:_t,node_count:_t.sigmajs.graph.nodes().length,edge_count:_t.sigmajs.graph.edges().length}):templates.tank.plugins.stats.panel({id:this.id,tank:_t,node_count:0,edge_count:0}),document.getElementById(this.id).innerHTML=t,e=0;e<document.getElementsByClassName(_self.id+" color").length;e++)document.getElementsByClassName(_self.id+" color")[e].addEventListener("change",this.eventOnChangeColor,!1);for(e=0;e<document.getElementsByClassName(_self.id+" size").length;e++)document.getElementsByClassName(_self.id+" size")[e].addEventListener("change",this.eventOnChangeSize,!1);for(e=0;e<document.getElementsByClassName(_self.id+" shape").length;e++)document.getElementsByClassName(_self.id+" shape")[e].addEventListener("change",this.eventOnChangeShape,!1);for(e=0;e<document.getElementsByClassName(_self.id+"-modify").length;e++)document.getElementsByClassName(_self.id+"-modify")[e].addEventListener("click",this.eventToggleModifyForm,!1);this.jscolor.init()},_self.refresh()},tank.classes.plugins.stats.prototype.refresh=function(){this.calculateLabelEdgeFromSigma(),this.render()}}.call(this);
//# sourceMappingURL=tank-browser.min.js.map
